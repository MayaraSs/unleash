"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const backstage_1 = require("./backstage");
const reset_password_controller_1 = __importDefault(require("./auth/reset-password-controller"));
const AdminApi = require('./admin-api');
const ClientApi = require('./client-api');
const Controller = require('./controller');
const HealthCheckController = require('./health-check');
const LogoutController = require('./logout');
const api = require('./api-def');
const SimplePasswordProvider = require('./auth/simple-password-provider');
class IndexRouter extends Controller {
    constructor(config, services) {
        super(config);
        this.use('/health', new HealthCheckController(config, services).router);
        this.use('/internal-backstage', new backstage_1.BackstageController(config).router);
        this.use('/logout', new LogoutController(config).router);
        this.use('/auth/simple', new SimplePasswordProvider(config, services).router);
        this.use('/auth/reset', new reset_password_controller_1.default(config, services).router);
        this.get(api.uri, this.index);
        this.use(api.links.admin.uri, new AdminApi(config, services).router);
        this.use(api.links.client.uri, new ClientApi(config, services).router);
    }
    async index(req, res) {
        res.json(api);
    }
}
exports.default = IndexRouter;
module.exports = IndexRouter;
//# sourceMappingURL=index.js.map