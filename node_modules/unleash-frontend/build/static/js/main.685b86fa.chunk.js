(this["webpackJsonpunleash-frontend"]=this["webpackJsonpunleash-frontend"]||[]).push([[0],{108:function(e,t,n){e.exports={select:"Tag_select__10mcn",textfield:"Tag_textfield__208RB",header:"Tag_header__jC1zJ",container:"Tag_container__3eDhf",formbuttons:"Tag_formbuttons__2bW1s",tagListItem:"Tag_tagListItem__32pvP"}},128:function(e,t,n){e.exports={header:"copy-feature-component_header__DVpO5",content:"copy-feature-component_content__2H9IV",text:"copy-feature-component_text__KpYyc"}},129:function(e,t,n){e.exports={path:"progress_path__1AKh7",trail:"progress_trail___Miz7",text:"progress_text__2a6Un"}},130:function(e,t,n){e.exports={chip:"metric_chip__2Vvpt",problemIcon:"metric_problemIcon__3Jxei",grid:"metric_grid__2DpI4"}},131:function(e,t,n){e.exports={header:"Reporting_header__3QDF2",card:"Reporting_card__wZwq9",projectSelector:"Reporting_projectSelector__1d0T8",select:"Reporting_select__3o0QF",reportCardContainer:"Reporting_reportCardContainer__2nbR9",reportCardHealthInnerContainer:"Reporting_reportCardHealthInnerContainer__1envJ",reportCardHealthRating:"Reporting_reportCardHealthRating__1UrLJ",reportCardList:"Reporting_reportCardList__2hs3M",check:"Reporting_check__3HigI",danger:"Reporting_danger__1zyBO",reportCardActionContainer:"Reporting_reportCardActionContainer__1eb1Y",reportCardActionText:"Reporting_reportCardActionText__2X6XD",reportCardBtn:"Reporting_reportCardBtn__3BS2d",healthDanger:"Reporting_healthDanger__TdQkr",healthWarning:"Reporting_healthWarning__1EthM",reportToggleList:"Reporting_reportToggleList__3Tvyq",bulkAction:"Reporting_bulkAction__3qcUl",sortIcon:"Reporting_sortIcon__FVKZM",reportToggleListHeader:"Reporting_reportToggleListHeader__ZPI6e",reportToggleListInnerContainer:"Reporting_reportToggleListInnerContainer__CFpTu",reportToggleListHeading:"Reporting_reportToggleListHeading__3fqMc",reportingToggleTable:"Reporting_reportingToggleTable__2XQce",expired:"Reporting_expired__2Xtv-",active:"Reporting_active__3woaj",stale:"Reporting_stale__JZ9Up",reportStatus:"Reporting_reportStatus__35RXH",reportIcon:"Reporting_reportIcon__3c_7D",tableRow:"Reporting_tableRow__2TTtH"}},142:function(e,t,n){e.exports={stale:"status_stale__3-I9N",active:"status_active__16GVe"}},143:function(e,t,n){e.exports={header:"Project_header__3sTiG",supporting:"Project_supporting__5QQ9R",container:"Project_container__3B-St",formButtons:"Project_formButtons__Onila",formContainer:"Project_formContainer__dleM2"}},144:function(e,t,n){e.exports={container:"SimpleAuth_container__132IK",button:"SimpleAuth_button__1LdZG"}},175:function(e,t,n){e.exports={descriptionInput:"update-description-component_descriptionInput__1IDkR"}},177:function(e,t,n){e.exports={dialogueFormContent:"add-tag-dialog-component_dialogueFormContent__3V3Rl"}},181:function(e,t,n){e.exports={"non-style-button":"strategies_non-style-button__1IVYk",deprecated:"strategies_deprecated__2J3wY",formButtons:"strategies_formButtons__3IT1j",header:"strategies_header__3csrX",formContainer:"strategies_formContainer__1ihq3",inset:"strategies_inset__mh4Nh",parameter_menu:"strategies_parameter_menu__2OcvB",listcontainer:"strategies_listcontainer__37RF6",listItem:"strategies_listItem__1q9Xm"}},187:function(e,t,n){e.exports={showUser:"user_showUser__3nZmE",showLocale:"user_showLocale__DjhL9",labelFlag:"user_labelFlag__1fMCO",avatar:"user_avatar__6Vq-L",showUserSettings:"user_showUserSettings__29oox",dropdown:"user_dropdown__2o34m"}},211:function(e,t,n){},257:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=(n(210),n(211),n(30)),c=n.n(i),o=n(18),s=n(28),l=n(9),u=n(344),d=n(345),j=n(165),h=n(66),b=n(343),p=n(193),f=n(346),m=n(192),g=Object(m.a)({palette:{primary:{main:"#1A4049",light:"#B3DAED",dark:"#0A1A1d"},secondary:{main:"#122D33",light:"#40836f",dark:"#002c1d"},neutral:{main:"#18243e"},icons:{lightGrey:"#e0e0e0"},chips:{main:"#b0bec5"},searchField:{main:"#fff"},iconButtons:{main:"#fff"},tabs:{main:"#efefef"},links:{deprecated:"#1d1818"},borders:{main:"#f1f1f1"},error:{main:"#d95e5e"},success:{main:"#3bd86e"},division:{main:"#f1f1f1"},footer:{main:"#000",background:"#fff"},code:{main:"#0b8c8f",diffAdd:"green",diffSub:"red",diffNeutral:"black",edited:"blue",background:"#efefef"},cards:{gradient:{top:"#265f6d",bottom:"#1A4049"},container:{bg:"#f1f1f1"}},login:{gradient:{top:"#607D8B",bottom:"#173341"},main:"#fff"},dialogue:{title:{main:"#fff"}}},padding:{pageContent:{header:"1.8rem 2rem",body:"2rem"}},borders:{default:"1px solid #f1f1f1",radius:{main:"3px"}},fontSizes:{mainHeader:"1.2rem",subHeader:"1.1rem"},boxShadows:{chip:{main:"0 2px 2px 0 rgba(0, 0, 0, 0.14),\n        0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 1px 5px 0 rgba(0, 0, 0, 0.12)"}},fontWeight:{thin:"300",medium:"400",semi:"500",bold:"600"}}),O=n(16),x=n(3),v=n(8),y=n.n(v),_=n(14),w=function(){var e;return function(){if(void 0!==e)return e;var t=document.querySelector('meta[name="baseUriPath"]');return(null===t||void 0===t?void 0:t.content)?"::baseUriPath::"===(e=null===t||void 0===t?void 0:t.content)?(e="",""):e:e=""}}(),C=function(e){var t=w();return t?"".concat(t,"/").concat(e):"/".concat(e)},T=function(e){var t=w();return t?"".concat(t,"/").concat(e):e},S=n(20),E=n(21),k=n(22),N=n(109),A="Unexpected exception when talking to unleash-api";var R=function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;return Object(S.a)(this,n),(e=t.call(this,A)).name="ServiceError",e.statusCode=a,e}return n}(Object(N.a)(Error)),I=function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(e,a){var r;return Object(S.a)(this,n),(r=t.call(this,"Authentication required")).name="AuthenticationError",r.statusCode=e,r.body=a,r}return n}(Object(N.a)(Error)),D=function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(e,a){var r;return Object(S.a)(this,n),(r=t.call(this,"You cannot perform this action")).name="ForbiddenError",r.statusCode=e,r.body=a,r}return n}(Object(N.a)(Error)),L=function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(S.a)(this,n),(a=t.call(this,"The requested resource could not be found but may be available in the future")).name="NotFoundError",a.statusCode=e,a}return n}(Object(N.a)(Error));function P(e){return e.ok?Promise.resolve(e):401===e.status?new Promise((function(t,n){e.json().then((function(t){return n(new I(e.status,t))}))})):403===e.status?new Promise((function(t,n){e.json().then((function(t){return n(new D(e.status,t))}))})):404===e.status?new Promise((function(t,n){n(new L(e.status))})):e.status>399&&e.status<501?new Promise((function(t,n){e.json().then((function(t){var a=t&&t.isJoi?function(e){return e.details.length>0?e.details[0].message:A}(t):function(e){return e&&e.length>0?e[0].msg:A}(t),r=new Error(a);r.statusCode=e.status,n(r)})).catch((function(){return n(new Error(A))}))})):Promise.reject(new R(e.status))}var F={Accept:"application/json","Content-Type":"application/json"},U=C("api/admin/features");function V(e){return new Promise((function(t,n){e.strategies&&0!==e.strategies.length?t(e):n(new Error("You must add at least one activation strategy"))}))}function G(){return(G=Object(_.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t);case 2:return e.abrupt("return",fetch(U,{method:"POST",headers:F,credentials:"include",body:JSON.stringify(t)}).then(P));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B={fetchAll:function(){return fetch(U,{credentials:"include"}).then(P).then((function(e){return e.json()}))},fetchFeatureToggle:function(e){return fetch("".concat(U,"/").concat(e),{credentials:"include"}).then(P).then((function(e){return e.json()}))},create:function(e){return G.apply(this,arguments)},validate:function(e){return fetch("".concat(U,"/validate"),{method:"POST",headers:F,credentials:"include",body:JSON.stringify(e)}).then(P)},update:function(e){return V(e).then((function(){return fetch("".concat(U,"/").concat(e.name),{method:"PUT",headers:F,credentials:"include",body:JSON.stringify(e)})})).then(P)},toggle:function(e,t){var n=e?"on":"off";return fetch("".concat(U,"/").concat(t,"/toggle/").concat(n),{method:"POST",headers:F,credentials:"include"}).then(P)},setStale:function(e,t){var n=e?"on":"off";return fetch("".concat(U,"/").concat(t,"/stale/").concat(n),{method:"POST",headers:F,credentials:"include"}).then(P).then((function(e){return e.json()}))},remove:function(e){return fetch("".concat(U,"/").concat(e),{method:"DELETE",credentials:"include"}).then(P)}},M="AUTH_REQUIRED",H="FORBIDDEN";function z(e,t){return function(n){switch(n.statusCode){case 401:e({type:M,error:n,receivedAt:Date.now()});break;case 403:e({type:H,error:n,receivedAt:Date.now()});break;default:e({type:t,error:n,receivedAt:Date.now()})}}}var J="MUTE_ERROR",Y=n(72)("unleash:feature-actions"),W="ADD_FEATURE_TOGGLE",q="REMOVE_FEATURE_TOGGLE",Z="UPDATE_FEATURE_TOGGLE",K="TOGGLE_FEATURE_TOGGLE",X="START_FETCH_FEATURE_TOGGLES",Q="START_UPDATE_FEATURE_TOGGLE",$="FETCH_FEATURE_TOGGLES_SUCCESS",ee="RECEIVE_FEATURE_TOGGLES",te="ERROR_FETCH_FEATURE_TOGGLES",ne="ERROR_CREATING_FEATURE_TOGGLE",ae="ERROR_UPDATE_FEATURE_TOGGLE",re="ERROR_REMOVE_FEATURE_TOGGLE",ie="UPDATE_FEATURE_TOGGLE_STRATEGIES",ce="FETCH_FEATURE_TOGGLE_ERROR",oe="RESET_LOADING",se="RECEIVE_FEATURE_TOGGLE";function le(e,t){return Y("Toggle feature toggle ",t),function(n){n(function(e,t){return function(n){return n({type:Q}),B.toggle(e,t).then((function(){return n({type:K,name:t})})).catch(z(n,ae))}}(e,t))}}function ue(){return Y("Start fetching feature toggles"),function(e){return e({type:X}),B.fetchAll().then((function(t){e({type:$}),e(function(e){return Y("reviced feature toggles",e),{type:ee,featureToggles:e.features.map((function(e){return e})),receivedAt:Date.now()}}(t))})).catch((function(){e({type:ce}),z(e,te)}))}}function de(e){return function(t){return t({type:"START_CREATE_FEATURE_TOGGLE"}),B.create(e).then((function(e){return e.json()})).then((function(e){t({type:W,featureToggle:e})})).catch((function(e){throw z(t,ne),e}))}}function je(e,t){return function(n){var a=Object(x.a)({},e);return a.variants=t,n({type:Q}),B.update(a).then((function(){var e="".concat(a.name," successfully updated!");return setTimeout((function(){return n({type:J,error:e})}),1e3),n({type:ie,featureToggle:a,info:e})})).catch((function(e){throw z(n,ae),e}))}}function he(e){return B.validate({name:e})}var be=C("api/admin/user");var pe={fetchUser:function(){return fetch(be,{credentials:"include"}).then(P).then((function(e){return e.json()}))},insecureLogin:function(e,t){return fetch(e,{method:"POST",credentials:"include",headers:F,body:JSON.stringify(t)}).then(P).then((function(e){return e.json()}))},demoLogin:function(e,t){return fetch(e,{method:"POST",credentials:"include",headers:F,body:JSON.stringify(t)}).then(P).then((function(e){return e.json()}))},logoutUser:function(){return fetch(C("logout"),{method:"GET",credentials:"include"}).then(P)},passwordLogin:function(e,t){return fetch(e,{method:"POST",credentials:"include",headers:F,body:JSON.stringify(t)}).then(P).then((function(e){return e.json()}))}},fe="USER_CHANGE_CURRENT",me="USER_LOGOUT",ge="USER_LOGIN",Oe="START_FETCH_USER",xe=n(72)("unleash:user-actions"),ve=function(e){return{type:fe,value:e}};function ye(e){xe(e)}function _e(){return xe("Start fetching user"),function(e){return e({type:Oe}),pe.fetchUser().then((function(t){return e(ve(t))})).catch(z(e,"ERROR_FETCH_USER"))}}function we(){var e=w();return function(t){return pe.logoutUser().then((function(){return t({type:me})})).then((function(){return t({type:oe})})).then((function(){window.location="".concat(e)})).catch(ye)}}var Ce=n(72)("unleash:feature-store"),Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new O.a([]),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return Ce(W,t),e.push(new O.b(t.featureToggle));case q:return Ce(q,t),e.filter((function(e){return e.get("name")!==t.featureToggleName}));case K:return Ce(K,t),e.map((function(e){return e.get("name")===t.name?e.set("enabled",!e.get("enabled")):e}));case ie:return Ce(ie,t),e.map((function(e){return e.get("name")===t.featureToggle.name?new O.b(t.featureToggle):e}));case Z:return Ce(Z,t),e.map((function(e){return e.get("name")===t.featureToggle.name?new O.b(t.featureToggle):e}));case se:return Ce(se,t),e.map((function(e){return e.get("name")===t.featureToggle.name?new O.b(t.featureToggle):e}));case ee:return Ce(ee,t),new O.a(t.featureToggles.map(O.b));case ge:case me:return Ce(me,t),new O.a([]);default:return e}},Se=C("api/admin/feature-types");var Ee={fetchAll:function(){return fetch(Se,{credentials:"include"}).then(P).then((function(e){return e.json()}))}},ke="RECEIVE_FEATURE_TYPES",Ne=function(e){return{type:ke,value:e}};var Ae=[{id:"release",name:"Release",initial:!0}];function Re(){return new O.a(Ae)}var Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ke:return new O.a(t.value);default:return e}},De=C("api/admin/metrics/feature-toggles");var Le=C("api/admin/metrics/seen-apps");var Pe={fetchFeatureMetrics:function(){return fetch(De,{credentials:"include"}).then(P).then((function(e){return e.json()}))},fetchSeenApps:function(){return fetch(Le,{credentials:"include"}).then(P).then((function(e){return e.json()}))}},Fe="RECEIVE_FEATURE_METRICS",Ue="RECEIVE_SEEN_APPS";function Ve(e,t){return function(n){e({type:t,error:n,receivedAt:Date.now()})}}function Ge(){return function(e){return e({type:"START_FETCH_FEATURE_METRICS"}),Pe.fetchFeatureMetrics().then((function(t){return e(function(e){return{type:Fe,value:e,receivedAt:Date.now()}}(t))})).catch(Ve(e,"ERROR_FETCH_FEATURE_METRICS"))}}var Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(O.c)({lastHour:{},lastMinute:{},seenApps:{}}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ue:return e.set("seenApps",new O.b(t.value));case Fe:return e.withMutations((function(e){return e.set("lastHour",new O.b(t.value.lastHour)),e.set("lastMinute",new O.b(t.value.lastMinute)),e}));default:return e}},Me=C("api/admin/features");var He={tagFeature:function(e,t){return fetch("".concat(Me,"/").concat(e,"/tags"),{method:"POST",headers:F,credentials:"include",body:JSON.stringify(t)}).then(P).then((function(e){return e.json()}))},untagFeature:function(e,t){return fetch("".concat(Me,"/").concat(e,"/tags/").concat(t.type,"/").concat(encodeURIComponent(t.value)),{method:"DELETE",headers:F,credentials:"include"}).then(P)},fetchFeatureToggleTags:function(e){return fetch("".concat(Me,"/").concat(e,"/tags"),{method:"GET",headers:F,credentials:"include"}).then(P).then((function(e){return e.json()}))}},ze="TAG_FEATURE_TOGGLE",Je="UNTAG_FEATURE_TOGGLE",Ye="RECEIVE_FEATURE_TOGGLE_TAGS";function We(e,t){return function(n){return n({type:"START_TAG_FEATURE_TOGGLE"}),He.tagFeature(e,t).then((function(t){return n({type:ze,featureToggle:e,tag:t})})).catch(z(n,"ERROR_TAG_FEATURE_TOGGLE"))}}function qe(e){return function(t){return t({type:"START_FETCH_FEATURE_TOGGLE_TAGS"}),He.fetchFeatureToggleTags(e).then((function(e){return t(function(e){return{type:Ye,value:e,receivedAt:Date.now()}}(e))})).catch(z(t,"ERROR_FETCH_FEATURE_TOGGLE_TAGS"))}}function Ze(){return new O.a}var Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ye:return t.value?new O.a(t.value.tags):Ze();case ze:return e.push(new O.b(t.tag));case Je:return e.remove(e.findIndex((function(e){return e.value===t.tag.value&&e.type===t.tag.type})));default:return e}},Xe=C("api/admin/tag-types");function Qe(e){return fetch("".concat(Xe,"/validate"),{method:"POST",headers:F,credentials:"include",body:JSON.stringify(e)}).then(P)}var $e={fetchTagTypes:function(){return fetch(Xe,{credentials:"include"}).then(P).then((function(e){return e.json()}))},create:function(e){return Qe(e).then((function(){return fetch(Xe,{method:"POST",headers:F,credentials:"include",body:JSON.stringify(e)})})).then(P)},update:function(e){return fetch("".concat(Xe,"/").concat(e.name),{method:"PUT",headers:F,credentials:"include",body:JSON.stringify(e)}).then(P)},deleteTagType:function(e){return fetch("".concat(Xe,"/").concat(e),{method:"DELETE",headers:F,credentials:"include"}).then(P)},validateTagType:Qe},et="RECEIVE_TAG_TYPES",tt="ERROR_FETCH_TAG_TYPES",nt="ADD_TAG_TYPE",at="DELETE_TAG_TYPE",rt="UPDATE_TAG_TYPE";function it(e){return{type:et,value:e,receivedAt:Date.now()}}function ct(){return function(e){return e({type:"START_FETCH_TAG_TYPES"}),$e.fetchTagTypes().then((function(t){return e(it(t))})).catch(z(e,tt))}}var ot=n(72)("unleash:tag-type-store"),st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new O.a([]),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case nt:return ot("Add tagtype"),e.push(new O.b(t.tagType));case at:return ot("Delete tagtype"),e.filter((function(e){return e.get("name")!==t.tagType.name}));case et:return ot("Receive tag types",t),new O.a(t.value.tagTypes.map(O.b));case tt:return ot("Error receiving tag types",t),e;case rt:return e.map((function(e){return e.get("name")===t.tagType.name?new O.b(t.tagType):e}));default:return e}},lt=C("api/admin/tags");var ut={fetchTags:function(){return fetch(lt,{credentials:"include"}).then(P).then((function(e){return e.json()}))},deleteTag:function(e){return fetch("".concat(lt,"/").concat(e.type,"/").concat(encodeURIComponent(e.value)),{method:"DELETE",headers:F,credentials:"include"}).then(P)},create:function(e){return fetch(lt,{method:"POST",headers:F,credentials:"include",body:JSON.stringify(e)}).then(P)}},dt="RECEIVE_TAGS",jt="ERROR_FETCH_TAGS",ht="ADD_TAG",bt="DELETE_TAG";function pt(){return function(e){return e({type:"START_FETCH_TAGS"}),ut.fetchTags().then((function(t){return e(function(e){return{type:dt,value:e,receivedAt:Date.now()}}(t))})).catch(z(e,jt))}}var ft=n(72)("unleash:tag-store"),mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new O.a([]),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ht:return ft("Add tag"),e.push(new O.b(t.tag));case bt:return ft("Delete tag"),e.filter((function(e){return e.get("type")!==t.tag.type&&e.get("value")!==t.tag.value}));case dt:return ft("Receive tags",t),new O.a(t.value.tags.map(O.b));case jt:return ft("Error receiving tag types",t),e;default:return e}},gt=C("api/admin/strategies");var Ot={fetchAll:function(){return fetch(gt,{credentials:"include"}).then(P).then((function(e){return e.json()}))},create:function(e){return fetch(gt,{method:"POST",headers:F,body:JSON.stringify(e),credentials:"include"}).then(P)},update:function(e){return fetch("".concat(gt,"/").concat(e.name),{method:"put",headers:F,body:JSON.stringify(e),credentials:"include"}).then(P)},remove:function(e){return fetch("".concat(gt,"/").concat(e.name),{method:"DELETE",headers:F,credentials:"include"}).then(P)},deprecate:function(e){return fetch("".concat(gt,"/").concat(e.name,"/deprecate"),{method:"POST",headers:F,credentials:"include"}).then(P)},reactivate:function(e){return fetch("".concat(gt,"/").concat(e.name,"/reactivate"),{method:"POST",headers:F,credentials:"include"}).then(P)}},xt=C("api/admin/metrics/applications");var vt={fetchApplication:function(e){return fetch("".concat(xt,"/").concat(e),{headers:F,credentials:"include"}).then(P).then((function(e){return e.json()}))},fetchAll:function(){return fetch(xt,{headers:F,credentials:"include"}).then(P).then((function(e){return e.json()}))},fetchApplicationsWithStrategyName:function(e){return fetch("".concat(xt,"?strategyName=").concat(e),{headers:F,credentials:"include"}).then(P).then((function(e){return e.json()}))},storeApplicationMetaData:function(e,t,n){var a={};return a[t]=n,fetch("".concat(xt,"/").concat(e),{method:"POST",headers:F,body:JSON.stringify(a),credentials:"include"}).then(P)},deleteApplication:function(e){return fetch("".concat(xt,"/").concat(e),{method:"DELETE",headers:F,credentials:"include"}).then(P)}},yt="ADD_STRATEGY",_t="UPDATE_STRATEGY",wt="REMOVE_STRATEGY",Ct="DEPRECATE_STRATEGY",Tt="REACTIVATE_STRATEGY",St="RECEIVE_STRATEGIES",Et="ERROR_RECEIVE_STRATEGIES",kt="ERROR_CREATING_STRATEGY",Nt="ERROR_UPDATING_STRATEGY",At="UPDATE_STRATEGY_SUCCESS",Rt=function(e){return{type:St,value:e}},It=function(e,t){t({type:At,info:e}),setTimeout((function(){return t({type:J,error:e})}),1500)};function Dt(){return function(e){return e({type:"REQUEST_STRATEGIES"}),Ot.fetchAll().then((function(t){return e(Rt(t.strategies))})).catch(z(e,Et))}}function Lt(e){return function(t){return Ot.remove(e).then((function(){return t(function(e){return{type:wt,strategy:e}}(e))})).then((function(){It("Strategy successfully deleted.",t)})).catch(z(t,"ERROR_REMOVING_STRATEGY"))}}function Pt(e){return function(t){t({type:"START_DEPRECATE_STRATEGY"}),Ot.deprecate(e).then((function(){return t(function(e){return{type:Ct,strategy:e}}(e))})).then((function(){return It("Strategy successfully deprecated",t)})).catch(z(t,"ERROR_DEPRECATING_STRATEGY"))}}function Ft(e){return function(t){t({type:"START_REACTIVATE_STRATEGY"}),Ot.reactivate(e).then((function(){return t(function(e){return{type:Tt,strategy:e}}(e))})).then((function(){return It("Strategy successfully reactivated",t)})).catch(z(t,"ERROR_REACTIVATING_STRATEGY"))}}function Ut(){return new O.b({list:new O.a})}function Vt(e,t){var n=e.get("list").indexOf(t.strategy);return-1!==n?e.update("list",(function(e){return e.remove(n)})):e}function Gt(e,t){return e.update("list",(function(e){return e.map((function(e){return e.name===t.strategy.name?t.strategy:e}))}))}function Bt(e,t,n){return e.update("list",(function(e){return e.map((function(e){return e.name===t.strategy.name?(t.strategy.deprecated=n,t.strategy):e}))}))}var Mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case St:return e.set("list",new O.a(t.value));case wt:return Vt(e,t);case yt:return e.update("list",(function(e){return e.push(t.strategy)}));case _t:return Gt(e,t);case Ct:return Bt(e,t,!0);case Tt:return Bt(e,t,!1);default:return e}},Ht=C("api/admin/events");var zt={fetchAll:function(){return fetch(Ht,{credentials:"include"}).then(P).then((function(e){return e.json()}))},fetchHistoryForToggle:function(e){return fetch("".concat(Ht,"/").concat(e),{credentials:"include"}).then(P).then((function(e){return e.json()}))}},Jt="RECEIVE_HISTORY",Yt="ERROR_RECEIVE_HISTORY",Wt="RECEIVE_HISTORY_FOR_TOGGLE";function qt(){return new O.b({list:new O.a,toggles:new O.b})}var Zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Wt:return e.setIn(["toggles",t.value.toggleName],new O.a(t.value.events));case Jt:return e.set("list",new O.a(t.value));case me:case ge:return qt();default:return e}},Kt=C("api/admin/archive");var Xt={fetchAll:function(){return fetch("".concat(Kt,"/features"),{credentials:"include"}).then(P).then((function(e){return e.json()}))},revive:function(e){return fetch("".concat(Kt,"/revive/").concat(e),{method:"POST",headers:F,credentials:"include"}).then(P)}},Qt="REVIVE_TOGGLE",$t="RECEIVE_ARCHIVE",en="ERROR_RECEIVE_ARCHIVE";function tn(e){return function(t){return Xt.revive(e).then((function(){return t({type:Qt,value:e})})).catch(z(t,en))}}function nn(){return function(e){return Xt.fetchAll().then((function(t){return e(function(e){return{type:$t,value:e.features}}(t))})).catch(z(e,en))}}function an(){return new O.b({list:new O.a})}var rn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Qt:return e.update("list",(function(e){return e.filter((function(e){return e.name!==t.value}))}));case $t:return e.set("list",new O.a(t.value));case me:case ge:return an();default:return e}},cn=C("api/admin/context");var on={fetchAll:function(){return fetch(cn,{credentials:"include"}).then(P).then((function(e){return e.json()}))},create:function(e){return fetch(cn,{method:"POST",headers:F,body:JSON.stringify(e),credentials:"include"}).then(P)},update:function(e){return fetch("".concat(cn,"/").concat(e.name),{method:"PUT",headers:F,body:JSON.stringify(e),credentials:"include"}).then(P)},remove:function(e){return fetch("".concat(cn,"/").concat(e.name),{method:"DELETE",headers:F,credentials:"include"}).then(P)},validate:function(e){return fetch("".concat(cn,"/validate"),{method:"POST",headers:F,credentials:"include",body:JSON.stringify(e)}).then(P)}},sn="RECEIVE_CONTEXT",ln="REMOVE_CONTEXT",un="ADD_CONTEXT_FIELD",dn="ERROR_ADD_CONTEXT_FIELD",jn="UPDATE_CONTEXT_FIELD",hn="ERROR_UPDATE_CONTEXT_FIELD",bn=function(e){return{type:sn,value:e}};function pn(e){return function(t){return on.remove(e).then((function(){return t(function(e){return{type:ln,context:e}}(e))})).catch(z(t,"ERROR_REMOVING_CONTEXT"))}}function fn(e){return function(t){return on.create(e).then((function(){return t(function(e){return{type:un,context:e}}(e))})).catch((function(e){throw z(t,dn),e}))}}function mn(e){return function(t){return on.update(e).then((function(){return t(function(e){return{type:jn,context:e}}(e))})).catch(z(t,hn))}}function gn(e){return on.validate({name:e})}var On=C("api/admin/projects");var xn={fetchAll:function(){return fetch(On,{credentials:"include"}).then(P).then((function(e){return e.json()}))},create:function(e){return fetch(On,{method:"POST",headers:F,body:JSON.stringify(e),credentials:"include"}).then(P)},update:function(e){return fetch("".concat(On,"/").concat(e.id),{method:"PUT",headers:F,body:JSON.stringify(e),credentials:"include"}).then(P)},remove:function(e){return fetch("".concat(On,"/").concat(e.id),{method:"DELETE",headers:F,credentials:"include"}).then(P)},validate:function(e){return fetch("".concat(On,"/validate"),{method:"POST",headers:F,credentials:"include",body:JSON.stringify(e)}).then(P)},fetchAccess:function(e){return fetch("".concat(On,"/").concat(e,"/users"),{credentials:"include"}).then(P).then((function(e){return e.json()}))},addUserToRole:function(e,t,n){return fetch("".concat(On,"/").concat(e,"/users/").concat(n,"/roles/").concat(t),{method:"POST",headers:F,credentials:"include"}).then(P)},removeUserFromRole:function(e,t,n){return fetch("".concat(On,"/").concat(e,"/users/").concat(n,"/roles/").concat(t),{method:"DELETE",headers:F,credentials:"include"}).then(P)},searchProjectUser:function(e){return fetch("".concat(C("api/admin/user-admin/search"),"?q=").concat(e)).then((function(e){return e.json()}))}},vn="RECEIVE_PROJECT",yn="REMOVE_PROJECT",_n="ERROR_REMOVING_PROJECT",wn="ADD_PROJECT",Cn="ERROR_ADD_PROJECT",Tn="UPDATE_PROJECT",Sn="ERROR_UPDATE_PROJECT",En=function(e){return{type:vn,value:e}};function kn(){return function(e){return xn.fetchAll().then((function(t){e(En(t.projects))})).catch(z(e,"ERROR_RECEIVE_PROJECT"))}}function Nn(e){return function(t){return xn.remove(e).then((function(){return t(function(e){return{type:yn,project:e}}(e))})).catch(z(t,_n))}}function An(e){return function(t){return xn.create(e).then((function(){return t(function(e){return{type:wn,project:e}}(e))})).catch(z(t,Cn))}}function Rn(e){return function(t){return xn.update(e).then((function(){return t(function(e){return{type:Tn,project:e}}(e))})).catch(z(t,Sn))}}function In(e){return xn.validate({id:e})}var Dn=C("api/admin/addons");var Ln={fetchAll:function(){return fetch(Dn,{credentials:"include"}).then(P).then((function(e){return e.json()}))},create:function(e){return fetch(Dn,{method:"POST",headers:F,body:JSON.stringify(e),credentials:"include"}).then(P)},update:function(e){return fetch("".concat(Dn,"/").concat(e.id),{method:"PUT",headers:F,body:JSON.stringify(e),credentials:"include"}).then(P)},remove:function(e){return fetch("".concat(Dn,"/").concat(e.id),{method:"DELETE",headers:F,credentials:"include"}).then(P)}},Pn="RECEIVE_ADDON_CONFIG",Fn="REMOVE_ADDON_CONFIG",Un="ERROR_REMOVING_ADDON_CONFIG",Vn="ADD_ADDON_CONFIG",Gn="ERROR_ADD_ADDON_CONFIG",Bn="UPDATE_ADDON_CONFIG",Mn="ERROR_UPDATE_ADDON_CONFIG";function Hn(){return function(e){return Ln.fetchAll().then(function(e,t){return function(n){return e({type:t,value:n})}}(e,Pn)).catch(z(e,"ERROR_RECEIVE_ADDON_CONFIG"))}}function zn(e){return function(t){return Ln.remove(e).then((function(){return t({type:Fn,value:e})})).catch(z(t,Un))}}function Jn(e){return function(t){return Ln.create(e).then((function(e){return e.json()})).then((function(e){return t(function(e){return{type:Vn,value:e}}(e))})).catch(z(t,Gn))}}function Yn(e){return function(t){return Ln.update(e).then((function(){return t({type:Bn,value:e})})).catch(z(t,Mn))}}var Wn="RECEIVE_ALL_APPLICATIONS",qn="ERROR_RECEIVE_ALL_APPLICATIONS",Zn="RECEIVE_APPLICATION",Kn="UPDATE_APPLICATION_FIELD",Xn="DELETE_APPLICATION";function Qn(){return function(e){return vt.fetchAll().then((function(t){return e(function(e){return{type:Wn,value:e}}(t))})).catch(z(e,qn))}}var $n=n(72)("unleash:error-store");function ea(){return new O.b({list:new O.a})}function ta(e,t){return $n("Got error",t),e.get("list").indexOf(t)<0?e.update("list",(function(e){return e.push(t)})):e}var na=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ea(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ne:case re:case te:case ae:case Nt:case kt:case Et:case dn:case hn:case _n:case Sn:case Gn:case Mn:case Un:case Cn:return ta(e,t.error.message);case H:return ta(e,t.error.message||"403 Forbidden");case J:return e.update("list",(function(e){return e.remove(e.indexOf(t.error))}));case Z:case ie:case Kn:case At:return ta(e,t.info);default:return e}},aa="UPDATE_SETTING",ra=function(e){return function(t,n){return function(e,t,n){return{type:aa,group:e,field:t,value:n}}(e,t,n)}},ia=window.localStorage||{setItem:function(){},getItem:function(){}},ca=w(),oa="".concat(ca,":settings"),sa=Object(O.c)({location:{}});function la(){try{var e=JSON.parse(ia.getItem(oa));return e?sa.merge(e):sa}catch(t){return sa}}function ua(e,t){var n=e.updateIn([t.group,t.field],(function(){return t.value}));return ia.setItem(oa,JSON.stringify(n.toJSON())),n}var da=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:la(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case aa:return ua(e,t);case me:case ge:return la();default:return e}},ja=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new O.b({permissions:[]}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case fe:return e=e.set("profile",t.value.user).set("permissions",t.value.permissions||[]).set("feedback",t.value.feedback||[]).set("showDialog",!1).set("authDetails",void 0);case M:return e=e.set("authDetails",t.error.body).set("showDialog",!0);case me:return new O.b({permissions:[]});default:return e}};function ha(){return Object(O.c)({list:[],apps:{}})}var ba=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ha(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Zn:return e.setIn(["apps",t.value.appName],new O.b(t.value));case Wn:return e.set("list",new O.a(t.value.applications));case Kn:return e.setIn(["apps",t.appName,t.key],t.value);case Xn:var n=e.get("list").findIndex((function(e){return e.appName===t.appName})),a=e.removeIn(["list",n]);return a.removeIn(["apps",t.appName]);case me:case ge:return ha();default:return e}};C("api/admin/ui-config");var pa="RECEIVE_CONFIG",fa=function(e){return{type:pa,value:e}};var ma=window.localStorage||{setItem:function(){},getItem:function(){}},ga=w(),Oa="".concat(ga,":ui_config"),xa=new O.b({headerBackground:void 0,name:"Unleash",version:"3.x",environment:"",slogan:"The enterprise ready feature toggle service.",flags:{},links:[{value:"Documentation",icon:"library_books",href:"https://docs.getunleash.io/docs?source=oss",title:"User documentation"},{value:"GitHub",icon:"c_github",href:"https://github.com/Unleash",title:"Source code on GitHub"}]});function va(){try{var e=JSON.parse(ma.getItem(Oa));return e?xa.merge(e):xa}catch(t){return xa}}function ya(e,t){return ma.setItem(Oa,JSON.stringify(t)),e.merge(t)}var _a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:va(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pa:return ya(e,t.value);default:return e}},wa=[{name:"environment",initial:!0},{name:"userId",initial:!0},{name:"appName",initial:!0}];function Ca(){return new O.a(wa)}var Ta=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ca(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case sn:return new O.a(t.value);case ln:var n=e.findIndex((function(e){return e.name===t.context.name}));return e.remove(n);case un:return e.push(t.context);case jn:var a=e.findIndex((function(e){return e.name===t.context.name}));return e.set(a,t.context);case me:case ge:return Ca();default:return e}},Sa=[{id:"default",name:"Default",initial:!0}];function Ea(){return new O.a(Sa)}var ka=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ea(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case vn:return new O.a(t.value);case yn:var n=e.findIndex((function(e){return e.id===t.project.id}));return e.remove(n);case wn:return e.push(t.project);case Tn:var a=e.findIndex((function(e){return e.id===t.project.id}));return e.set(a,t.project);case me:case ge:return Ea();default:return e}};function Na(){return new O.b({providers:new O.a,addons:new O.a})}var Aa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Na(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Pn:return Object(O.c)(t.value);case Vn:return e.update("addons",(function(e){return e.push(Object(O.c)(t.value))}));case Fn:return e.update("addons",(function(e){return e.filter((function(e){return e.get("id")!==t.value.id}))}));case Bn:var n=e.get("addons").findIndex((function(e){return e.get("id")===t.value.id}));return e.setIn(["addons",n],Object(O.c)(t.value));case me:case ge:return Na();default:return e}},Ra=C("api/admin/api-tokens");var Ia={fetchAll:function(){return fetch(Ra,{headers:F,credentials:"include"}).then(P).then((function(e){return e.json()}))},create:function(e){return fetch(Ra,{method:"POST",headers:F,body:JSON.stringify(e),credentials:"include"}).then(P).then((function(e){return e.json()}))},remove:function(e){return fetch("".concat(Ra,"/").concat(e),{method:"DELETE",headers:F,credentials:"include"}).then(P)}},Da="RECIEVE_KEYS",La="REMOVE_KEY",Pa="ADD_KEY",Fa=n(72)("unleash:e-api-admin-actions");var Ua=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new O.a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Da:return new O.a(t.tokens);case Pa:return e.push(t.token);case La:return e.filter((function(e){return e.secret!==t.secret}));default:return e}},Va=C("api/admin/auth/google/settings"),Ga=C("api/admin/auth/saml/settings"),Ba=C("api/admin/auth/oidc/settings");var Ma={getGoogleConfig:function(){return fetch(Va,{headers:F,credentials:"include"}).then(P).then((function(e){return e.json()}))},updateGoogleConfig:function(e){return fetch(Va,{method:"POST",headers:F,body:JSON.stringify(e),credentials:"include"}).then(P).then((function(e){return e.json()}))},getSamlConfig:function(){return fetch(Ga,{headers:F,credentials:"include"}).then(P).then((function(e){return e.json()}))},updateSamlConfig:function(e){return fetch(Ga,{method:"POST",headers:F,body:JSON.stringify(e),credentials:"include"}).then(P).then((function(e){return e.json()}))},getOidcConfig:function(){return fetch(Ba,{headers:F,credentials:"include"}).then(P).then((function(e){return e.json()}))},updateOidcConfig:function(e){return fetch(Ba,{method:"POST",headers:F,body:JSON.stringify(e),credentials:"include"}).then(P).then((function(e){return e.json()}))}},Ha="RECIEVE_GOOGLE_CONFIG",za="UPDATE_GOOGLE_AUTH",Ja="RECIEVE_SAML_CONFIG",Ya="UPDATE_SAML_AUTH",Wa="RECIEVE_OIDC_CONFIG",qa="UPDATE_OIDC_AUTH",Za=n(72)("unleash:e-admin-auth-actions");var Ka=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new O.b({google:{},saml:{},oidc:{}}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case za:case Ha:return e.set("google",t.config);case Ya:case Ja:return e.set("saml",t.config);case qa:case Wa:return e.set("oidc",t.config);default:return e}},Xa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{fetchTogglesState:{loading:!1,success:!1,error:null,count:0}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return e.fetchTogglesState.count>0?e:Object(x.a)(Object(x.a)({},e),{},{fetchTogglesState:Object(x.a)(Object(x.a)({},e.fetchTogglesState),{},{loading:!0,success:!1,error:null})});case $:return Object(x.a)(Object(x.a)({},e),{},{fetchTogglesState:Object(x.a)(Object(x.a)({},e.fetchTogglesState),{},{loading:!1,success:!0,error:null,count:e.fetchTogglesState.count+=1})});case ce:return Object(x.a)(Object(x.a)({},e),{},{fetchTogglesState:Object(x.a)(Object(x.a)({},e.fetchTogglesState),{},{loading:!1,success:!1,error:!0})});case oe:return Object(x.a)(Object(x.a)({},e),{},{fetchTogglesState:Object(x.a)(Object(x.a)({},e.fetchTogglesState),{},{count:0})});default:return e}},Qa=C("api/admin/invoices");var $a={fetchAll:function(){return fetch(Qa,{headers:F,credentials:"include"}).then(P).then((function(e){return e.json()}))}},er="RECEIVE_INVOICES",tr=n(72)("unleash:e-admin-invoice-actions");var nr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new O.a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case er:return new O.a(t.invoices);default:return e}},ar="SHOW_FEEDBACK",rr="HIDE_FEEDBACK",ir=function(e){return function(){return e({type:ar})}},cr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ar:return Object(x.a)(Object(x.a)({},e),{},{show:!0});case rr:return Object(x.a)(Object(x.a)({},e),{},{show:!1});default:return e}},or=Object(h.c)({features:Te,featureTypes:Ie,featureMetrics:Be,strategies:Mt,tagTypes:st,tags:mt,featureTags:Ke,history:Zt,archive:rn,error:na,settings:da,user:ja,applications:ba,uiConfig:_a,context:Ta,projects:ka,addons:Aa,apiAdmin:Ua,authAdmin:Ka,apiCalls:Xa,invoiceAdmin:nr,feedback:cr}),sr=n(25),lr=function(){function e(t){Object(S.a)(this,e),this.store=t,this.timer=void 0}return Object(sr.a)(e,[{key:"start",value:function(){var e=this;this.store.subscribe((function(){var t=e.store.getState().features;!e.timer&&t.size>0&&(e.timer=setInterval(e.fetchMetrics.bind(e),5e3),e.fetchMetrics())}))}},{key:"fetchMetrics",value:function(){this.store.dispatch(Ge())}},{key:"destroy",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=void 0)}}]),e}(),ur=n(33),dr=n(0),jr=function(e){var t=e.component,n=e.unauthorized,a=e.renderProps,r=void 0===a?{}:a,i=Object(ur.a)(e,["component","unauthorized","renderProps"]);return Object(dr.jsx)(s.b,Object(x.a)(Object(x.a)({},i),{},{render:function(e){return n?Object(dr.jsx)(s.a,{to:"/login"}):Object(dr.jsx)(t,Object(x.a)(Object(x.a)({},e),r))}}))},hr=function(e){var t=e.condition,n=e.show,a=e.elseShow,r=function(e){var t=e();return t||(console.warn("Nothing was returned from your render function. Verify that you are returning a valid react component"),null)},i=function(e){return"function"===typeof e};return t?i(n)?r(n):n:!t&&a?i(a)?r(a):a:null},br=hr,pr=n(15),fr=n.n(pr),mr=n(268),gr=n(324),Or=n(68),xr=n.n(Or),vr=n(355),yr=n(261),_r=n(302),wr=function(e){var t=e.errors,n=e.muteError,a=t.length>0,i=a?t[0]:void 0;return Object(dr.jsx)(vr.a,{action:Object(dr.jsx)(r.a.Fragment,{children:Object(dr.jsx)(yr.a,{size:"small","aria-label":"close",color:"inherit",children:Object(dr.jsx)(_r.a,{children:"close"})})}),open:a,onClose:function(){return n(i)},autoHideDuration:1e4,message:Object(dr.jsxs)("div",{children:[Object(dr.jsx)(_r.a,{children:"question_answer"}),i]},i)})},Cr={muteError:function(e){return{type:J,error:e}}},Tr=Object(l.b)((function(e){return{errors:e.error.get("list").toArray().reverse()}}),Cr)(wr),Sr=n(6),Er=n(334),kr=n(39),Nr=n(341),Ar=n(342),Rr=n(53),Ir=n(309),Dr=n(363),Lr=n(340),Pr=n(307),Fr=n(47),Ur=n.n(Fr),Vr=n(360),Gr=n(316),Br=n(323),Mr=n(303),Hr=n(304),zr=n(356),Jr=n(348),Yr=function(e){var t=e.name,n=e.value,a=e.label,r=e.options,i=e.onChange,c=e.id,o=e.disabled,s=void 0!==o&&o,l=e.className,u=e.classes,d=Object(ur.a)(e,["name","value","label","options","onChange","id","disabled","className","classes"]);return Object(dr.jsxs)(Hr.a,{variant:"outlined",size:"small",classes:u,children:[Object(dr.jsx)(zr.a,{htmlFor:c,id:c,children:a}),Object(dr.jsx)(Jr.a,Object(x.a)(Object(x.a)({name:t,disabled:s,onChange:i,className:l,label:a,id:c,size:"small",value:n},d),{},{children:r.map((function(e){return Object(dr.jsx)(Mr.a,{value:e.key,title:e.title,children:e.label},e.key)}))}))]})},Wr=function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(sr.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchFeatureTypes,n=e.types;n&&n[0].initial&&t&&this.props.fetchFeatureTypes()}},{key:"render",value:function(){var e=this.props,t=e.editable,n=e.value,a=e.types,r=e.onChange,i=e.label,c=e.id,o=(e.fetchFeatureTypes,Object(ur.a)(e,["editable","value","types","onChange","label","id","fetchFeatureTypes"])),s=a.map((function(e){return{key:e.id,label:e.name,title:e.description}}));return s.find((function(e){return e.key===n}))||s.push({key:n,label:n}),Object(dr.jsx)(Yr,Object(x.a)({disabled:!t,options:s,value:n,onChange:r,label:i,id:c},o))}}]),n}(a.Component),qr=Object(l.b)((function(e){return{types:e.featureTypes.toJS()}}),{fetchFeatureTypes:function(){return function(e){return Ee.fetchAll().then((function(t){return e(Ne(t.types))})).catch(z(e,"ERROR_RECEIVE_FEATURE_TYPES"))}}})(Wr),Zr=function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(sr.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchProjects,n=e.projects,a=e.enabled;n[0].initial&&a&&t()}},{key:"render",value:function(){var e=this.props,t=e.value,n=e.projects,a=e.onChange,r=e.enabled,i=e.filter;if(!r)return null;var c,o=function(e){return{key:e.id,label:e.name,title:e.description}};return c=i?n.filter((function(e){return i(e)})).map(o):n.map(o),t&&!c.find((function(e){return e.key===t}))&&c.push({key:t,label:t}),Object(dr.jsx)(Yr,{label:"Project",options:c,value:t,onChange:a})}}]),n}(a.Component),Kr=Object(l.b)((function(e){return{projects:e.projects.toJS(),enabled:!!e.uiConfig.toJS().flags.P}}),{fetchProjects:kn})(Zr),Xr=n(29),Qr=n(69),$r=n.n(Qr),ei=n(170),ti=n.n(ei),ni=n(314),ai=n(350),ri=Object(mr.a)((function(e){return{headerTitleContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative"},headerTitle:{fontSize:e.fontSizes.mainHeader,fontWeight:500},headerActions:{position:"absolute",right:0}}})),ii=function(e){var t=e.title,n=e.actions,a=e.subtitle,r=e.variant,i=e.loading,c=ri(),o=fr()({skeleton:i});return Object(dr.jsxs)("div",{className:c.headerTitleContainer,children:[Object(dr.jsxs)("div",{className:o,children:[Object(dr.jsx)(Rr.a,{variant:r||"h2",className:c.headerTitle,children:t}),a&&Object(dr.jsx)("small",{children:a})]}),Object(dr.jsx)(hr,{condition:n,show:Object(dr.jsx)("div",{className:c.headerActions,children:n})})]})},ci="fix",oi="variable",si=n(122),li=n.n(si),ui={day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"},di={day:"2-digit",month:"2-digit",year:"numeric"},ji=function(e,t,n){return n&&(ui.timeZone=n),new Date(e).toLocaleString(t,ui)},hi=function(e,t,n){return n&&(ui.timeZone=n),new Date(e).toLocaleString(t,di)},bi=function(e){return e&&e.trim?e.trim():e};function pi(e,t){var n=e.reduce((function(e,t){var n=e.remainingPercentage,a=e.variableVariantCount;return t.weight&&t.weightType===ci?n-=Number(t.weight):a+=1,{remainingPercentage:n,variableVariantCount:a}}),{remainingPercentage:t,variableVariantCount:0}),a=n.remainingPercentage,r=n.variableVariantCount;if(a<0)throw new Error("The traffic distribution total must equal 100%");if(!r)throw new Error("There must be atleast one variable variant");var i=parseInt(a/r);return e.map((function(e){return e.weightType!==ci&&(e.weight=i),e}))}function fi(){var e="";try{var t=document.location.hash.match(/name=([a-z0-9-_.]+)/i);e=Object(Sr.a)(t,2)[1]}catch(n){}return e}var mi,gi,Oi,xi,vi={overlay:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:5},content:{width:"500px",maxWidth:"90%",margin:"0",top:"50%",left:"50%",right:"auto",bottom:"auto",transform:"translate(-50%, -50%)"}},yi=function(e){if(e&&e.feedback){if(e.feedback.length>0){var t=e.feedback.find((function(e){return"pnps"===e.feedbackId}));if(!t)return!1;if(t.neverShow)return!1;if(t.given){var n=new Date;return li()(n,new Date(t.given))>182}return!1}return!0}},_i=n(70),wi=n.n(_i),Ci=n(351),Ti=n(352),Si=n(171),Ei=n.n(Si),ki=n(310),Ni=n(311),Ai=n(11),Ri=Object(mr.a)((function(e){var t;return{strategyCard:(t={width:"337px",height:"100%"},Object(Ai.a)(t,e.breakpoints.down("xs"),{width:"100%"}),Object(Ai.a)(t,e.breakpoints.down("1250"),{width:"300px"}),Object(Ai.a)(t,e.breakpoints.down("1035"),{width:"280px"}),Object(Ai.a)(t,e.breakpoints.down("860"),{width:"380px"}),t)}})),Ii=Object(mr.a)((function(e){return{percentageContainer:{display:"flex",justifyContent:"space-between"},percentage:{fontWeight:"bold"}}})),Di=function(e){var t=e.percentage,n=Ii();return Object(dr.jsxs)("div",{className:n.percentageContainer,children:[Object(dr.jsx)(Rr.a,{className:n.title,variant:"body1",children:"Rolled out to"}),Object(dr.jsxs)(Rr.a,{variant:"body1",className:n.percentage,children:[t||0,"%"]})]})},Li=Object(mr.a)((function(e){return{constraints:{marginTop:"1rem"},constraintContainer:{backgroundColor:e.palette.cards.container.bg,margin:"0.5rem 0",borderRadius:e.borders.radius.main,padding:"0.8rem",display:"flex",alignItems:"center",flexWrap:"wrap","& span":{marginRight:"0.4rem",fontSize:"0.9rem"}},placeholderText:{marginTop:"0.25rem"},link:{display:"block",marginTop:"0.2rem"}}})),Pi=function(e){var t=e.constraints,n=void 0===t?[]:t,a=e.flags,r=Li(),i=function(e){var t=e.values.length>1;return e.values.map((function(n,a){var r=a!==e.values.length-1;return Object(dr.jsx)(hr,{condition:t&&r,show:Object(dr.jsxs)("span",{children:["'",n,"',"]}),elseShow:Object(dr.jsxs)("span",{children:["'",n,"'"]})},n)}))};return Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(Rr.a,{className:r.title,variant:"subtitle1",children:"Constraints"}),Object(dr.jsx)(hr,{condition:n&&n.length>0,show:Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(Rr.a,{variant:"body2",children:"The following pre-conditions must be fulfilled for this strategy to be executed"}),Object(dr.jsx)("div",{className:r.constraints,children:n.map((function(e,t){return Object(dr.jsxs)("div",{children:[Object(dr.jsx)(hr,{condition:t>0,show:Object(dr.jsx)("span",{children:"and"})}),Object(dr.jsxs)("pre",{className:fr()(r.constraintContainer),children:[Object(dr.jsx)("span",{children:e.contextName}),Object(dr.jsx)("span",{children:e.operator}),i(e)]},"".concat(e.contextName,"-").concat(t))]},"".concat(e.contextName,"-").concat(e.operator,"-").concat(t))}))})]}),elseShow:Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(Rr.a,{variant:"body2",children:"No pre-conditions defined for this strategy."}),Object(dr.jsx)(hr,{condition:!!a&&!!a.C,show:Object(dr.jsxs)(Rr.a,{variant:"body2",className:r.placeholderText,children:["Constraints allow you fine grained control over how to execute your strategies.",Object(dr.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:r.link,href:"https://docs.getunleash.io/docs/advanced/strategy_constraints",children:"Learn more"})]}),elseShow:Object(dr.jsxs)(Rr.a,{variant:"body2",className:r.placeholderText,children:["Constraints are only available as an enterprise feature."," ",Object(dr.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:r.link,href:"https://docs.getunleash.io/docs/advanced/strategy_constraints",children:"Learn more"})]})})]})})]})},Fi=Object(l.b)((function(e,t){return{flags:e.uiConfig.toJS().flags,constraints:t.constraints}}))(Pi),Ui=Object(mr.a)((function(e){return{fieldContainer:{display:"flex",justifyContent:"space-between",margin:"0.4rem 0"},fieldValue:{maxWidth:"50%"}}})),Vi=function(e){var t=e.title,n=e.value,a=Ui();return Object(dr.jsxs)("div",{className:a.fieldContainer,children:[Object(dr.jsx)(Rr.a,{variant:"body1",children:t}),Object(dr.jsx)(Rr.a,{className:a.fieldValue,variant:"body1",children:n})]})},Gi=Object(mr.a)((function(e){return{contentSpacingY:{"& > *":{margin:"0.5rem 0"}},contentSpacingYLarge:{"& > *":{margin:"1.5rem 0"}},contentSpacingX:{"& > *":{margin:"0 0.8rem"}},divider:{margin:"1rem 0",backgroundColor:e.palette.division.main,height:"3px",width:"100%"},largeDivider:{margin:"2rem 0",backgroundColor:e.palette.division.main,height:"3px",width:"100%"},bold:{fontWeight:"bold"},flexRow:{display:"flex",alignItems:"center"},flexColumn:{display:"flex",flexDirection:"column"},itemsCenter:{alignItems:"center"},justifyCenter:{justifyContent:"center"},flexWrap:{flexWrap:"wrap"},textCenter:{textAlign:"center"},fullWidth:{width:"100%"},fullHeight:{height:"100%"},title:{fontSize:e.fontSizes.mainHeader,fontWeight:"bold",marginBottom:"0.5rem"}}})),Bi=function(e){var t=e.strategy,n=Gi(),a=t.parameters.rollout,r=t.parameters.stickiness,i=t.parameters.groupId,c=t.constraints;return Object(dr.jsxs)("div",{children:[Object(dr.jsx)(Fi,{constraints:c}),Object(dr.jsx)("div",{className:n.divider}),Object(dr.jsx)(Di,{percentage:a}),Object(dr.jsx)("div",{className:n.divider}),Object(dr.jsx)(Vi,{title:"Sticky on",value:r}),Object(dr.jsx)(Vi,{title:"Group id",value:i})]})},Mi=function(e){var t=e.strategy,n=Gi(),a=t.parameters.percentage,r=t.constraints;return Object(dr.jsxs)("div",{children:[Object(dr.jsx)(Fi,{constraints:r}),Object(dr.jsx)("div",{className:n.divider}),Object(dr.jsx)(Di,{percentage:a})]})},Hi=n(358),zi=Object(mr.a)((function(e){return{strategyList:{marginBottom:"0.5rem"},strategyListChip:{margin:"0.25rem"},strategyListHeader:{marginBottom:"0.5rem"}}})),Ji=function(e){var t=e.list,n=e.valuesName,a=zi();return Object(dr.jsxs)("div",{className:a.strategyList,children:[Object(dr.jsxs)(Rr.a,{className:a.strategyListHeader,children:["List of ",n]}),t.map((function(e){return Object(dr.jsx)(Hi.a,{label:e,className:a.strategyListChip},e)}))]})},Yi=function(e){var t=e.strategy,n=e.parameter,a=e.valuesName,r=Gi(),i=t.parameters,c=t.constraints,o=i[n].split(",").filter((function(e){return e}));return Object(dr.jsxs)("div",{children:[Object(dr.jsx)(Fi,{constraints:c}),Object(dr.jsx)(br,{condition:o.length>0,show:Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)("div",{className:r.divider}),Object(dr.jsx)(Ji,{list:o,valuesName:a})]})})]})},Wi=function(e){var t=e.strategy,n=Gi(),a=t.parameters.percentage,r=t.parameters.groupId,i=t.constraints;return Object(dr.jsxs)("div",{children:[Object(dr.jsx)(Fi,{constraints:i}),Object(dr.jsx)("div",{className:n.divider}),Object(dr.jsx)(Di,{percentage:a}),Object(dr.jsx)("div",{className:n.divider}),Object(dr.jsx)(Vi,{title:"Group id",value:r})]})},qi=function(e){var t=e.strategy,n=e.strategyDefinition,a=Gi();if(!n)return Object(dr.jsxs)(Rr.a,{className:a.textCenter,children:['The strategy definition "',t.name,'" does not exist.'," ",Object(dr.jsxs)(o.b,{to:"/strategies/create?name=".concat(t.name),children:["Create a strategy named ",t.name]})]});if("Loading"===n.name)return null;var r=t.constraints,i=function(e){var n,r=(n=e.name,t.parameters[n]);switch(e.type){case"percentage":return Object(dr.jsxs)("div",{children:[Object(dr.jsx)(Di,{percentage:r}),Object(dr.jsx)("div",{className:a.divider})]},e.name);case"list":var i=r?r.split(",").filter((function(e){return e})):[];return Object(dr.jsx)(br,{condition:i.length>0,show:Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(Ji,{list:i,valuesName:e.name}),Object(dr.jsx)("div",{className:a.divider})]})},e.name);case"number":case"boolean":case"string":return Object(dr.jsx)(br,{condition:r||!1===r,show:Object(dr.jsx)(Vi,{title:e.name,value:r})},e.name);default:return null}};return Object(dr.jsxs)("div",{children:[Object(dr.jsx)(Fi,{constraints:r}),n.parameters.map((function(e){return i(e)}))]})},Zi=function(e){var t=e.strategy,n=Gi(),a=t.constraints;return Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(Fi,{constraints:a}),Object(dr.jsx)("div",{className:n.divider}),Object(dr.jsx)(Rr.a,{className:n.textCenter,children:"The default strategy is on for all users."})]})},Ki=function(e){var t=e.strategy,n=e.strategyDefinition;return function(){switch(t.name){case"default":return Object(dr.jsx)(Zi,{strategy:t});case"flexibleRollout":return Object(dr.jsx)(Bi,{strategy:t});case"userWithId":return Object(dr.jsx)(Yi,{parameter:"userIds",valuesName:"userIds",strategy:t});case"gradualRolloutRandom":return Object(dr.jsx)(Mi,{strategy:t});case"remoteAddress":return Object(dr.jsx)(Yi,{parameter:"IPs",valuesName:"IPs",strategy:t});case"applicationHostname":return Object(dr.jsx)(Yi,{parameter:"hostNames",valuesName:"hostnames",strategy:t});case"gradualRolloutUserId":case"gradualRolloutSessionId":return Object(dr.jsx)(Wi,{strategy:t});default:return Object(dr.jsx)(qi,{strategy:t,strategyDefinition:n})}}()},Xi=n(308),Qi=Object(mr.a)((function(e){return{strategyCardHeaderContent:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},strategyCardHeader:{display:"flex",background:"linear-gradient(".concat(e.palette.cards.gradient.top,", ").concat(e.palette.cards.gradient.bottom,")"),color:"#fff",textAlign:"left"},strategyCardHeaderTitle:{fontSize:e.fontSizes.subHeader},strategyCardHeaderActions:{display:"flex",color:"#fff"},strateyCardHeaderIcon:{color:"#fff"}}}));function $i(){return($i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ec(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function tc(e,t){var n=e.title,r=e.titleId,i=ec(e,["title","titleId"]);return a.createElement("svg",$i({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,mi||(mi=a.createElement("path",{d:"M9.64645 19.3536C9.84171 19.5488 10.1583 19.5488 10.3536 19.3536L13.5355 16.1716C13.7308 15.9763 13.7308 15.6597 13.5355 15.4645C13.3403 15.2692 13.0237 15.2692 12.8284 15.4645L10 18.2929L7.17157 15.4645C6.97631 15.2692 6.65973 15.2692 6.46447 15.4645C6.2692 15.6597 6.2692 15.9763 6.46447 16.1716L9.64645 19.3536ZM9.5 1L9.5 19L10.5 19L10.5 1L9.5 1Z",fill:"white"})),gi||(gi=a.createElement("path",{d:"M19.3536 10.3536C19.5488 10.1583 19.5488 9.84171 19.3536 9.64645L16.1716 6.46447C15.9763 6.2692 15.6597 6.2692 15.4645 6.46447C15.2692 6.65973 15.2692 6.97631 15.4645 7.17157L18.2929 10L15.4645 12.8284C15.2692 13.0237 15.2692 13.3403 15.4645 13.5355C15.6597 13.7308 15.9763 13.7308 16.1716 13.5355L19.3536 10.3536ZM1 10.5L19 10.5V9.5L1 9.5V10.5Z",fill:"white"})),Oi||(Oi=a.createElement("path",{d:"M0.646446 9.64645C0.451185 9.84171 0.451185 10.1583 0.646446 10.3536L3.82843 13.5355C4.02369 13.7308 4.34027 13.7308 4.53553 13.5355C4.7308 13.3403 4.7308 13.0237 4.53553 12.8284L1.70711 10L4.53553 7.17157C4.7308 6.97631 4.7308 6.65973 4.53553 6.46446C4.34027 6.2692 4.02369 6.2692 3.82843 6.46446L0.646446 9.64645ZM19 9.5L1 9.5L1 10.5L19 10.5L19 9.5Z",fill:"white"})),xi||(xi=a.createElement("path",{d:"M10.3536 0.646446C10.1583 0.451185 9.84171 0.451185 9.64645 0.646446L6.46447 3.82843C6.2692 4.02369 6.2692 4.34027 6.46447 4.53553C6.65973 4.7308 6.97631 4.7308 7.17157 4.53553L10 1.70711L12.8284 4.53553C13.0237 4.7308 13.3403 4.7308 13.5355 4.53553C13.7308 4.34027 13.7308 4.02369 13.5355 3.82843L10.3536 0.646446ZM10.5 19L10.5 1L9.5 1L9.5 19L10.5 19Z",fill:"white"})))}var nc=a.forwardRef(tc),ac=(n.p,function(e){var t=e.name,n=e.connectDragSource,a=e.removeStrategy,r=e.editStrategy,i=e.disableDelete,c=Qi();return Object(dr.jsx)(Xi.a,{classes:{root:c.strategyCardHeader,content:c.strategyCardHeaderContent},title:Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(Rr.a,{variant:"subtitle1",className:c.strategyCardHeaderTitle,children:t}),Object(dr.jsxs)("div",{className:c.strategyCardHeaderActions,children:[Object(dr.jsx)(Ir.a,{title:"Edit strategy",children:Object(dr.jsx)(yr.a,{onClick:r,children:Object(dr.jsx)(_r.a,{className:c.strateyCardHeaderIcon,children:"edit"})})}),n(Object(dr.jsx)("span",{children:Object(dr.jsx)(Ir.a,{title:"Drag and drop strategy to reorder. This only affects the order of which your strategies are evaluated.",children:Object(dr.jsx)(yr.a,{children:Object(dr.jsx)(nc,{})})})})),Object(dr.jsx)(hr,{condition:i,show:Object(dr.jsx)(Ir.a,{title:"One strategy must always be applied. You can not delete this strategy.",children:Object(dr.jsx)("span",{children:Object(dr.jsx)(yr.a,{onClick:a,disabled:i,children:Object(dr.jsx)(_r.a,{className:c.strateyCardHeaderIcon,children:"delete"})})})}),elseShow:Object(dr.jsx)(Ir.a,{title:"Delete strategy",children:Object(dr.jsx)(yr.a,{onClick:a,children:Object(dr.jsx)(_r.a,{className:c.strateyCardHeaderIcon,children:"delete"})})})})]})]}),disableTypography:!0})}),rc={applicationHostname:{name:"Hosts",description:"Enable the feature for a specific set of hostnames"},default:{name:"Standard",description:"The standard strategy is strictly on / off for your entire userbase."},flexibleRollout:{name:"Gradual rollout",description:"Roll out to a percentage of your userbase, and ensure that the experience is the same for the user on each visit."},gradualRolloutRandom:{name:"Randomized",description:"Roll out to a percentage of your userbase and randomly enable the feature on a per request basis"},gradualRolloutSessionId:{name:"Sessions",description:"Roll out to a percentage of your userbase and configure stickiness based on sessionId"},gradualRolloutUserId:{name:"Users",description:"Roll out to a percentage of your userbase and configure stickiness based on userId"},remoteAddress:{name:"IPs",description:"Enable the feature for a specific set of IP addresses"},userWithId:{name:"UserIDs",description:"Enable the feature for a specific set of userIds"}},ic=function(e){var t=rc[e];return t?t.name:e},cc=function(e){var t=e.strategy,n=e.strategyDefinition,a=e.connectDragPreview,r=e.connectDragSource,i=e.removeStrategy,c=e.disableDelete,o=e.editStrategy,s=e.connectDropTarget,l=Ri();return a(s(Object(dr.jsx)("span",{style:{alignItems:"stretch"},children:Object(dr.jsxs)(ki.a,{className:l.strategyCard,children:[Object(dr.jsx)(ac,{name:ic(t.name),connectDragSource:r,removeStrategy:i,editStrategy:o,disableDelete:c}),Object(dr.jsx)(Ni.a,{children:Object(dr.jsx)(Ki,{strategy:t,strategyDefinition:n})})]})})))};var oc="strategy",sc=Ei()(Object(Ci.a)(oc,{beginDrag:function(e){return{id:e.id,index:e.index}},endDrag:function(e,t){if(t.didDrop()){var n=t.getDropResult();"number"===typeof n.index&&e.index!==n.index&&e.moveStrategy(e.index,n.index)}}},(function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}})),Object(Ti.a)(oc,{drop:function(e){return{index:e.index}}},(function(e,t){return{highlighted:t.canDrop(),hovered:t.isOver(),connectDropTarget:e.dropTarget()}})))(cc),lc=n(317),uc=n(318),dc=n(319),jc=n(320),hc=n(7),bc=n(313),pc=n(359),fc=Object(hc.a)({root:{height:8},thumb:{height:24,width:24,backgroundColor:"#fff",border:"2px solid currentColor",marginTop:-8,marginLeft:-12,"&:focus, &:hover, &$active":{boxShadow:"inherit"}},active:{},valueLabel:{left:"calc(-50% + 4px)"},track:{height:8,borderRadius:4},rail:{height:8,borderRadius:4}})(pc.a),mc=Object(bc.a)((function(e){return{slider:{width:450,maxWidth:"100%"},margin:{height:e.spacing(3)}}})),gc=[{value:0,label:"0%"},{value:25,label:"25%"},{value:50,label:"50%"},{value:75,label:"75%"},{value:100,label:"100%"}],Oc=function(e){var t=e.name,n=e.value,a=e.onChange,r=e.disabled,i=void 0!==r&&r,c=mc();return Object(dr.jsxs)("div",{className:c.slider,children:[Object(dr.jsx)(Rr.a,{id:"discrete-slider-always",variant:"subtitle2",gutterBottom:!0,children:t}),Object(dr.jsx)("br",{}),Object(dr.jsx)(fc,{min:0,max:100,value:n,getAriaValueText:function(e){return"".concat(e,"%")},"aria-labelledby":"discrete-slider-always",step:1,marks:gc,onChange:a,valueLabelDisplay:"on",disabled:i})]})},xc=[{key:"default",label:"default"},{key:"userId",label:"userId"},{key:"sessionId",label:"sessionId"},{key:"random",label:"random"}],vc=function(e){var t=e.updateParameter,n=e.parameters,a=e.context,r=function(e){return function(n,a){t(e,a)}},i=xc.concat(a.filter((function(e){return e.stickiness})).filter((function(e){return!xc.find((function(t){return t.key===e.name}))})).map((function(e){return{key:e.name,label:e.name}}))),c=n.rollout,o=n.stickiness,s=n.groupId;return Object(dr.jsxs)("div",{children:[Object(dr.jsx)(Oc,{name:"Rollout",value:1*c,onChange:r("rollout")}),Object(dr.jsx)("br",{}),Object(dr.jsxs)("div",{children:[Object(dr.jsx)(Ir.a,{placement:"right-start",title:"Stickiness defines what parameter should be used to ensure that your users get consistency in features. By default unleash will use the first value present in the context in the order of userId, sessionId and random.",children:Object(dr.jsxs)(Rr.a,{variant:"subtitle2",style:{marginBottom:"0.5rem",display:"flex",alignItems:"center"},children:["Stickiness",Object(dr.jsx)(_r.a,{style:{fontSize:"1rem",color:"gray",marginLeft:"0.2rem"},children:"info"})]})}),Object(dr.jsx)(Yr,{name:"stickiness",label:"Stickiness",options:i,value:o,onChange:function(e){return r("stickiness")(e,e.target.value)}}),"\xa0",Object(dr.jsx)("br",{}),Object(dr.jsx)("br",{}),Object(dr.jsx)(Ir.a,{placement:"right-start",title:"GroupId is used to ensure that different toggles will hash differently for the same user. The groupId defaults to feature toggle name, but you can override it to correlate rollout of multiple feature toggles.",children:Object(dr.jsxs)(Rr.a,{variant:"subtitle2",style:{marginBottom:"0.5rem",display:"flex",alignItems:"center"},children:["GroupId",Object(dr.jsx)(_r.a,{style:{fontSize:"1rem",color:"gray",marginLeft:"0.2rem"},children:"info"})]})}),Object(dr.jsx)(Vr.a,{label:"groupId",size:"small",variant:"outlined",value:s,onChange:function(e){return r("groupId")(e,e.target.value)}})]})]})};function yc(e){var t=e.strategyDefinition;return Object(dr.jsx)("h6",{children:t.description})}var _c=n(12),wc=n.n(_c),Cc=(wc.a.shape({name:wc.a.string,parameters:wc.a.array}).isRequired,wc.a.object.isRequired,wc.a.func.isRequired,wc.a.bool.isRequired,wc.a.array.isRequired,function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(){var e;return Object(S.a)(this,n),(e=t.call(this)).onBlur=function(t){e.setValue(t)},e.onKeyDown=function(t){"Enter"===t.key&&(e.setValue(t),t.preventDefault(),t.stopPropagation())},e.setValue=function(t){t.preventDefault();var n=t.target.value,a=e.props,r=a.name,i=a.list,c=a.setConfig;if(n){var o=n.split(/,\s*/).filter((function(e){return!i.includes(e)}));if(o.length>0)c(r,i.concat(o).filter((function(e){return e})).join(","));e.setState({input:""})}},e.onChange=function(t){e.setState({input:t.currentTarget.value})},e.state={input:""},e}return Object(sr.a)(n,[{key:"onClose",value:function(e){var t=this.props,n=t.name,a=t.list,r=t.setConfig;a[e]=null,r(n,1===a.length?"":a.filter(Boolean).join(","))}},{key:"render",value:function(){var e=this,t=this.props,n=t.name,a=t.list,r=t.disabled;return Object(dr.jsxs)("div",{children:[Object(dr.jsxs)(Rr.a,{variant:"subtitle2",children:["List of ",n]}),Object(dr.jsx)("div",{style:{display:"flex",flexWrap:"wrap",margin:"10px 0"},children:a.map((function(t,n){return Object(dr.jsx)(Hi.a,{label:t,style:{marginRight:"3px",border:"1px solid"},onDelete:r?void 0:function(){return e.onClose(n)},title:"Remove value"},n+t)}))}),Object(dr.jsx)(hr,{condition:!r,show:Object(dr.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(dr.jsx)(Vr.a,{name:"input_field",variant:"outlined",label:"Add items",value:this.state.input,size:"small",placeholder:"",onBlur:this.onBlur,onChange:this.onChange,onKeyDown:this.onKeyDown}),Object(dr.jsx)(ni.a,{onClick:this.setValue,color:"secondary",startIcon:Object(dr.jsx)(_r.a,{children:"add"}),children:"Add"})]})})]})}}]),n}(a.Component));function Tc(e){var t=e.editable,n=e.parameters,a=e.updateParameter,r=n.userIds,i=[];return"string"===typeof r&&(i=r.trim().split(",").filter(Boolean)),Object(dr.jsx)("div",{children:Object(dr.jsx)(Cc,{name:"userIds",list:i,disabled:!t,setConfig:a})})}var Sc=n(315);function Ec(e){var t=this,n=e.parameters,a=e.strategyDefinition,r=e.updateParameter,i=e.editable,c=function(e,t){var n=t.currentTarget.value;t.preventDefault(),r(e,n)},o=function(e,t,n){t.preventDefault(),r(e,n)},s=function(e,t){r(e,"true"===t?"false":"true")};return a.parameters&&a.parameters.length>0?a.parameters.map((function(e){var a=e.name,l=e.type,u=e.description,d=e.required,j=n[a];if("percentage"===l)return(null==j||"string"===typeof j&&""===j)&&(j=0),Object(dr.jsxs)("div",{children:[Object(dr.jsx)("br",{}),Object(dr.jsx)(Oc,{name:a,onChange:o.bind(t,a),value:1*j,minLabel:"off",maxLabel:"on"}),u&&Object(dr.jsx)("p",{className:wi.a.helpText,children:u})]},a);if("list"===l){var h=[];return"string"===typeof j&&(h=j.trim().split(",").filter(Boolean)),Object(dr.jsxs)("div",{children:[Object(dr.jsx)(Cc,{name:a,list:h,disabled:!i,setConfig:r}),u&&Object(dr.jsx)("p",{className:wi.a.helpText,children:u})]},a)}if("number"===l){var b=new RegExp("^\\d+$"),p=j.length>0&&!b.test(j);return Object(dr.jsxs)("div",{className:wi.a.generalSection,children:[Object(dr.jsx)(Vr.a,{error:void 0!==p,helperText:p&&"".concat(a," is not a number!"),variant:"outlined",size:"small",required:d,style:{width:"100%"},name:a,label:a,onChange:c.bind(t,a),value:j}),u&&Object(dr.jsx)("p",{className:wi.a.helpText,children:u})]},a)}return"boolean"===l?Object(dr.jsx)("div",{style:{padding:"20px 0"},children:Object(dr.jsx)(Ir.a,{title:u,placement:"right-end",children:Object(dr.jsx)(Sc.a,{label:a,control:Object(dr.jsx)(Gr.a,{name:a,onChange:s.bind(t,a,j),checked:"true"===j})})})},a):Object(dr.jsxs)("div",{className:wi.a.generalSection,children:[Object(dr.jsx)(Vr.a,{rows:1,placeholder:"",variant:"outlined",size:"small",style:{width:"100%"},required:d,name:a,label:a,onChange:c.bind(t,a),value:j}),u&&Object(dr.jsx)("p",{className:wi.a.helpText,children:u})]},a)})):null}var kc=n(354);var Nc=function(e){var t=e.label,n=e.values,a=void 0===n?[]:n,r=e.error,i=e.name,c=e.updateValues,o=e.placeholder,s=void 0===o?"":o,l=e.onBlur,u=void 0===l?function(){}:l;return Object(dr.jsx)(Vr.a,{name:i,error:void 0!==r,helperText:r,placeholder:s,value:a?a.join(", "):"",onKeyDown:function(e){if("Backspace"===e.key){var t=e.target.value;if(t.endsWith(", ")){e.preventDefault();var n=t.slice(0,-2);c(n.split(/,\s*/))}}},onChange:function(e){var t=e.target.value.split(/,\s?/).map((function(e){return e.trim()}));c(t)},onBlur:u,label:t,style:{width:"100%"},variant:"outlined",size:"small"})},Ac=Object(mr.a)({contextField:{minWidth:"140px"},operator:{minWidth:"105px"}}),Rc=[{key:"IN",label:"IN"},{key:"NOT_IN",label:"NOT_IN"}],Ic=function(e){var t=e.constraint,n=e.updateConstraint,r=e.removeConstraint,i=e.contextFields,c=Object(a.useState)(),o=Object(Sr.a)(c,2),s=o[0],l=o[1],u=Gi(),d=Ac(),j=i.map((function(e){return{key:e.name,label:e.name}})),h=i.find((function(e){return e.name===t.contextName})),b=h&&h.legalValues&&h.legalValues.length>0?h.legalValues.map((function(e){return{value:e,label:e}})):void 0,p=t.values.map((function(e){return{value:e,label:e}}));return Object(dr.jsxs)("tr",{className:u.contentSpacingY,children:[Object(dr.jsx)("td",{children:Object(dr.jsx)(Yr,{name:"contextName",label:"Context Field",options:j,value:t.contextName||"",onChange:function(e){return n(e.target.value,"contextName")},className:d.contextField})}),Object(dr.jsx)("td",{children:Object(dr.jsx)(Yr,{name:"operator",label:"Operator",options:Rc,value:t.operator,onChange:function(e){return n(e.target.value,"operator")},className:d.operator})}),Object(dr.jsx)("td",{style:{width:"100%"},children:Object(dr.jsx)(hr,{condition:b,show:Object(dr.jsx)(kc.a,{multiple:!0,size:"small",options:b,value:p||[],getOptionLabel:function(e){return e.label},getOptionSelected:function(e,t){return e.value===t.value},filterSelectedOptions:!0,filterOptions:function(e){return e.filter((function(e){return!p.some((function(t){return t.value===e.value}))}))},onChange:function(e,t){return function(e){var t=e?e.map((function(e){return e.value})):[];n(t,"values")}(t)},renderInput:function(e){return Object(dr.jsx)(Vr.a,Object(x.a)(Object(x.a)({},e),{},{variant:"outlined",label:"Values"}))}}),elseShow:Object(dr.jsx)(Nc,{name:"values",error:s,onBlur:function(e){e.preventDefault();var a=t.values,r=a.filter((function(e){return e})).map((function(e){return e.trim()}));r.length!==a.length&&n(r,"values"),0===r.length?l("You need to specify at least one value"):l(void 0)},values:t.values,label:"Values (v1, v2, v3)",updateValues:function(e){return n(e,"values")}})})}),Object(dr.jsx)("td",{children:Object(dr.jsx)(yr.a,{onClick:r,children:Object(dr.jsx)(_r.a,{children:"delete"})})})]})},Dc=function(e){var t=e.constraints,n=e.updateConstraints,a=e.contextNames,r=e.contextFields,i=e.enabled,c=Gi(),o=function(e){return function(a){a.preventDefault();var r=Object(Xr.a)(t);r.splice(e,1),n(r)}},s=function(e){return function(a,r){var i=Object(Xr.a)(t);i[e][r]=a,n(i)}};return i?Object(dr.jsxs)("div",{className:c.contentSpacingY,children:[Object(dr.jsx)(Ir.a,{placement:"right-start",title:Object(dr.jsx)("span",{children:"Use context fields to constrain the activation strategy."}),children:Object(dr.jsxs)(Rr.a,{variant:"subtitle2",children:["Constraints ",Object(dr.jsx)(_r.a,{style:{fontSize:"0.9rem",color:"gray"},children:"info"})]})}),Object(dr.jsx)("table",{style:{margin:0},children:Object(dr.jsx)("tbody",{children:t.map((function(e,t){return Object(dr.jsx)(Ic,{id:"".concat(e.contextName,"-").concat(t),constraint:e,contextFields:r,updateConstraint:s(t),removeConstraint:o(t)},"".concat(e.contextName,"-").concat(t))}))})}),Object(dr.jsx)("small",{children:Object(dr.jsx)("a",{href:"#add-constraint",title:"Add constraint",onClick:function(e){e.preventDefault();var r=Object(Xr.a)(t);r.push({contextName:a[0],operator:"IN",values:[]}),n(r)},children:"Add constraint"})})]}):null},Lc=Object(l.b)((function(e){return{contextNames:e.context.toJS().map((function(e){return e.name})),contextFields:e.context.toJS(),enabled:!!e.uiConfig.toJS().flags.C}}),{})(Dc),Pc=function(e){var t=e.onCancel,n=e.strategy,a=e.saveStrategy,r=e.updateStrategy,i=e.strategyDefinition,c=e.context,o=function(e){var t=Object(x.a)(Object(x.a)({},n),{},{parameters:e});r(t)},s=function(){var e=Object(_.a)(y.a.mark((function e(t,a){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=Object(x.a)({},n.parameters))[t]=a,o(r);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),l=function(){switch(i.name){case"default":return yc;case"flexibleRollout":return vc;case"userWithId":return Tc;default:return Ec}}(),u=n.parameters;return Object(dr.jsxs)(lc.a,{open:!!n,"aria-labelledby":"form-dialog-title",fullWidth:!0,maxWidth:"md",children:[Object(dr.jsxs)(uc.a,{id:"form-dialog-title",children:["Configure ",ic(n.name)," strategy"]}),Object(dr.jsxs)(dc.a,{children:[Object(dr.jsx)("div",{children:Object(dr.jsx)(Lc,{updateConstraints:function(e){var t=Object(x.a)(Object(x.a)({},n),{},{constraints:e});r(t)},constraints:n.constraints||[]})}),Object(dr.jsx)("br",{}),Object(dr.jsx)("br",{}),Object(dr.jsx)(l,{parameters:u,updateParameter:s,strategyDefinition:i,editable:!0,context:c})]}),Object(dr.jsxs)(jc.a,{children:[Object(dr.jsx)(ni.a,{onClick:t,color:"secondary",children:"Cancel"}),Object(dr.jsx)(ni.a,{onClick:a,color:"primary",variant:"contained",children:"Save"})]})]})},Fc=Object(mr.a)((function(e){return{addStrategyCard:{width:"200px",minHeight:"200px",textAlign:"center",borderTop:"4px solid ".concat(e.palette.primary.main),display:"flex",flexDirection:"column"},addStrategyButton:{marginTop:"auto"}}})),Uc=function(e){var t=e.strategy,n=e.onClick,a=Fc();return Object(dr.jsxs)(ki.a,{className:a.addStrategyCard,children:[Object(dr.jsx)(Xi.a,{title:t.name}),Object(dr.jsx)(Ni.a,{children:Object(dr.jsx)(Rr.a,{variant:"body2",children:t.description})}),Object(dr.jsx)(ni.a,{className:a.addStrategyButton,onClick:n,children:"Configure"})]})},Vc=Object(mr.a)((function(e){return{createStrategyCardContainer:{display:"flex",flexWrap:"wrap","& > *":{marginRight:"0.5rem",marginTop:"0.5rem"}},subTitle:{fontWeight:e.fontWeight.semi,fontSize:e.fontSizes.subHeader,margin:"2rem 0 0.5rem 0"}}})),Gc=function(e){var t=e.strategies,n=e.showCreateStrategy,a=e.setShowCreateStrategy,r=e.featureToggleName,i=e.addStrategy,c=Vc();if(!t)return null;var o=t.filter((function(e){return!0!==e.editable})).filter((function(e){return!e.deprecated})),s=t.filter((function(e){return e.editable})),l=function(e){var n=t.find((function(t){return t.name===e})),a={};n.parameters.forEach((function(e){var t=e.name;a[t]=function(e,t){switch(e){case"percentage":case"rollout":return"100";case"stickiness":return"default";case"groupId":return t;default:return""}}(t,r)})),i({name:n.name,parameters:a})};return Object(dr.jsxs)(lc.a,{open:n,"aria-labelledby":"form-dialog-title",fullWidth:!0,maxWidth:"md",children:[Object(dr.jsx)(uc.a,{id:"form-dialog-title",children:"Add a new strategy"}),Object(dr.jsxs)(dc.a,{children:[Object(dr.jsx)(Rr.a,{variant:"subtitle1",className:c.subTitle,children:"Built in strategies"}),Object(dr.jsx)("div",{className:c.createStrategyCardContainer,children:function(e){for(var t=["default","flexibleRollout","userWithId","remoteAddress","applicationHostname"],n=Object(Xr.a)(e),a=[],r=function(){var e=t[0];n.forEach((function(t){t.name===e&&a.push(t)})),t.shift()};t.length>0;)r();return a}(o).map((function(e){return Object(dr.jsx)(Uc,{strategy:(t=e.name,rc[t]),onClick:function(){a(!1),l(e.name)}},e.name);var t}))}),Object(dr.jsx)(br,{condition:s.length>0,show:Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(Rr.a,{variant:"subtitle1",className:c.subTitle,children:"Custom strategies"}),Object(dr.jsx)("div",{className:c.createStrategyCardContainer,children:s.map((function(e){return Object(dr.jsx)(Uc,{strategy:e,onClick:function(){a(!1),l(e.name)}},e.name)}))})]})})]}),Object(dr.jsx)(jc.a,{children:Object(dr.jsx)(ni.a,{color:"secondary",onClick:function(){return a(!1)},children:"Cancel"})})]})},Bc=Object(mr.a)((function(e){return{dialogTitle:{backgroundColor:e.palette.primary.main,color:e.palette.dialogue.title.main,height:"150px",padding:"2rem 3rem",clipPath:" ellipse(130% 115px at 120% 20%)"},dialogContentPadding:{padding:"2rem 3rem"}}})),Mc=function(e){var t=e.children,n=e.open,a=e.onClick,r=e.onClose,i=e.title,c=e.primaryButtonText,o=e.secondaryButtonText,s=e.fullWidth,l=void 0!==s&&s,u=Bc();return Object(dr.jsxs)(lc.a,{open:n,onClose:r,fullWidth:l,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:[Object(dr.jsx)(uc.a,{className:u.dialogTitle,children:i}),Object(dr.jsx)(hr,{condition:t,show:Object(dr.jsx)(dc.a,{className:u.dialogContentPadding,children:t})}),Object(dr.jsxs)(jc.a,{children:[Object(dr.jsx)(hr,{condition:a,show:Object(dr.jsx)(ni.a,{color:"primary",variant:"contained",onClick:a,autoFocus:!0,children:c||"Yes, I'm sure"})}),Object(dr.jsx)(hr,{condition:r,show:Object(dr.jsxs)(ni.a,{onClick:r,children:[o||"No take me back."," "]})})]})]})},Hc=function(e){return{name:e.name,parameters:$r()(e.parameters),constraints:$r()(e.constraints||[])}},zc=function(e){var t=Object(a.useState)(!1),n=Object(Sr.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)(null),o=Object(Sr.a)(c,2),s=o[0],l=o[1],u=Object(a.useState)(!1),d=Object(Sr.a)(u,2),j=d[0],h=d[1],b=Object(a.useState)(!0),p=Object(Sr.a)(b,2),f=p[0],m=p[1],g=Object(a.useState)($r()(e.configuredStrategies)),O=Object(Sr.a)(g,2),v=O[0],w=O[1],C=Object(a.useState)(),T=Object(Sr.a)(C,2),S=T[0],E=T[1];Object(a.useEffect)((function(){S<0&&w($r()(e.configuredStrategies))}),[e.configuredStrategies]);var k,N=function(e){return function(t){var n=Object(x.a)({},t),a=function(e,t,n){return e.map((function(e,a){return a===t?n:e}))}(v,e,n);w(a)}},A=function(){var t=Object(_.a)(y.a.mark((function t(n,a){var r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(S){t.next=5;break}return r=ti()(v,n,a),t.next=4,e.saveStrategies(r);case 4:w(r);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),R=function(){var t=Object(_.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v[s].new){t.next=4;break}return t.next=4,e.saveStrategies(e.configuredStrategies.filter((function(e,t){return t!==s})));case 4:w(v.filter((function(e,t){return t!==s}))),l(void 0),i(null);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),I=e.strategies,D=e.configuredStrategies,L=e.featureToggleName,P=e.editable,F=function(e){return I&&0!==I.length?I.find((function(t){return t.name===e})):{name:"Loading"}},U=1===v.length,V=v.map((function(e,t){return Object(dr.jsx)(sc,{strategy:e,strategyDefinition:F(e.name),removeStrategy:function(){return e=t,i(!0),void l(e);var e},moveStrategy:A,editStrategy:function(){return E(t)},index:t,disableDelete:U,movable:!0},t)})),G=v[S];return Object(dr.jsxs)("div",{children:[Object(dr.jsx)(Gc,{strategies:I,showCreateStrategy:j,setShowCreateStrategy:h,featureToggleName:L,addStrategy:function(e){var t=Object(Xr.a)(v);t.push(Object(x.a)({},e)),w(t),E(t.length-1)}}),G?Object(dr.jsx)(Pc,{strategy:G,updateStrategy:N(S),saveStrategy:(k=S,Object(_.a)(y.a.mark((function t(){var n,a,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(Xr.a)(e.configuredStrategies),a=v[k],r=Hc(a),a.new?n.push(r):n[k]=r,t.next=6,e.saveStrategies(n);case 6:N(k)(r,!1),E(void 0);case 8:case"end":return t.stop()}}),t)})))),strategyDefinition:F(G.name),onCancel:function(){w($r()(e.configuredStrategies)),E(void 0)},context:e.context}):null,Object(dr.jsx)(br,{condition:P,show:Object(dr.jsx)(ii,{title:"Activation strategies",actions:Object(dr.jsx)(dr.Fragment,{children:Object(dr.jsx)(ni.a,{variant:"contained",disabled:!L,color:"primary",onClick:function(){return h(!0)},children:"Add strategy"})})})}),Object(dr.jsx)(br,{condition:f,show:Object(dr.jsx)(ai.a,{severity:"info",className:wi.a.infoCard,onClose:function(){return m(!1)},children:Object(dr.jsxs)("div",{style:{maxWidth:"800px"},children:["Activation strategies defines how you enable the new feature to your users. Changes to the activation strategies does not require redeployment of the code.",Object(dr.jsx)("br",{}),Object(dr.jsx)("br",{}),"Multiple activation strategies are composable blocks that is executed in an OR fashion.",Object(dr.jsx)("br",{}),"E.g. A gradual rollout activation strategy allows you to gradually enable to feature to a subset of your users without redeploy to production."]})})}),Object(dr.jsx)(br,{condition:!D||0===D.length,show:Object(dr.jsx)("p",{style:{padding:"0 16px"},children:Object(dr.jsx)("i",{children:"No activation strategies selected."})})}),Object(dr.jsx)(Mc,{title:"Really delete strategy?",open:r,onClick:function(){return R()},onClose:function(){l(null),i(!1)}}),Object(dr.jsx)(br,{condition:V.length>0,show:Object(dr.jsx)("div",{className:wi.a.strategyListCards,children:V})})]})},Jc=Object(l.b)((function(e){return{strategies:e.strategies.get("list").toArray(),context:e.context.toJS()}}),void 0)(zc),Yc=n(146),Wc=Object(mr.a)((function(e){return{headerContainer:Object(Ai.a)({padding:e.padding.pageContent.header,borderBottom:e.borders.default},e.breakpoints.down("sm"),{padding:"1.5rem 1rem"}),bodyContainer:Object(Ai.a)({padding:e.padding.pageContent.body},e.breakpoints.down("sm"),{padding:"1rem"}),paddingDisabled:{padding:"0"},borderDisabled:{border:"none"}}})),qc=function(e){var t,n,a=e.children,r=e.headerContent,i=e.disablePadding,c=e.disableBorder,o=Object(ur.a)(e,["children","headerContent","disablePadding","disableBorder"]),s=Wc(),l=fr()(s.headerContainer,(t={},Object(Ai.a)(t,s.paddingDisabled,i),Object(Ai.a)(t,s.borderDisabled,c),t)),u=fr()(s.bodyContainer,(n={},Object(Ai.a)(n,s.paddingDisabled,i),Object(Ai.a)(n,s.borderDisabled,c),n)),d=null;r&&(d="string"===typeof r?Object(dr.jsx)("div",{className:l,children:Object(dr.jsx)(ii,{title:r})}):Object(dr.jsx)("div",{className:l,children:r}));var j=c?{elevation:0}:{};return Object(dr.jsxs)(Yc.a,Object(x.a)(Object(x.a)(Object(x.a)({},o),j),{},{children:[d,Object(dr.jsx)("div",{className:u,children:a})]}))},Zc=n(262),Kc=n(321),Xc=n(361),Qc=n(322),$c=n(45),eo=n.n($c),to=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return e&&e.length>t?"".concat(e.substring(0,t),"..."):e},no=function(e){var t=e.apps;return Object(dr.jsx)(Pr.a,{children:Object(dr.jsx)(hr,{condition:t.length>0,show:t.map((function(e){var t=e.appName,n=e.description,a=e.icon;return Object(dr.jsxs)(Zc.a,{className:eo.a.listItem,children:[Object(dr.jsx)(Kc.a,{children:Object(dr.jsx)(Xc.a,{children:Object(dr.jsx)(hr,{condition:a,show:Object(dr.jsx)(_r.a,{children:a}),elseShow:Object(dr.jsx)(_r.a,{children:"apps"})},"avatar_conditional_".concat(t))})}),Object(dr.jsx)(Qc.a,{primary:Object(dr.jsx)(o.b,{to:"/applications/".concat(t),className:[eo.a.listLink,eo.a.truncate].join(" "),children:t}),secondary:n||"No description"})]},t)}))})})},ao=function(e){var t=e.submitText,n=void 0===t?"Create":t,a=e.onCancel,r=e.primaryButtonTestId;return Object(dr.jsxs)("div",{children:[Object(dr.jsx)(ni.a,{"data-test":r,type:"submit",color:"primary",variant:"contained",children:n}),"\xa0",Object(dr.jsx)(ni.a,{type:"cancel",onClick:a,children:"Cancel"})]})};var ro=function(e){var t=e.label,n=e.id,a=e.className,r=void 0===a?eo.a.dropdownButton:a,i=e.title,c=e.icon,o=e.startIcon,s=e.style,l=Object(ur.a)(e,["label","id","className","title","icon","startIcon","style"]);return Object(dr.jsx)(ni.a,Object(x.a)(Object(x.a)({id:n,className:r,title:i,style:s},l),{},{startIcon:o,endIcon:Object(dr.jsx)(_r.a,{children:c}),children:t}))},io=function(e){var t=e.icon,n=e.label,a=e.disabled,r=Object(ur.a)(e,["icon","label","disabled"]);return Object(dr.jsxs)(Mr.a,Object(x.a)(Object(x.a)({disabled:a,style:{display:"flex",alignItems:"center"}},r),{},{children:[Object(dr.jsx)(_r.a,{style:{paddingRight:"16px"},children:t}),n]}))},co=[NaN,1/0,-1/0];function oo(e,t,n){return"number"!==typeof e||"number"!==typeof t||"number"!==typeof n?null:0===t?0:(co.forEach((function(a){if([e,t,n].indexOf(a)>-1)return a})),(e/t*100).toFixed(n))}var so=n(77),lo=n.n(so),uo="ADMIN",jo="CREATE_FEATURE",ho="UPDATE_FEATURE",bo="CREATE_STRATEGY",po="UPDATE_APPLICATION",fo="CREATE_PROJECT",mo="CREATE_TAG_TYPE",go="UPDATE_ADDON",Oo=function(e,t){var n=!1,a=e.permissions.reduce((function(e,a){return a.permission===uo&&(n=!0),a.permission===t&&(e[a.project]=t),e}),{});return function(e){return!!n||!!a[e]}},xo=function(e){var t=e.input,n=e.errors,r=e.setValue,i=e.validateName,c=e.onSubmit,o=e.onCancel,s=e.user;return Object(a.useEffect)((function(){return window.onbeforeunload=function(){return"Data will be lost if you leave the page, are you sure?"},function(){window.onbeforeunload=!1}}),[]),Object(dr.jsx)(qc,{headerContent:"Create new feature toggle",children:Object(dr.jsxs)("form",{onSubmit:c,children:[Object(dr.jsx)("div",{className:lo.a.formContainer,children:Object(dr.jsx)(Vr.a,{size:"small",variant:"outlined",label:"Name",required:!0,placeholder:"Unique-name",className:lo.a.nameInput,name:"name",inputProps:{"data-test":"CF_NAME_ID"},value:t.name,error:void 0!==n.name,helperText:n.name,onBlur:function(e){return i(e.target.value)},onChange:function(e){return r("name",bi(e.target.value))}})}),Object(dr.jsx)("div",{className:lo.a.formContainer,children:Object(dr.jsx)(qr,{value:t.type,onChange:function(e){return r("type",e.target.value)},label:"Toggle type",id:"feature-type-select",editable:!0,inputProps:{"data-test":"CF_TYPE_ID"}})}),Object(dr.jsx)("section",{className:lo.a.formContainer,children:Object(dr.jsx)(Kr,{value:t.project,onChange:function(e){return r("project",e.target.value)},filter:Oo(s,jo)})}),Object(dr.jsx)("section",{className:lo.a.formContainer,children:Object(dr.jsx)(Vr.a,{size:"small",variant:"outlined",className:eo.a.fullwidth,multiline:!0,rows:4,label:"Description",placeholder:"A short description of the feature toggle",error:void 0!==n.description,helperText:n.description,value:t.description,inputProps:{"data-test":"CF_DESC_ID"},onChange:function(e){return r("description",e.target.value)}})}),Object(dr.jsxs)("section",{className:lo.a.toggleContainer,children:[Object(dr.jsx)(Gr.a,{checked:t.enabled,onChange:function(){r("enabled",!t.enabled)}}),Object(dr.jsxs)("p",{className:lo.a.toggleText,children:[t.enabled?"Enabled":"Disabled"," feature toggle"]})]}),Object(dr.jsx)("section",{className:lo.a.strategiesContainer,children:Object(dr.jsx)(Jc,{configuredStrategies:t.strategies,featureToggleName:t.name,saveStrategies:function(e){return r("strategies",e)},editable:!0})}),Object(dr.jsx)(Br.a,{children:Object(dr.jsx)(ao,{submitText:"Create",primaryButtonTestId:"CF_CREATE_BTN_ID",onCancel:o})})]})})},vo={name:"default",parameters:{}};var yo=function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(e){var a;Object(S.a)(this,n),(a=t.call(this)).setValue=function(e,t){var n=a.state.featureToggle;n[e]=t,a.setState({featureToggle:n,dirty:!0})},a.validateName=function(){var e=Object(_.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(x.a)({},a.state),r=n.errors,e.prev=1,e.next=4,he(t);case 4:r.name=void 0,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),r.name=e.t0.message;case 10:a.setState({errors:r});case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),a.onSubmit=function(){var e=Object(_.a)(y.a.mark((function e(t){var n,r,i,c,o,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.props.user,t.preventDefault(),r=a.props,i=r.createFeatureToggles,c=r.history,o=r.showFeedback,s=a.state.featureToggle,!(Object.values(a.state.errors).filter((function(e){return e})).length>0)){e.next=7;break}return e.abrupt("return");case 7:return s.strategies<1&&(s.strategies=[vo]),e.prev=8,e.next=11,i(s).then((function(){return c.push("/features/strategies/".concat(s.name))}));case 11:yi(n)&&o(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),e.t0.toString().includes("not allowed to be empty")&&a.setState({errors:{name:"Name is not allowed to be empty"}});case 17:case"end":return e.stop()}}),e,null,[[8,14]])})));return function(t){return e.apply(this,arguments)}}(),a.onCancel=function(e){e.preventDefault(),a.props.history.push("/features")};var r=fi();return a.state={featureToggle:{name:r,description:"",type:"release",stale:!1,strategies:[],variants:[],enabled:!0,project:e.currentProjectId},errors:{},dirty:!1},a}return Object(sr.a)(n,[{key:"render",value:function(){return Object(dr.jsx)(xo,{onSubmit:this.onSubmit,onCancel:this.onCancel,validateName:this.validateName,setValue:this.setValue,setStrategies:this.setStrategies,input:this.state.featureToggle,errors:this.state.errors,user:this.props.user})}}]),n}(a.Component),_o=Object(l.b)((function(e){return{currentProjectId:function(e){return e.currentProjectId?"*"===e.currentProjectId?"default":e.currentProjectId:"default"}(e.settings.toJS().feature||{}),user:e.user.toJS()}}),(function(e){return{validateName:function(t){return he(t)(e)},createFeatureToggles:function(t){return de(t)(e)},showFeedback:ir(e)}}))(yo),wo=function(e){var t=e.history;return Object(dr.jsx)(_o,{title:"Create feature toggle",history:t})},Co=n(128),To=n.n(Co),So=function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(){var e;return Object(S.a)(this,n),(e=t.call(this)).setValue=function(t){var n=bi(t.target.value);e.setState({newToggleName:n})},e.toggleReplaceGroupId=function(){var t=(!!e.state).replaceGroupId;e.setState({replaceGroupId:t})},e.onValidateName=Object(_.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.newToggleName,t.prev=1,t.next=4,e.props.validateName(n);case 4:e.setState({nameError:void 0}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),e.setState({nameError:t.t0.message});case 10:case"end":return t.stop()}}),t,null,[[1,7]])}))),e.onSubmit=function(){var t=Object(_.a)(y.a.mark((function t(n){var a,r,i,c,o,s,l;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a=e.state,r=a.nameError,i=a.newToggleName,c=a.replaceGroupId,!r){t.next=4;break}return t.abrupt("return");case 4:o=e.props,s=o.copyToggle,l=o.history,s.name=i,c&&s.strategies.forEach((function(e){e.parameters&&e.parameters.groupId&&(e.parameters.groupId=i)}));try{e.props.createFeatureToggle(s).then((function(){return l.push("/features/strategies/".concat(s.name))}))}catch(u){e.setState({apiError:u})}case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.state={newToggleName:"",replaceGroupId:!0},e.inputRef=r.a.createRef(),e}return Object(sr.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){this.props.copyToggle&&this.setState({featureToggle:this.props.copyToggle})}},{key:"componentDidMount",value:function(){this.props.copyToggle?this.inputRef.current.focus():this.props.fetchFeatureToggles()}},{key:"render",value:function(){var e=this.props.copyToggle;if(!e)return Object(dr.jsx)("span",{children:"Toggle not found"});var t=this.state,n=t.newToggleName,a=t.nameError,r=t.replaceGroupId;return Object(dr.jsxs)(Yc.a,{className:eo.a.fullwidth,style:{overflow:"visible"},children:[Object(dr.jsx)("div",{className:To.a.header,children:Object(dr.jsxs)("h1",{children:["Copy\xa0",e.name]})}),Object(dr.jsx)(br,{condition:this.state.apiError,show:Object(dr.jsx)(ai.a,{severity:"error",children:this.state.apiError})}),Object(dr.jsxs)("section",{className:To.a.content,children:[Object(dr.jsxs)("p",{className:To.a.text,children:["You are about to create a new feature toggle by cloning the configuration of feature toggle\xa0",Object(dr.jsx)(o.b,{to:"/features/strategies/".concat(e.name),children:e.name}),". You must give the new feature toggle a unique name before you can proceed."]}),Object(dr.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(dr.jsx)(Vr.a,{label:"Feature toggle name",name:"name",value:n,onBlur:this.onValidateName,onChange:this.setValue,error:void 0!==a,helperText:a,variant:"outlined",size:"small",inputRef:this.inputRef}),Object(dr.jsx)(Sc.a,{control:Object(dr.jsx)(Gr.a,{value:r,checked:r,label:"Replace groupId",onChange:this.toggleReplaceGroupId}),label:"Replace groupId"}),Object(dr.jsxs)(ni.a,{type:"submit",color:"primary",variant:"contained",children:[Object(dr.jsx)(_r.a,{children:"file_copy"}),"\xa0\xa0\xa0 Create from copy"]})]})]})]})}}]),n}(a.Component),Eo=Object(l.b)((function(e,t){return{history:t.history,copyToggle:e.features.toJS().find((function(e){return e.name===t.copyToggleName}))}}),(function(e){return{validateName:he,createFeatureToggle:function(t){return de(t)(e)},fetchFeatureToggles:function(){return ue()(e)}}}))(So),ko=function(e){var t=e.history,n=e.match.params;return Object(dr.jsx)(Eo,{title:"Copy feature toggle",history:t,copyToggleName:n.copyToggle})},No=n(333),Ao=Object(mr.a)((function(e){return{historyItem:{padding:"5px","&:nth-child(odd)":{backgroundColor:e.palette.code.background}}}})),Ro=function(e){var t=e.entry,n=Ao(),a=JSON.parse(JSON.stringify(t));delete a.description,delete a.name,delete a.diffs;var r=JSON.stringify(a,null,2);return Object(dr.jsx)("div",{className:n.historyItem,children:Object(dr.jsx)("div",{children:Object(dr.jsx)("code",{className:"JSON smalltext man",children:r})})})},Io=Object(mr.a)((function(e){return{blue:{color:e.palette.code.edited},negative:{color:e.palette.code.diffSub},positive:{color:e.palette.code.diffAdd}}})),Do={A:" ",E:" ",D:"-",N:"+"},Lo=function(e){var t,n=e.entry,a=Io(),r={A:a.blue,E:a.blue,D:a.negative,N:a.positive};return t=n.diffs?n.diffs.map((function(e,t){var n,a=e.path.join(".");if(e.item)n=function(e,t){var n;return void 0!==e.lhs?n=Object(dr.jsx)("div",{children:Object(dr.jsxs)("div",{className:r.D,children:["- ",t,": ",JSON.stringify(e.lhs)]})}):void 0!==e.rhs&&(n=Object(dr.jsx)("div",{children:Object(dr.jsxs)("div",{className:r.N,children:["+ ",t,": ",JSON.stringify(e.rhs)]})})),n}(e.item,a);else if(void 0!==e.lhs&&void 0!==e.rhs)n=Object(dr.jsxs)("div",{children:[Object(dr.jsxs)("div",{className:r.D,children:["- ",a,": ",JSON.stringify(e.lhs)]}),Object(dr.jsxs)("div",{className:r.N,children:["+ ",a,": ",JSON.stringify(e.rhs)]})]});else{var i=r[e.kind],c=Do[e.kind];n=Object(dr.jsxs)("div",{className:i,children:[c," ",a,": ",JSON.stringify(e.rhs||e.item)]})}return Object(dr.jsx)("div",{children:n},t)})):Object(dr.jsx)("div",{className:r.N,children:JSON.stringify(n.data,null,2)}),Object(dr.jsx)("pre",{style:{overflowX:"auto",overflowY:"hidden"},children:Object(dr.jsx)("code",{className:"smalltext man",children:0===t.length?"(no changes)":t})})},Po=Object(mr.a)({eventLogHeader:{minWidth:"110px"}}),Fo=function(e){var t,n=e.entry,a=e.timeFormatted,r=Po();return Object(dr.jsxs)("div",{children:[Object(dr.jsxs)("dl",{children:[Object(dr.jsx)("dt",{className:r.eventLogHeader,children:"Changed at:"}),Object(dr.jsx)("dd",{children:a}),Object(dr.jsx)("dt",{className:r.eventLogHeader,children:"Changed by: "}),Object(dr.jsx)("dd",{title:n.createdBy,children:n.createdBy}),Object(dr.jsx)("dt",{className:r.eventLogHeader,children:"Type: "}),Object(dr.jsx)("dd",{children:n.type}),(t=n.data.name,t?Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)("dt",{className:r.eventLogHeader,children:"Name: "}),Object(dr.jsx)("dd",{children:t})]}):null)]}),Object(dr.jsx)("strong",{children:"Change"}),Object(dr.jsx)(Lo,{entry:n})]})},Uo=Object(mr.a)((function(e){return{eventEntry:{border:e.borders.default,padding:"1rem",margin:"1rem 0",borderRadius:e.borders.radius.main},history:{"& code":{wordWrap:"break-word",whiteSpace:"pre",fontFamily:"monospace",lineHeight:"100%",color:e.palette.code.main},"& code > .diff-N":{color:e.palette.code.diffAdd},"& code > .diff-D":{color:e.palette.code.diffSub},"& code > .diff-A, .diff-E":{color:e.palette.code.diffNeutral},"& dl":{padding:"0"},"& dt":{float:"left",clear:"left",fontWeight:"bold"},"& dd":{margin:"0 0 0 83px",padding:"0 0 0.5em 0"}}}})),Vo=function(e){var t,n=e.updateSetting,a=e.title,r=e.history,i=e.settings,c=e.displayInline,o=e.location,s=(e.hideName,Uo()),l=i.showData;if(!r||r.length<0)return null;return t=l?r.map((function(e){return Object(dr.jsx)(Ro,{entry:e},"log".concat(e.id))})):r.map((function(e){return Object(dr.jsx)("div",{className:s.eventEntry,children:Object(dr.jsx)(Fo,{entry:e,timeFormatted:(t=e.createdAt,ji(t,o.locale))})},e.id);var t})),Object(dr.jsx)(qc,{disablePadding:c,disableBorder:c,headerContent:Object(dr.jsx)(ii,{title:a,actions:Object(dr.jsx)(Sc.a,{control:Object(dr.jsx)(Gr.a,{checked:l,onChange:function(){n("showData",!i.showData)},color:"primary"}),label:"Full events"})}),children:Object(dr.jsx)("div",{className:s.history,children:Object(dr.jsx)(Pr.a,{children:t})})})},Go=Object(l.b)((function(e){return{settings:e.settings.toJS().history||{},location:e.settings.toJS().location||{}}}),{updateSetting:ra("history")})(Vo),Bo=function(e){var t=e.toggleName,n=e.history,r=e.fetchHistoryForToggle;return Object(a.useEffect)((function(){r(t)}),[r,t]),n&&0!==n.length?Object(dr.jsx)(Go,{history:n,hideName:!0,title:"Change log",displayInline:!0}):Object(dr.jsx)("span",{children:"fetching.."})};function Mo(e,t){return t&&e.history.hasIn(["toggles",t])?e.history.getIn(["toggles",t]).toArray():[]}var Ho=Object(l.b)((function(e,t){return{history:Mo(e,t.toggleName)}}),{fetchHistoryForToggle:function(e){return function(t){return zt.fetchHistoryForToggle(e).then((function(e){return t(function(e){return{type:Wt,value:e}}(e))})).catch(z(t,Yt))}}})(Bo),zo=n(174),Jo=n.n(zo),Yo=n(129),Wo=n.n(Yo),qo=function(e){var t=e.percentage,n=e.strokeWidth,r=void 0===n?10:n,i=e.initialAnimation,c=void 0!==i&&i,o=e.animatePercentageText,s=void 0!==o&&o,l=(e.textForPercentage,e.colorClassName),u=e.isFallback,d=void 0!==u&&u,j=Object(a.useState)({percentage:c?0:t,percentageText:c?0:t}),h=Object(Sr.a)(j,2),b=h[0],p=h[1],f=Object(a.useRef)(),m=Object(a.useRef)(),g=Object(a.useRef)(),O=Object(a.useRef)();Object(a.useEffect)((function(){return c&&(f.current=setTimeout((function(){m.current=window.requestAnimationFrame((function(){p((function(e){return Object(x.a)(Object(x.a)({},e),{},{percentage:t})}))}))}),0)),function(){clearTimeout(f.current),clearTimeout(O),window.cancelAnimationFrame(m.current),window.cancelAnimationFrame(g.current)}}),[]),Object(a.useEffect)((function(){if(t!==b){var e={percentage:t};s?y(t,v(t)):e.percentageText=t,p((function(t){return Object(x.a)(Object(x.a)({},t),e)}))}}),[t]);var v=function(e){var t=b.percentageText,n=t>e?-(t-e):e-t,a=5e3/n,r=Math.round(Math.abs(5e3/a));return{start:t,target:e,cyclesCounter:r,perCycleTime:Math.round(Math.abs(a)),increment:n/r}},y=function e(t,n){cancelAnimationFrame(g.current),clearTimeout(O.current);var a=b.percentageText;if(n.cyclesCounter--,n.cyclesCounter<=0)p({percentageText:n.target});else{var r=Math.round(a+n.increment);g.current=requestAnimationFrame((function(){p({percentageText:r}),O.current=setTimeout((function(){e(r,n)}),n.perCycleTime)}))}},_=50-r/2,w="\n      M 50,50 m 0,-".concat(_,"\n      a ").concat(_,",").concat(_," 0 1 1 0,").concat(2*_,"\n      a ").concat(_,",").concat(_," 0 1 1 0,-").concat(2*_,"\n    "),C=2*Math.PI*_,T={strokeDasharray:"".concat(C,"px ").concat(C,"px"),strokeDashoffset:"".concat((100-b.percentage)/100*C,"px")};return d?Object(dr.jsx)("svg",{viewBox:"0 0 24 24",children:Object(dr.jsx)("path",{fill:"#E0E0E0",d:"M17.3,18C19,16.5 20,14.4 20,12A8,8 0 0,0 12,4A8,8 0 0,0 4,12C4,14.4 5,16.5 6.7,18C8.2,16.7 10,16 12,16C14,16 15.9,16.7 17.3,18M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M7,9A1,1 0 0,1 8,10A1,1 0 0,1 7,11A1,1 0 0,1 6,10A1,1 0 0,1 7,9M10,6A1,1 0 0,1 11,7A1,1 0 0,1 10,8A1,1 0 0,1 9,7A1,1 0 0,1 10,6M17,9A1,1 0 0,1 18,10A1,1 0 0,1 17,11A1,1 0 0,1 16,10A1,1 0 0,1 17,9M14.4,6.1C14.9,6.3 15.1,6.9 15,7.4L13.6,10.8C13.8,11.1 14,11.5 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12C10,11 10.7,10.1 11.7,10L13.1,6.7C13.3,6.1 13.9,5.9 14.4,6.1Z"})}):Object(dr.jsxs)("svg",{viewBox:"0 0 100 100",children:[Object(dr.jsx)("path",{className:Wo.a.trail,d:w,strokeWidth:r,fillOpacity:0}),Object(dr.jsx)("path",{className:[Wo.a.path,l].join(" "),d:w,strokeWidth:r,fillOpacity:0,style:T}),Object(dr.jsxs)("text",{className:Wo.a.text,x:50,y:50,children:[b.percentageText,"%"]})]})},Zo=n(130),Ko=n.n(Zo),Xo=function(e){var t=e.strategy;return Object(dr.jsx)(Hi.a,{clickable:!0,className:Ko.a.chip,label:t.name,component:o.b,to:"/strategies/view/".concat(t.name),icon:Object(dr.jsx)(Jo.a,{})})},Qo=function(e){var t=e.strategies;return Object(dr.jsxs)("div",{style:{verticalAlign:"middle",paddingTop:"14px"},children:["With ",t.length>1?"strategies":"strategy"," ",t.map((function(e,t){return Object(dr.jsx)(Xo,{strategy:e},t)}))]})},$o=function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(S.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).renderLastSeen=function(t){return t?e.formatFullDateTime(t):"Never reported"},e}return Object(sr.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){this.props.fetchSeenApps(),this.props.fetchFeatureMetrics()}},{key:"formatFullDateTime",value:function(e){return ji(e,this.props.location.locale)}},{key:"render",value:function(){var e=this.props,t=e.metrics,n=void 0===t?{}:t,a=e.featureToggle,r=n.lastHour,i=void 0===r?{yes:0,no:0,isFallback:!0}:r,c=n.lastMinute,o=void 0===c?{yes:0,no:0,isFallback:!0}:c,s=n.seenApps,l=void 0===s?[]:s,u=1*oo(i.yes,i.yes+i.no,0),d=1*oo(o.yes,o.yes+o.no,0);return Object(dr.jsxs)("div",{style:{padding:"16px",flexGrow:1},children:[Object(dr.jsxs)(gr.a,{container:!0,spacing:2,justify:"center",className:Ko.a.grid,children:[Object(dr.jsxs)(gr.a,{item:!0,xs:12,sm:4,children:[Object(dr.jsx)(qo,{percentage:d,isFallback:o.isFallback,animatePercentageText:!0}),Object(dr.jsx)(hr,{condition:o.isFallback,show:Object(dr.jsx)("p",{children:"No metrics available"}),elseShow:Object(dr.jsxs)("p",{children:[Object(dr.jsx)("strong",{children:"Last minute"}),Object(dr.jsx)("br",{})," Yes ",o.yes,", No:"," ",o.no]})})]}),Object(dr.jsxs)(gr.a,{item:!0,xs:12,sm:4,children:[Object(dr.jsx)(qo,{percentage:u,isFallback:i.isFallback}),Object(dr.jsx)(hr,{condition:i.isFallback,show:Object(dr.jsx)("p",{children:"No metrics available"}),elseShow:Object(dr.jsxs)("p",{children:[Object(dr.jsx)("strong",{children:"Last hour"}),Object(dr.jsx)("br",{})," Yes ",i.yes,", No: ",i.no]})})]}),Object(dr.jsxs)(gr.a,{item:!0,xs:12,sm:4,children:[Object(dr.jsx)(hr,{condition:l.length,show:Object(dr.jsx)("div",{children:Object(dr.jsx)("strong",{children:"Seen in applications:"})}),elseShow:Object(dr.jsxs)("div",{children:[Object(dr.jsx)(_r.a,{className:Ko.a.problemIcon,title:"Not used in an app in the last hour",children:"report problem"}),Object(dr.jsx)("div",{children:Object(dr.jsxs)("small",{children:[Object(dr.jsxs)("strong",{children:["Not used in an app in the last hour."," "]}),"This might be due to your client implementation not reporting usage."]})})]})}),Object(dr.jsx)(no,{apps:l}),Object(dr.jsxs)("div",{children:[Object(dr.jsx)(hr,{condition:a.createdAt,show:Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)("strong",{children:"Created: "}),Object(dr.jsx)("span",{children:this.formatFullDateTime(a.createdAt)})]})}),Object(dr.jsx)("br",{}),Object(dr.jsx)("strong",{children:"Last seen: "}),Object(dr.jsx)("span",{children:this.renderLastSeen(a.lastSeenAt)})]})]})]}),Object(dr.jsx)("hr",{}),Object(dr.jsx)(Qo,{strategies:a.strategies})]})}}]),n}(r.a.Component);function es(e,t){if(t){var n={};return e.featureMetrics.hasIn(["seenApps",t])&&(n.seenApps=e.featureMetrics.getIn(["seenApps",t])),e.featureMetrics.hasIn(["lastHour",t])&&(n.lastHour=e.featureMetrics.getIn(["lastHour",t]),n.lastMinute=e.featureMetrics.getIn(["lastMinute",t])),n}}var ts=Object(l.b)((function(e,t){return{metrics:es(e,t.featureToggle.name),location:e.settings.toJS().location||{}}}),{fetchFeatureMetrics:Ge,fetchSeenApps:function(){return function(e){return e({type:"START_FETCH_SEEN_APP"}),Pe.fetchSeenApps().then((function(t){return e(function(e){return{type:Ue,value:e,receivedAt:Date.now()}}(t))})).catch(Ve(e,"ERROR_FETCH_SEEN_APP"))}}})($o);function ns(e){var t=e.configuredStrategies;return t&&0!==t.length?Object(dr.jsx)("section",{children:Object(dr.jsx)(Jc,Object(x.a)({},e))}):null}ns.defaultProps={editable:!0};var as=ns,rs=Object(l.b)((function(e,t){return{featureToggleName:t.featureToggle.name,configuredStrategies:t.featureToggle.strategies}}),(function(e,t){return{saveStrategies:function(n){return function(e,t){return function(n){return e.strategies=t,n({type:Q}),B.update(e).then((function(){var t="".concat(e.name," successfully updated!");return setTimeout((function(){return n({type:J,error:t})}),1e3),n({type:ie,featureToggle:e,info:t})})).catch(z(n,ae))}}(t.featureToggle,n)(e)}}}))(as),is=n(325),cs=n(326),os=n(61),ss=n.n(os);var ls=function(e){var t=e.variant,n=e.editVariant,a=e.removeVariant,r=e.editable,i=ci;return Object(dr.jsxs)(is.a,{children:[Object(dr.jsx)(cs.a,{onClick:n,children:t.name}),Object(dr.jsxs)(cs.a,{className:ss.a.chipContainer,children:[Object(dr.jsx)(hr,{condition:t.payload,show:Object(dr.jsx)(Hi.a,{label:"Payload"})}),Object(dr.jsx)(hr,{condition:t.overrides&&t.overrides.length>0,show:Object(dr.jsx)(Hi.a,{style:{backgroundColor:"rgba(173, 216, 230, 0.2)"},label:"Overrides"})})]}),Object(dr.jsxs)(cs.a,{children:[t.weight/10," %"]}),Object(dr.jsx)(cs.a,{children:t.weightType===i?"Fix":"Variable"}),Object(dr.jsx)(hr,{condition:r,show:Object(dr.jsx)(cs.a,{className:ss.a.actions,children:Object(dr.jsxs)("div",{className:ss.a.actionsContainer,children:[Object(dr.jsx)(yr.a,{onClick:n,children:Object(dr.jsx)(_r.a,{children:"edit"})}),Object(dr.jsx)(yr.a,{onClick:a,children:Object(dr.jsx)(_r.a,{children:"delete"})})]})}),elseShow:Object(dr.jsx)(cs.a,{className:ss.a.actions})})]})},us=n(328),ds=n(329),js=n(330),hs=n(327),bs=Mc,ps=Object(mr.a)((function(e){return{contextFieldSelect:{marginRight:"8px"}}})),fs=Object(l.b)((function(e){return{contextDefinitions:e.context.toJS()}}),{})((function(e){var t=e.overrides,n=e.updateOverrideType,a=e.updateOverrideValues,r=e.removeOverride,i=e.contextDefinitions,c=ps(),o=Gi(),s=i.map((function(e){return{key:e.name,label:e.name}})),l=function(e){return function(t){a(e,t)}},u=function(e){return function(t,n){a(e,n||[])}};return t.map((function(e,t){var a=i.find((function(t){return t.name===e.contextName})),d=a?a.legalValues:[];return Object(dr.jsxs)(gr.a,{container:!0,alignItems:"center",children:[Object(dr.jsx)(gr.a,{item:!0,md:3,className:c.contextFieldSelect,children:Object(dr.jsx)(Yr,{name:"contextName",label:"Context Field",value:e.contextName,options:s,classes:{root:fr()(o.fullWidth)},onChange:n(t)})}),Object(dr.jsx)(gr.a,{md:7,item:!0,children:Object(dr.jsx)(hr,{condition:d&&d.length>0,show:Object(dr.jsx)(kc.a,{multiple:!0,id:"override-select-".concat(t),getOptionSelected:function(e,t){return e===t},options:d,onChange:u(t),getOptionLabel:function(e){return e},defaultValue:e.values,value:e.values,filterSelectedOptions:!0,size:"small",renderInput:function(e){return Object(dr.jsx)(Vr.a,Object(x.a)(Object(x.a)({},e),{},{variant:"outlined",label:"Legal values"}))}}),elseShow:Object(dr.jsx)(Nc,{label:"Values (v1, v2, ...)",name:"values",placeholder:"",classes:{root:o.fullWidth},values:e.values,updateValues:l(t)})})}),Object(dr.jsx)(gr.a,{item:!0,md:1,children:Object(dr.jsx)(yr.a,{onClick:r(t),children:Object(dr.jsx)(_r.a,{children:"delete"})})})]},"override=".concat(t))}))})),ms=[{key:"string",label:"string"},{key:"json",label:"json"},{key:"csv",label:"csv"}],gs={type:"string",value:""},Os=function(e){var t=e.showDialog,n=e.closeDialog,r=e.save,i=e.validateName,c=e.editVariant,o=e.title,s=Object(a.useState)({}),l=Object(Sr.a)(s,2),u=l[0],d=l[1],j=Object(a.useState)(gs),h=Object(Sr.a)(j,2),b=h[0],p=h[1],f=Object(a.useState)([]),m=Object(Sr.a)(f,2),g=m[0],O=m[1],v=Object(a.useState)({}),w=Object(Sr.a)(v,2),C=w[0],T=w[1],S=Gi(),E=function(){c?(d({name:c.name,weight:c.weight/10,weightType:c.weightType||oi}),c.payload&&p(c.payload),c.overrides?O(c.overrides):O([])):(d({}),p(gs),O([])),T({})};Object(a.useEffect)((function(){E()}),[c]);var k=function(e){var t=e.target,n=t.name,a=t.value;d(Object(x.a)(Object(x.a)({},u),{},Object(Ai.a)({},n,bi(a))))},N=function(){var e=Object(_.a)(y.a.mark((function e(t){var a,c,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T({}),t.preventDefault(),!(a=i(u.name))){e.next=6;break}return T(a),e.abrupt("return");case 6:return e.prev=6,c={name:u.name,weight:10*u.weight,weightType:u.weightType,payload:b.value?b:void 0,overrides:g.map((function(e){return{contextName:e.contextName,values:e.values}})).filter((function(e){return e.values&&e.values.length>0}))},e.next=10,r(c);case 10:E(),n(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),e.t0.message.includes("duplicate value")?T({name:"A variant with that name already exists."}):(o=e.t0.message||"Could not add variant",T({general:o}));case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}(),A=function(e){e.preventDefault(),p(Object(x.a)(Object(x.a)({},b),{},Object(Ai.a)({},e.target.name,e.target.value)))},R=function(e,t){O(g.map((function(n,a){return a===e&&(n.values=t),n})))},I=u.weightType===ci;return Object(dr.jsx)(bs,{open:t,contentLabel:"Example Modal",style:vi,onClose:function(e){e.preventDefault(),E(),n()},onClick:N,primaryButtonText:"Save",secondaryButtonText:"Cancel",title:o,children:Object(dr.jsxs)("form",{onSubmit:N,className:S.contentSpacingY,children:[Object(dr.jsx)("p",{style:{color:"red"},children:C.general}),Object(dr.jsx)(Vr.a,{label:"Variant name",name:"name",placeholder:"",className:S.fullWidth,helperText:C.name,value:u.name||"",error:Boolean(C.name),variant:"outlined",required:!0,size:"small",type:"name",onChange:k}),Object(dr.jsx)("br",{}),Object(dr.jsxs)(gr.a,{container:!0,children:[Object(dr.jsx)(gr.a,{item:!0,md:4,children:Object(dr.jsx)(Vr.a,{id:"weight",label:"Weight",name:"weight",variant:"outlined",size:"small",placeholder:"",InputProps:{endAdornment:Object(dr.jsx)(hs.a,{position:"start",children:"%"})},style:{marginRight:"0.8rem"},value:u.weight||"",error:Boolean(C.weight),type:"number",disabled:!I,onChange:k})}),Object(dr.jsx)(gr.a,{item:!0,md:6,children:Object(dr.jsx)(Hr.a,{children:Object(dr.jsx)(Sc.a,{control:Object(dr.jsx)(Gr.a,{name:"weightType",value:I,onChange:function(e){var t=e.target,n=t.checked,a=t.name,r=n?ci:oi;d(Object(x.a)(Object(x.a)({},u),{},Object(Ai.a)({},a,r)))}}),label:"Custom percentage"})})})]}),Object(dr.jsxs)("p",{style:{marginBottom:"1rem"},children:[Object(dr.jsx)("strong",{children:"Payload "}),Object(dr.jsx)(_r.a,{name:"info",title:"Passed to the variant object. Can be anything (json, value, csv)"})]}),Object(dr.jsxs)(gr.a,{container:!0,children:[Object(dr.jsx)(gr.a,{item:!0,md:3,children:Object(dr.jsx)(Yr,{name:"type",label:"Type",className:S.fullWidth,value:b.type,options:ms,onChange:A})}),Object(dr.jsx)(gr.a,{item:!0,md:9,children:Object(dr.jsx)(Vr.a,{rows:1,label:"Value",name:"value",className:S.fullWidth,value:b.value,onChange:A,variant:"outlined",size:"small"})})]}),Object(dr.jsx)(br,{condition:g.length>0,show:Object(dr.jsxs)("p",{style:{marginBottom:".5rem"},children:[Object(dr.jsx)("strong",{children:"Overrides "}),Object(dr.jsx)(_r.a,{name:"info",title:"Here you can specify which users should get this variant."})]})}),Object(dr.jsx)(fs,{overrides:g,removeOverride:function(e){return function(t){t.preventDefault(),O(g.filter((function(t,n){return n!==e})))}},updateOverrideType:function(e){return function(t){t.preventDefault(),O(g.map((function(n,a){return a===e&&(n[t.target.name]=t.target.value),n})))}},updateOverrideValues:R,updateValues:R}),Object(dr.jsx)(ni.a,{onClick:function(e){e.preventDefault(),O([].concat(Object(Xr.a)(g),[{contextName:"userId",values:[]}]))},children:"Add override"})," "]})})},xs={showDialog:!1,editVariant:void 0,editIndex:-1},vs=function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(S.a)(this,n),(a=t.call(this,e)).closeDialog=function(){a.setState(Object(x.a)({},xs))},a.openAddVariant=function(e){e.preventDefault(),a.setState({showDialog:!0,editVariant:void 0,editIndex:void 0,title:"Add variant"})},a.openEditVariant=function(e,t,n){e.preventDefault(),a.props.editable&&a.setState({showDialog:!0,editVariant:n,editIndex:t,title:"Edit variant"})},a.validateName=function(e){if(!e)return{name:"Name is required"}},a.onRemoveVariant=function(e,t){e.preventDefault();try{a.props.removeVariant(t)}catch(e){console.log("An exception was caught.")}},a.renderVariant=function(e,t){return Object(dr.jsx)(ls,{variant:e,editVariant:function(n){return a.openEditVariant(n,t,e)},removeVariant:function(e){return a.onRemoveVariant(e,t)},editable:a.props.editable},e.name)},a.renderVariants=function(e){return Object(dr.jsxs)(us.a,{className:ss.a.variantTable,children:[Object(dr.jsx)(ds.a,{children:Object(dr.jsxs)(is.a,{children:[Object(dr.jsx)(cs.a,{children:"Variant name"}),Object(dr.jsx)(cs.a,{className:ss.a.labels}),Object(dr.jsx)(cs.a,{children:"Weight"}),Object(dr.jsx)(cs.a,{children:"Weight Type"}),Object(dr.jsx)(cs.a,{className:ss.a.actions})]})}),Object(dr.jsx)(js.a,{children:e.map(a.renderVariant)})]})},a.renderStickiness=function(e){var t=a.props,n=t.updateStickiness,r=t.stickinessOptions;if(!e||e.length<2)return null;var i=e[0].stickiness||"default",c=r.map((function(e){return{key:e,label:e}}));r.includes(i)||c.push({key:i,label:i});return Object(dr.jsxs)("section",{style:{paddingTop:"16px"},children:[Object(dr.jsx)(Yr,{label:"Stickiness",options:c,value:i,onChange:function(e){return n(e.target.value)}}),"\xa0\xa0",Object(dr.jsxs)("small",{className:fr()(ss.a.paragraph,ss.a.helperText),style:{display:"block",marginTop:"0.5rem"},children:["By overriding the stickiness you can control which parameter you want to be used in order to ensure consistent traffic allocation across variants."," ",Object(dr.jsx)("a",{href:"https://unleash.github.io/docs/toggle_variants",target:"_blank",rel:"noreferrer",children:"Read more"})]})]})},a.state=Object(x.a)({},xs),a}return Object(sr.a)(n,[{key:"render",value:function(){var e=this.state,t=e.showDialog,n=e.editVariant,a=e.editIndex,r=e.title,i=this.props,c=i.variants,o=i.addVariant,s=i.updateVariant,l=n?s.bind(null,a):o;return Object(dr.jsxs)("section",{style:{padding:"16px"},children:[Object(dr.jsxs)(Rr.a,{variant:"body1",children:["Variants allows you to return a variant object if the feature toggle is considered enabled for the current request. When using variants you should use the"," ",Object(dr.jsx)("code",{style:{color:"navy"},children:"getVariant()"})," method in the Client SDK."]}),Object(dr.jsx)(hr,{condition:c.length>0,show:this.renderVariants(c),elseShow:Object(dr.jsx)("p",{children:"No variants defined."})}),Object(dr.jsx)("br",{}),Object(dr.jsx)(hr,{condition:this.props.editable,show:Object(dr.jsxs)("div",{children:[Object(dr.jsx)(ni.a,{title:"Add variant",onClick:this.openAddVariant,variant:"contained",color:"primary",className:ss.a.addVariantButton,children:"Add variant"}),this.renderStickiness(c)]})}),Object(dr.jsx)(Os,{showDialog:t,closeDialog:this.closeDialog,save:l,validateName:this.validateName,editVariant:n,title:r})]})}}]),n}(a.Component),ys=Object(l.b)((function(e,t){return{variants:t.featureToggle.variants||[],stickinessOptions:["default"].concat(Object(Xr.a)(e.context.filter((function(e){return e.stickiness})).map((function(e){return e.name}))))}}),(function(e,t){return{addVariant:function(n){var a=t.featureToggle,r=a.variants||[],i=[].concat(Object(Xr.a)(r),[n]);return pi(i,1e3),je(a,i)(e)},removeVariant:function(n){var a=t.featureToggle,r=(a.variants||[]).filter((function(e,t){return t!==n}));r.length>0&&pi(r,1e3),je(a,r)(e)},updateVariant:function(n,a){var r=t.featureToggle,i=(r.variants||[]).map((function(e,t){return t===n?a:e}));pi(i,1e3),je(r,i)(e)},updateStickiness:function(n){var a=t.featureToggle;je(a,(a.variants||[]).map((function(e){return Object(x.a)(Object(x.a)({},e),{},{stickiness:n})})))(e)}}}))(vs),_s=n(176),ws=n.n(_s),Cs=n(175),Ts=n.n(Cs),Ss=function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(S.a)(this,n),(a=t.call(this,e)).onEditMode=function(e,t){t.preventDefault(),a.setState({editMode:!0,description:e})},a.updateValue=function(e){e.preventDefault(),a.setState({description:e.target.value})},a.onSave=function(e){e.preventDefault(),a.props.update(a.state.description),a.setState({editMode:!1,description:void 0})},a.onCancel=function(e){e.preventDefault(),a.setState({editMode:!1,description:void 0})},a.state={editMode:!1},a}return Object(sr.a)(n,[{key:"renderRead",value:function(e){var t=e.description,n=e.editable;return Object(dr.jsx)(Hr.a,{size:"small",variant:"outlined",children:Object(dr.jsxs)(Rr.a,{children:[t||"No feature toggle description",Object(dr.jsx)(hr,{condition:n,show:Object(dr.jsx)(yr.a,{"aria-label":"toggle description edit",to:"#edit",component:o.b,onClick:this.onEditMode.bind(this,t),children:Object(dr.jsx)(ws.a,{})})})]})})}},{key:"renderEdit",value:function(){var e=this.state.description;return Object(dr.jsxs)("div",{children:[Object(dr.jsx)(Vr.a,{className:Ts.a.descriptionInput,label:"Description",required:!0,multiline:!0,rows:4,variant:"outlined",value:e,onChange:this.updateValue}),Object(dr.jsxs)("div",{style:{marginTop:"0.5rem"},children:[Object(dr.jsx)(ni.a,{type:"submit",color:"primary",variant:"contained",onClick:this.onSave,children:"Save"}),"\xa0",Object(dr.jsx)(ni.a,{type:"cancel",onClick:this.onCancel,children:"Cancel"})]})]})}},{key:"render",value:function(){return this.state.editMode?this.renderEdit(this.props):this.renderRead(this.props)}}]),n}(r.a.Component),Es=n(142),ks=n.n(Es);function Ns(e){var t,n=e.stale,a=e.style,r=e.showActive;if(!n&&!(void 0===r||r))return null;var i=fr()((t={},Object(Ai.a)(t,ks.a.stale,n),Object(Ai.a)(t,ks.a.active,!n),t)),c=n?"Feature toggle is deprecated.":"Feature toggle is active.",o=n?"Stale":"Active";return Object(dr.jsx)(Hi.a,{style:a,title:c,className:i,label:o})}var As=Object(a.memo)(Ns),Rs=n.p+"static/media/slack.044efd1b.svg",Is=n.p+"static/media/jira.1b79d9d0.svg",Ds=n.p+"static/media/webhooks.bd12f4cb.svg";var Ls=function(e){var t=e.tags,n=e.tagTypes,r=e.featureToggleName,i=e.untagFeature,c=Object(a.useState)(!1),o=Object(Sr.a)(c,2),s=o[0],l=o[1],u=Object(a.useState)(void 0),d=Object(Sr.a)(u,2),j=d[0],h=d[1],b=function(e){var t=n.find((function(t){return t.name===e})),a={width:"20px",height:"20px",marginRight:"5px"};if(!t||!t.icon)return Object(dr.jsx)("span",{children:e[0].toUpperCase()});switch(t.name){case"slack":return Object(dr.jsx)("img",{style:a,alt:"slack",src:T(Rs)});case"jira":return Object(dr.jsx)("img",{style:a,alt:"jira",src:T(Is)});case"webhook":return Object(dr.jsx)("img",{style:a,alt:"webhook",src:T(Ds)});default:return Object(dr.jsx)(_r.a,{children:"label"})}};return Object(dr.jsx)(hr,{condition:t&&t.length>0,show:Object(dr.jsxs)("div",{children:[Object(dr.jsx)(bs,{open:s,onClose:function(){l(!1),h(void 0)},onClick:function(){i(r,j),h(void 0),l(!1)},title:"Are you sure you want to delete this tag?"}),Object(dr.jsx)("p",{style:{marginBottom:0},children:"Tags"}),t.map((function(e){return Object(dr.jsx)(Hi.a,{icon:b(e.type),style:{marginRight:"3px",fontSize:"0.8em"},label:e.value,onDelete:function(){h(e),l(!0)}},"".concat(e.type,":").concat(e.value))}))]})})},Ps=n(194),Fs=function(e){var t=e.renderOptions,n=e.id,a=e.title,i=e.callback,c=e.icon,o=void 0===c?"arrow_drop_down":c,s=e.label,l=e.startIcon,u=Object(ur.a)(e,["renderOptions","id","title","callback","icon","label","startIcon"]),d=r.a.useState(null),j=Object(Sr.a)(d,2),h=j[0],b=j[1];return Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(ro,Object(x.a)({id:n,label:s,title:a,startIcon:l,onClick:function(e){return b(e.currentTarget)},"aria-controls":n,"aria-haspopup":"true",icon:o},u)),Object(dr.jsx)(Ps.a,{id:n,className:eo.a.dropdownMenu,onClick:function(e){i&&"function"===typeof i&&i(e),b(null)},anchorEl:h,open:Boolean(h),children:t()})]})};function Us(e){var t=e.stale,n=e.updateStale;return Object(dr.jsx)(Fs,{callback:function(e){var t;"active"===(t=e.target.getAttribute("data-target"))?n(!1):"stale"===t&&n(!0)},renderOptions:function(){return[Object(dr.jsx)(Mr.a,{disabled:!t,"data-target":"active",children:"Set toggle Active"},"status_update_0"),Object(dr.jsx)(Mr.a,{disabled:t,"data-target":"stale",children:"Mark toggle as Stale"},"status_update_1")]},id:"feature-stale-dropdown",label:t?"STALE":"ACTIVE",style:{fontWeight:"500"}})}var Vs=n(331),Gs=function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(sr.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchTagTypes&&this.props.fetchTagTypes()}},{key:"render",value:function(){var e=this.props,t=e.value,n=e.types,a=e.onChange,r=(e.fetchTagTypes,Object(ur.a)(e,["value","types","onChange","fetchTagTypes"])),i=n.map((function(e){return{key:e.name,label:e.name,title:e.name}}));return Object(dr.jsx)(Yr,Object(x.a)({label:"Tag type",options:i,value:t,onChange:a},r))}}]),n}(a.Component),Bs=Object(l.b)((function(e,t){return Object(x.a)({types:e.tagTypes.toJS()},t)}),{fetchTagTypes:ct})(Gs),Ms=n(177),Hs=n.n(Ms),zs=function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(S.a)(this,n),(a=t.call(this,e)).setValue=function(e,t){var n=a.state.tag;n[e]=bi(t),a.setState({tag:n,dirty:!0})},a.onCancel=function(e){e.preventDefault(),a.setState({openDialog:!1,tag:{type:"simple",value:""}})},a.onSubmit=function(){var e=Object(_.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(n=a.state.tag).type||(n.type="simple"),e.prev=3,e.next=6,a.props.submit(a.props.featureToggleName,n);case 6:a.setState({openDialog:!1,tag:{type:"simple",value:""}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),a.setState({errors:{general:e.t0.message}});case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),a.state={openDialog:!1,errors:{},currentLegalValue:"",dirty:!1,featureToggleName:e.featureToggleName,tag:e.tag},a}return Object(sr.a)(n,[{key:"handleOpenDialog",value:function(){this.setState({openDialog:!0})}},{key:"handleCancel",value:function(){this.setState({openDialog:!1,tag:{type:"simple",value:""}})}},{key:"render",value:function(){var e=this,t=this.state,n=t.tag,a=t.errors,i=t.openDialog;return Object(dr.jsxs)(r.a.Fragment,{children:[Object(dr.jsx)(ni.a,{onClick:this.handleOpenDialog.bind(this),children:"Add tag"}),Object(dr.jsx)(bs,{open:i,secondaryButtonText:"Cancel",primaryButtonText:"Add tag",title:"Add tags to feature toggle",onClick:this.onSubmit,onClose:this.onCancel,children:Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(Vs.a,{children:"Tags allows you to group features together"}),Object(dr.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(dr.jsxs)("section",{className:Hs.a.dialogueFormContent,children:[Object(dr.jsx)(Bs,{name:"type",value:n.type,onChange:function(t){return e.setValue("type",t.target.value)}}),Object(dr.jsx)("br",{}),Object(dr.jsx)(Vr.a,{variant:"outlined",size:"small",label:"Value",name:"value",placeholder:"Your tag",value:n.value,error:a.value,onChange:function(t){return e.setValue("value",t.target.value)}})]}),a.general&&Object(dr.jsx)("p",{style:{color:"red"},children:a.general})]})]})})]})}}]),n}(a.Component),Js=Object(l.b)((function(){return{tag:{type:"simple",value:""}}}),(function(e){return{submit:function(t,n){return We(t,n)(e)}}}))(zs),Ys=n(332),Ws=n(347),qs=function(e){var t=e.children,n=e.value,a=e.index,r=Object(ur.a)(e,["children","value","index"]);return Object(dr.jsx)("div",Object(x.a)(Object(x.a)({role:"tabpanel",hidden:n!==a,id:"wrapped-tabpanel-".concat(a),"aria-labelledby":"wrapped-tab-".concat(a)},r),{},{children:n===a&&t}))},Zs=Object(mr.a)((function(e){return{tabNav:{backgroundColor:e.palette.tabs.main}}})),Ks=function(e){var t=e.tabData,n=e.className,r=e.startingTab,i=void 0===r?0:r,c=Zs(),o=Object(a.useState)(i),l=Object(Sr.a)(o,2),u=l[0],d=l[1],j=Object(s.g)();return Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(Yc.a,{className:c.tabNav,children:Object(dr.jsx)(Ws.a,{value:u,onChange:function(e,t){d(t)},indicatorColor:"primary",textColor:"primary",centered:!0,children:t.map((function(e,t){return Object(dr.jsx)(Ys.a,Object(x.a)(Object(x.a)({label:e.label},function(e){return{id:"tab-".concat(e),"aria-controls":"tabpanel-".concat(e)}}(t)),{},{onClick:function(){return j.push(e.path)}}),"".concat(e.label,"_").concat(t))}))})}),Object(dr.jsx)("div",{className:n,children:t.map((function(e,t){return Object(dr.jsx)(qs,{value:u,index:t,children:e.component},"tab_panel_".concat(t))}))})]})},Xs=Ks,Qs=n(88),$s=n.n(Qs),el=r.a.createContext(),tl=function(e){var t=e.activeTab,n=e.featureToggleName,r=e.features,i=e.toggleFeature,c=e.setStale,s=e.removeFeatureToggle,l=e.revive,u=e.fetchArchive,d=e.fetchFeatureToggles,j=e.editFeatureToggle,h=e.featureToggle,b=e.history,p=e.untagFeature,f=e.featureTags,m=e.fetchTags,g=e.tagTypes,O=e.user,v=!!d,y=Object(a.useState)(!1),_=Object(Sr.a)(y,2),w=_[0],C=_[1],T=Gi(),S=Object(a.useContext)(el).hasAccess,E=(h||{}).project;Object(a.useEffect)((function(){window.scrollTo(0,0),m(n)}),[]),Object(a.useLayoutEffect)((function(){0===r.length&&(v?d():u())}),[]);var k=v&&S(ho,E),N=function(e){switch(e){case"activation":return Object(dr.jsx)(rs,{featureToggle:h,features:r,history:b,editable:k});case"metrics":return Object(dr.jsx)(ts,{featureToggle:h});case"variants":return Object(dr.jsx)(ys,{featureToggle:h,features:r,history:b,editable:k});case"log":return Object(dr.jsx)(Ho,{toggleName:n});default:return null}};if(!h)return 0===r.length?Object(dr.jsx)(No.a,{}):Object(dr.jsxs)("span",{children:["Could not find the toggle"," ",Object(dr.jsx)(hr,{condition:k,show:Object(dr.jsx)(o.b,{to:{pathname:"/features/create",query:{name:n}},children:n}),elseShow:Object(dr.jsx)("span",{children:"featureToggleName"})})]});var A=function(){var e=v?"features":"archive";return[{label:"Activation",component:N("activation"),name:"strategies",path:"/".concat(e,"/strategies/").concat(n)},{label:"Metrics",component:N("metrics"),name:"metrics",path:"/".concat(e,"/metrics/").concat(n)},{label:"Variants",component:N("variants"),name:"variants",path:"/".concat(e,"/variants/").concat(n)},{label:"Log",component:N("log"),name:"logs",path:"/".concat(e,"/logs/").concat(n)}]}();return Object(dr.jsxs)(Yc.a,{className:T.fullwidth,style:{overflow:"visible"},children:[Object(dr.jsxs)("div",{children:[Object(dr.jsxs)("div",{className:$s.a.header,children:[Object(dr.jsx)(Rr.a,{variant:"h1",className:$s.a.heading,children:h.name}),Object(dr.jsx)(As,{stale:h.stale})]}),Object(dr.jsxs)("div",{className:fr()($s.a.featureInfoContainer,T.contentSpacingY),children:[Object(dr.jsx)(Ss,{isFeatureView:v,description:h.description,update:function(e){var t=Object(x.a)(Object(x.a)({},h),{},{description:e});Array.isArray(t.strategies)&&t.strategies.forEach((function(e){delete e.id})),j(t)},editable:k}),Object(dr.jsxs)("div",{className:$s.a.selectContainer,children:[Object(dr.jsx)(qr,{value:h.type,onChange:function(e){e.preventDefault();var t=e.target.value,n=Object(x.a)(Object(x.a)({},h),{},{type:t});Array.isArray(n.strategies)&&n.strategies.forEach((function(e){delete e.id})),j(n)},label:"Feature type",editable:k}),"\xa0",Object(dr.jsx)(Kr,{value:h.project,onChange:function(e){e.preventDefault();var t=e.target.value,n=Object(x.a)(Object(x.a)({},h),{},{project:t});Array.isArray(n.strategies)&&n.strategies.forEach((function(e){delete e.id})),j(n)},label:"Project",filled:!0,editable:k,filter:Oo(O,jo)})]}),Object(dr.jsx)(Ls,{featureToggleName:h.name,tags:f,tagTypes:g,untagFeature:p})]})]}),Object(dr.jsxs)("div",{className:$s.a.actions,children:[Object(dr.jsx)("span",{style:{paddingRight:"24px"},children:Object(dr.jsx)(hr,{condition:k,show:Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(Gr.a,{disabled:!v,checked:h.enabled,onChange:function(){return i(!h.enabled,h.name)}}),Object(dr.jsx)("span",{children:h.enabled?"Enabled":"Disabled"})]}),elseShow:Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(Gr.a,{disabled:!0,checked:h.enabled}),Object(dr.jsx)("span",{children:h.enabled?"Enabled":"Disabled"})]})})}),Object(dr.jsx)(hr,{condition:v,show:Object(dr.jsxs)("div",{children:[Object(dr.jsx)(Js,{featureToggleName:h.name}),Object(dr.jsx)(ni.a,{title:"Create new feature toggle by cloning configuration",component:o.b,to:"/features/copy/".concat(h.name),children:"Clone"}),Object(dr.jsx)(Us,{stale:h.stale,updateStale:function(e){c(e,n)}}),Object(dr.jsx)(ni.a,{disabled:!S("DELETE_FEATURE",E),onClick:function(){C(!0)},title:"Archive feature toggle",style:{flexShrink:0},children:"Archive"})]}),elseShow:Object(dr.jsx)(ni.a,{disabled:!S(ho,S),onClick:function(){l(h.name),b.push("/features")},style:{flexShrink:0},children:"Revive"})})]}),Object(dr.jsx)("hr",{}),Object(dr.jsx)(Xs,{tabData:A,className:$s.a.tabContentContainer,startingTab:function(e){return A.findIndex((function(t){return t.name===e}))}(t)}),Object(dr.jsx)(bs,{open:w,title:"Are you sure you want to archive this toggle",onClick:function(){C(!1),s(h.name),b.push("/features")},onClose:function(){return C(!1)}})]})},nl=Object(l.b)((function(e,t){return{features:e.features.toJS(),featureToggle:e.features.toJS().find((function(e){return e.name===t.featureToggleName})),featureTags:e.featureTags.toJS(),tagTypes:e.tagTypes.toJS(),activeTab:t.activeTab,user:e.user.toJS()}}),{fetchFeatureToggles:ue,fetchFeatureToggle:function(e){return Y("Start fetching feature toggles"),function(t){return t({type:"START_FETCH_FEATURE_TOGGLE"}),B.fetchFeatureToggle(e).then((function(e){return t((Y("reviced feature toggle",n=e),{type:se,featureToggle:n,receivedAt:Date.now()}));var n})).catch(z(t,"START_FETCH_FEATURE_TOGGLE"))}},toggleFeature:le,setStale:function(e,t){return Y("Set stale property on feature toggle ",t),function(n){n(function(e,t){return function(n){return n({type:Q}),B.setStale(e,t).then((function(a){var r="".concat(t," marked as ").concat(e?"Stale":"Active",".");setTimeout((function(){return n({type:J,error:r})}),1e3),n({type:Z,featureToggle:a,info:r})})).catch(z(n,ae))}}(e,t))}},removeFeatureToggle:function(e){return function(t){return t({type:"START_REMOVE_FEATURE_TOGGLE"}),B.remove(e).then((function(){return t({type:q,featureToggleName:e})})).catch(z(t,re))}},editFeatureToggle:function(e){return Y("Update feature toggle ",e),function(t){t(function(e){return function(t){return t({type:Q}),B.update(e).then((function(){var n="".concat(e.name," successfully updated!");setTimeout((function(){return t({type:J,error:n})}),1e3),t({type:Z,featureToggle:e,info:n})})).catch(z(t,ae))}}(e))}},tagFeature:We,untagFeature:function(e,t){return function(n){return n({type:"START_UNTAG_FEATURE_TOGGLE"}),He.untagFeature(e,t).then((function(){return n({type:Je,featureToggle:e,tag:t})})).catch(z(n,"ERROR_UNTAG_FEATURE_TOGGLE"))}},fetchTags:qe})(tl),al=function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(sr.a)(n,[{key:"render",value:function(){var e=this.props,t=e.match.params,n=e.history;return Object(dr.jsx)(nl,{featureToggleName:t.name,activeTab:t.activeTab,history:n})}}]),n}(a.PureComponent),rl=n(178),il=n.n(rl),cl=Object(mr.a)((function(e){return{typeChip:{margin:"0 8px",boxShadow:e.boxShadows.chip.main,backgroundColor:e.palette.chips.main}}})),ol=function(e){var t=e.type,n=e.types,a=e.onClick,r=cl(),i=n.find((function(e){return e.id===t}))||{id:t,name:t};return Object(dr.jsx)(Hi.a,{className:r.typeChip,title:i.description,label:i.name,onClick:a})},sl=Object(a.memo)(ol),ll=Object(l.b)((function(e){return{types:e.featureTypes.toJS()}}))(sl),ul=Object(mr.a)((function(e){return{listItem:{padding:"0",margin:"1rem 0"},listItemMetric:{width:"40px",marginRight:"0.25rem",flexShrink:"0"},listItemSvg:{fill:e.palette.icons.lightGrey},listItemLink:{marginLeft:"10px",minWidth:"0"},listItemStrategies:{marginLeft:"auto"}}})),dl=function(e){var t=e.feature,n=e.toggleFeature,a=e.settings,r=e.metricsLastHour,i=void 0===r?{yes:0,no:0,isFallback:!0}:r,c=e.metricsLastMinute,s=void 0===c?{yes:0,no:0,isFallback:!0}:c,l=e.revive,u=e.hasAccess,d=Object(ur.a)(e,["feature","toggleFeature","settings","metricsLastHour","metricsLastMinute","revive","hasAccess"]),j=ul(),h=t.name,b=t.description,p=t.enabled,f=t.type,m=t.stale,g=t.createdAt,O=t.project,v=a.showLastHour,y=void 0!==v&&v,_=y?i.isFallback:s.isFallback,w=1*(y?oo(i.yes,i.yes+i.no,0):oo(s.yes,s.yes+s.no,0)),C=void 0===n?"/archive/strategies/".concat(h):"/features/strategies/".concat(h);return Object(dr.jsxs)(Zc.a,Object(x.a)(Object(x.a)({},d),{},{className:fr()(j.listItem,d.className),children:[Object(dr.jsx)("span",{className:j.listItemMetric,children:Object(dr.jsx)(qo,{strokeWidth:15,percentage:w,isFallback:_})}),Object(dr.jsx)("span",{className:j.listItemToggle,children:Object(dr.jsx)(hr,{condition:u(ho,O),show:Object(dr.jsx)(Gr.a,{disabled:void 0===n,title:"Toggle ".concat(h),onChange:function(){return n(!p,h)},checked:p},"left-actions"),elseShow:Object(dr.jsx)(Gr.a,{disabled:!0,title:"Toggle ".concat(h),checked:p},"left-actions")})}),Object(dr.jsx)("span",{className:fr()(j.listItemLink),children:Object(dr.jsxs)(o.b,{to:C,className:fr()(eo.a.listLink,eo.a.truncate),children:[Object(dr.jsxs)("span",{className:eo.a.toggleName,children:[h,"\xa0"]}),Object(dr.jsx)("small",{children:Object(dr.jsx)(il.a,{date:g,live:!1})}),Object(dr.jsx)("div",{children:Object(dr.jsx)("span",{className:eo.a.truncate,children:Object(dr.jsx)("small",{children:b})})})]})}),Object(dr.jsxs)("span",{className:fr()(j.listItemStrategies,eo.a.hideLt920),children:[Object(dr.jsx)(As,{stale:m,showActive:!1}),Object(dr.jsx)(ll,{type:f})]}),Object(dr.jsx)(hr,{condition:l&&u(ho,O),show:Object(dr.jsx)(yr.a,{onClick:function(){return l(t.name)},children:Object(dr.jsx)(_r.a,{children:"undo"})}),elseShow:Object(dr.jsx)("span",{})})]}))},jl=Object(a.memo)(dl),hl=n(179),bl=n(197),pl=n(180),fl=n.n(pl),ml=Object(mr.a)((function(e){var t;return{search:(t={display:"flex",alignItems:"center",backgroundColor:e.palette.searchField.main,borderRadius:e.borders.radius.main,padding:"0.25rem 0.5rem",maxWidth:"450px"},Object(Ai.a)(t,e.breakpoints.down("sm"),{margin:"0 auto"}),Object(Ai.a)(t,e.breakpoints.down("xs"),{width:"100%"}),t),searchIcon:{marginRight:"8px"},inputRoot:{width:"100%"}}}));var gl=function(e){var t=e.value,n=void 0===t?"":t,r=e.updateValue,i=e.className,c=ml(),o=Object(a.useState)(n),s=Object(Sr.a)(o,2),l=s[0],u=s[1],d=Object(hl.debounce)(r,500);return Object(dr.jsx)("div",{children:Object(dr.jsxs)("div",{className:fr()(c.search,i),children:[Object(dr.jsx)(fl.a,{className:c.searchIcon}),Object(dr.jsx)(bl.a,{placeholder:"Search\u2026",classes:{root:c.inputRoot,input:c.input},inputProps:{"aria-label":"search"},value:l,onChange:function(e){e.preventDefault();var t=e.target.value||"";u(t),d(t)},onBlur:function(){r(l)},onKeyPress:function(e){"Enter"===e.key&&r(l)}})]})})},Ol={id:"*",name:"> All projects"},xl=function(e){var t=e.projects,n=e.currentProjectId,a=e.updateCurrentProject,i=Object(ur.a)(e,["projects","currentProjectId","updateCurrentProject"]),c=t.find((function(e){return e.id===n}));c||(c=Ol);i.updateSetting,i.fetchProjects;var o=Object(ur.a)(i,["updateSetting","fetchProjects"]);return Object(dr.jsx)(r.a.Fragment,{children:Object(dr.jsx)(Fs,Object(x.a)({id:"project",title:"Select project",label:"".concat(c.name),callback:function(e){!function(e){var t="string"===typeof e?e.trim():"";a(t)}(e.target.getAttribute("data-target"))},renderOptions:function(){var e=[Object(dr.jsx)(Mr.a,{disabled:c===Ol,"data-target":Ol.id,children:Ol.name},Ol.id)];return[].concat(e,Object(Xr.a)(t.map((function(e){return t=n,a=e,Object(dr.jsx)(Mr.a,{disabled:t===a.id,"data-target":a.id,children:a.name},a.id);var t,a}))))},className:""},o))})},vl=Object(l.b)((function(e,t){return{projects:e.projects.toJS(),currentProjectId:t.settings.currentProjectId||"*",updateCurrentProject:function(e){return t.updateSetting("currentProjectId",e)}}}),{fetchProjects:kn})(xl),yl=Object(mr.a)({actions:{"& > *":{margin:"0 0.25rem"},marginRight:"0.25rem",display:"flex",alignItems:"center"}}),_l=function(e){var t=Object(a.createRef)();return Object(a.useLayoutEffect)((function(){t.current&&t.current.querySelectorAll("[data-loading]").forEach((function(t){e?t.classList.add("skeleton"):t.classList.remove("skeleton")}))}),[e,t]),t},wl=[{type:"name",displayName:"Name"},{type:"type",displayName:"Type"},{type:"enabled",displayName:"Enabled"},{type:"stale",displayName:"Stale"},{type:"created",displayName:"Created"},{type:"Last seen",displayName:"Last seen"},{type:"strategies",displayName:"Strategies"},{type:"metrics",displayName:"Metrics"}],Cl=function(e){var t=e.settings,n=e.setSort,a=e.toggleMetrics,r=e.updateSetting,i=e.loading,c=yl(),o=_l(i);return Object(dr.jsxs)("div",{className:c.actions,ref:o,children:[Object(dr.jsx)(Rr.a,{variant:"body2","data-loading":!0,children:"Sorted by:"}),Object(dr.jsx)(Fs,{id:"metric",label:"Last ".concat(t.showLastHour?"hour":"minute"),title:"Metric interval",callback:a,renderOptions:function(){return[Object(dr.jsx)(io,{icon:"hourglass_empty",disabled:!t.showLastHour,"data-target":"minute",label:"Last minute"},1),Object(dr.jsx)(io,{icon:"hourglass_full",disabled:t.showLastHour,"data-target":"hour",label:"Last hour"},2)]},className:"",style:{textTransform:"lowercase"},"data-loading":!0}),Object(dr.jsx)(Fs,{id:"sorting",label:"By ".concat(t.sort),callback:function(e){var t=e.target.getAttribute("data-target");n(t)},renderOptions:function(){return wl.map((function(e){return Object(dr.jsx)(Mr.a,{disabled:(n=e.type,t.sort===n),"data-target":e.type,children:e.displayName},e.type);var n}))},title:"Sort by",className:"",style:{textTransform:"lowercase"},"data-loading":!0}),Object(dr.jsx)(vl,{settings:t,updateSetting:r,style:{textTransform:"lowercase"},"data-loading":!0})]})},Tl=[{createdAt:"2021-03-19T09:16:21.329Z",description:"",enabled:!0,lastSeenAt:"2021-03-24T10:46:38.036Z",name:"one",project:"default",reviveName:"cool-thing",stale:!0,strategies:[],variants:[],type:"release"},{createdAt:"2021-03-19T09:16:21.329Z",description:"",enabled:!0,lastSeenAt:"2021-03-24T10:46:38.036Z",name:"two",project:"default",reviveName:"cool-thing",stale:!0,strategies:[],variants:[],type:"release"},{createdAt:"2021-03-19T09:16:21.329Z",description:"",enabled:!0,lastSeenAt:"2021-03-24T10:46:38.036Z",name:"three",project:"default",reviveName:"cool-thing",stale:!0,strategies:[],variants:[],type:"release"},{createdAt:"2021-03-19T09:16:21.329Z",description:"",enabled:!0,lastSeenAt:"2021-03-24T10:46:38.036Z",name:"four",project:"default",reviveName:"cool-thing",stale:!0,strategies:[],variants:[],type:"release"},{createdAt:"2021-03-19T09:16:21.329Z",description:"",enabled:!0,lastSeenAt:"2021-03-24T10:46:38.036Z",name:"five",project:"default",reviveName:"cool-thing",stale:!0,strategies:[],variants:[],type:"release"},{createdAt:"2021-03-19T09:16:21.329Z",description:"",enabled:!0,lastSeenAt:"2021-03-24T10:46:38.036Z",name:"six",project:"default",reviveName:"cool-thing",stale:!0,strategies:[],variants:[],type:"release"},{createdAt:"2021-03-19T09:16:21.329Z",description:"",enabled:!0,lastSeenAt:"2021-03-24T10:46:38.036Z",name:"seven",project:"default",reviveName:"cool-thing",stale:!0,strategies:[],variants:[],type:"release"},{createdAt:"2021-03-19T09:16:21.329Z",description:"",enabled:!0,lastSeenAt:"2021-03-24T10:46:38.036Z",name:"eight",project:"default",reviveName:"cool-thing",stale:!0,strategies:[],variants:[],type:"release"},{createdAt:"2021-03-19T09:16:21.329Z",description:"",enabled:!0,lastSeenAt:"2021-03-24T10:46:38.036Z",name:"nine",project:"default",reviveName:"cool-thing",stale:!0,strategies:[],variants:[],type:"release"},{createdAt:"2021-03-19T09:16:21.329Z",description:"",enabled:!0,lastSeenAt:"2021-03-24T10:46:38.036Z",name:"ten",project:"default",reviveName:"cool-thing",stale:!0,strategies:[],variants:[],type:"release"}],Sl=Object(mr.a)((function(e){return{actionsContainer:{display:"flex",alignItems:"center"},listParagraph:{textAlign:"center"},searchBarContainer:{marginBottom:"2rem"},emptyStateListItem:{border:"2px dashed ".concat(e.palette.borders.main),padding:"0.8rem",textAlign:"center",display:"flex",justifyContent:"space-between",alignItems:"center"}}})),El=Object(mr.a)((function(e){return{emptyStateListItem:{border:"2px dashed ".concat(e.palette.borders.main),padding:"0.8rem",textAlign:"center",display:"flex",justifyContent:"space-between",alignItems:"center"}}})),kl=function(e){var t=e.text,n=e.link,a=e.linkText,r=El();return Object(dr.jsxs)(Zc.a,{className:r.emptyStateListItem,children:[t,Object(dr.jsx)(br,{condition:Boolean(n&&a),show:Object(dr.jsx)(o.b,{to:"/features/create",children:"Add your first toggle"})})]})},Nl=function(e){var t=e.fetcher,n=e.features,r=e.settings,i=e.revive,c=e.currentProjectId,s=e.updateSetting,l=e.featureMetrics,u=e.toggleFeature,d=e.archive,j=e.loading,h=Object(a.useContext)(el).hasAccess,b=Sl(),p=Object(Er.a)("(max-width:800px)");Object(a.useLayoutEffect)((function(){t()}),[t]);return Object(dr.jsxs)("div",{className:b.featureContainer,children:[Object(dr.jsx)("div",{className:b.searchBarContainer,children:Object(dr.jsx)(gl,{value:r.filter,updateValue:s.bind(undefined,"filter"),className:fr()(b.searchBar,{skeleton:j})})}),Object(dr.jsx)(qc,{headerContent:Object(dr.jsx)(ii,{loading:j,title:"Feature toggles",actions:Object(dr.jsxs)("div",{className:b.actionsContainer,children:[Object(dr.jsx)(hr,{condition:!p,show:Object(dr.jsx)(Cl,{settings:r,toggleMetrics:function(){s("showLastHour",!r.showLastHour)},setSort:function(e){s("sort","string"===typeof e?e.trim():"")},updateSetting:s,loading:j})}),Object(dr.jsx)(hr,{condition:!d,show:Object(dr.jsx)(hr,{condition:p,show:Object(dr.jsx)(Ir.a,{title:"Create feature toggle",children:Object(dr.jsx)(yr.a,{component:o.b,to:"/features/create","data-test":"add-feature-btn",disabled:!h(jo,c),children:Object(dr.jsx)(_r.a,{children:"add"})})}),elseShow:Object(dr.jsx)(ni.a,{to:"/features/create","data-test":"add-feature-btn",color:"primary",variant:"contained",component:o.b,disabled:!h(jo,c),className:fr()({skeleton:j}),children:"Create feature toggle"})})})]})}),children:Object(dr.jsx)(Pr.a,{children:(n.forEach((function(e){e.reviveName=e.name})),j?Tl.map((function(e){return Object(dr.jsx)(jl,{settings:r,metricsLastHour:l.lastHour[e.name],metricsLastMinute:l.lastMinute[e.name],feature:e,toggleFeature:u,revive:i,hasAccess:h,className:"skeleton"},e.name)})):Object(dr.jsx)(hr,{condition:n.length>0,show:n.map((function(e){return Object(dr.jsx)(jl,{settings:r,metricsLastHour:l.lastHour[e.name],metricsLastMinute:l.lastMinute[e.name],feature:e,toggleFeature:u,revive:i,hasAccess:h},e.name)})),elseShow:Object(dr.jsx)(hr,{condition:d,show:Object(dr.jsx)(Zc.a,{className:b.emptyStateListItem,children:"No archived features."}),elseShow:Object(dr.jsx)(kl,{text:"No features available. Get started by adding a new feature toggle.",link:"/features/create",linkText:"Add your first toggle"})})}))})})]})};function Al(e){return e.currentProjectId&&"*"!==e.currentProjectId?e.currentProjectId:"default"}var Rl=function(e){return function(t){var n=t.featureMetrics.toJS(),a=t.settings.toJS().feature||{},r=e?t.features.toJS():t.archive.get("list").toArray();if(a.currentProjectId&&"*"!==a.currentProjectId&&(r=r.filter((function(e){return e.project===a.currentProjectId}))),a.filter)try{var i=new RegExp(a.filter,"i");r=r.filter((function(e){return e.strategies.some((function(e){return function(e,t){if(e.constraints)return e.constraints.some((function(e){return e.values.some((function(e){return t.test(e)}))}))}(e,i)}))||i.test(e.name)||i.test(e.description)||e.strategies.some((function(e){return e&&e.name&&i.test(e.name)}))||a.filter.length>1&&i.test(JSON.stringify(e))}))}catch(o){}if(a.sort||(a.sort="name"),"enabled"===a.sort)r=r.sort((function(e,t){return e.enabled===t.enabled?0:e.enabled?-1:1}));else if("stale"===a.sort)r=r.sort((function(e,t){return e.stale===t.stale?0:e.stale?-1:1}));else if("created"===a.sort)r=r.sort((function(e,t){return new Date(e.createdAt)>new Date(t.createdAt)?-1:1}));else if("Last seen"===a.sort)r=r.sort((function(e,t){return new Date(e.lastSeenAt)>new Date(t.lastSeenAt)?-1:1}));else if("name"===a.sort)r=r.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}));else if("strategies"===a.sort)r=r.sort((function(e,t){return e.strategies.length>t.strategies.length?-1:1}));else if("type"===a.sort)r=r.sort((function(e,t){return e.type<t.type?-1:e.type>t.type?1:0}));else if("metrics"===a.sort){var c=a.showLastHour?n.lastHour:n.lastMinute;r=r.sort((function(e,t){return c[e.name]?c[t.name]?c[e.name].yes>c[t.name].yes?-1:1:-1:1}))}return{features:r,currentProjectId:Al(a),featureMetrics:n,archive:!e,settings:a,loading:t.apiCalls.fetchTogglesState.loading}}},Il=Rl(!0),Dl={toggleFeature:le,fetcher:function(){return ue()},updateSetting:ra("feature")},Ll=Object(l.b)(Il,Dl)(Nl),Pl=function(e){var t=e.history;return Object(dr.jsx)(Ll,{history:t})},Fl=n(353),Ul=[{key:"string",label:"string"},{key:"percentage",label:"percentage"},{key:"list",label:"list"},{key:"number",label:"number"},{key:"boolean",label:"boolean"}],Vl=function(e){var t=e.set,n=e.input,a=void 0===n?{}:n,r=e.index;return Object(dr.jsxs)("div",{className:eo.a.contentSpacing,children:[Object(dr.jsx)(Vr.a,{style:{width:"50%",marginRight:"5px"},label:"Parameter name ".concat(r+1),onChange:function(e){var n=e.target;return t({name:n.value},!0)},value:a.name||"",variant:"outlined",size:"small"}),Object(dr.jsx)(Yr,{label:"Type",options:Ul,value:a.type||"string",onChange:function(e){t({type:e.target.value})},id:"prop-type-".concat(r,"-select")}),Object(dr.jsx)(Vr.a,{style:{width:"100%"},rows:2,multiline:!0,label:"Parameter name ".concat(r+1," description"),onChange:function(e){var n=e.target;return t({description:n.value})},value:a.description||"",variant:"outlined",size:"small"}),Object(dr.jsx)(Sc.a,{control:Object(dr.jsx)(Fl.a,{checked:!!a.required,onChange:function(){return t({required:!a.required})}}),label:"Required"})]})};var Gl=function(e){var t,n=e.input,a=void 0===n?[]:n,r=e.count,i=void 0===r?0:r,c=e.updateParameter;return Object(dr.jsx)("div",{children:(t=i,Array.from(Array(t))).map((function(e,t){return Object(dr.jsx)(Vl,{set:function(e){return c(t,e,!0)},index:t,input:a[t]},t)}))})},Bl=function(e){var t=e.input,n=e.setValue,a=e.appParameter,r=e.onCancel,i=e.editMode,c=void 0!==i&&i,o=e.errors,s=e.onSubmit,l=e.clearErrors,u=e.updateParameter;return Object(dr.jsxs)(qc,{headerContent:c?"Edit strategy":"Create a new strategy",children:[Object(dr.jsx)(hr,{condition:c,show:Object(dr.jsx)(Rr.a,{variant:"body1",children:"Be careful! Changing a strategy definition might also require changes to the implementation in the clients."})}),Object(dr.jsxs)("form",{onSubmit:s,className:eo.a.contentSpacing,style:{maxWidth:"400px"},children:[Object(dr.jsx)(Vr.a,{label:"Strategy name",name:"name",placeholder:"",disabled:c,error:Boolean(o.name),helperText:o.name,onChange:function(e){var t=e.target;l(),n("name",bi(t.value))},value:t.name,variant:"outlined",size:"small"}),Object(dr.jsx)(Vr.a,{className:eo.a.fullwidth,multiline:!0,rows:2,label:"Description",name:"description",placeholder:"",onChange:function(e){var t=e.target;return n("description",t.value)},value:t.description,variant:"outlined",size:"small"}),Object(dr.jsx)(Gl,{input:t.parameters,count:t.parameters.length,updateParameter:u}),Object(dr.jsx)(ni.a,{onClick:function(e){e.preventDefault(),a()},startIcon:Object(dr.jsx)(_r.a,{children:"add"}),children:"Add parameter"}),Object(dr.jsx)(hr,{condition:c,show:Object(dr.jsx)(ni.a,{type:"submit",variant:"contained",color:"primary",style:{display:"block"},children:"Update"}),elseShow:Object(dr.jsx)(ao,{submitText:"Create",onCancel:r})})]})]})},Ml=function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(S.a)(this,n),(a=t.call(this,e)).clearErrors=function(){a.setState({errors:{}})},a.appParameter=function(){var e=a.state.strategy;e.parameters=[].concat(Object(Xr.a)(e.parameters),[{}]),a.setState({strategy:e,dirty:!0})},a.updateParameter=function(e,t){var n=a.state.strategy,r=Object(Xr.a)(n.parameters),i=Object(x.a)({},r[e]);r[e]=Object.assign({},i,t),n.parameters=r,a.setState({strategy:n})},a.setValue=function(e,t){var n=a.state.strategy;n[e]=t,a.setState({strategy:n,dirty:!0})},a.onSubmit=function(){var e=Object(_.a)(y.a.mark((function e(t){var n,r,i,c,o,s,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=a.props,r=n.createStrategy,i=n.updateStrategy,c=n.history,o=n.editMode,s=a.state.strategy,l=(s.parameters||[]).filter((function(e){return!!e.name})).map((function(e){var t=e.name,n=e.type,a=void 0===n?"string":n,r=e.description,i=void 0===r?"":r,c=e.required;return{name:t,type:a,description:i,required:void 0!==c&&c}})),s.parameters=l,!o){e.next=11;break}return e.next=8,i(s);case 8:c.push("/strategies/view/".concat(s.name)),e.next=20;break;case 11:return e.prev=11,e.next=14,r(s);case 14:c.push("/strategies"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(11),e.t0.toString().includes("Error: Strategy with name")&&a.setState({errors:{name:"A strategy with this name already exists "}});case 20:case"end":return e.stop()}}),e,null,[[11,17]])})));return function(t){return e.apply(this,arguments)}}(),a.onCancel=function(e){e.preventDefault();var t=a.props,n=t.history,r=t.editMode,i=a.state.strategy;r?n.push("/strategies/view/".concat(i.name)):n.push("/strategies")},a.state={strategy:a.props.strategy,errors:{},dirty:!1},a}return Object(sr.a)(n,[{key:"render",value:function(){return Object(dr.jsx)(Bl,{onSubmit:this.onSubmit,onCancel:this.onCancel,setValue:this.setValue,updateParameter:this.updateParameter,appParameter:this.appParameter,input:this.state.strategy,errors:this.state.errors,editMode:this.props.editMode,clearErrors:this.clearErrors})}}]),n}(a.Component),Hl={createStrategy:function(e){return function(t){return t({type:"START_CREATE_STRATEGY"}),Ot.create(e).then((function(){return t(function(e){return{type:yt,strategy:e}}(e))})).then((function(){It("Strategy successfully created.",t)})).catch((function(e){throw z(t,kt),e}))}},updateStrategy:function(e){return function(t){return t({type:"START_UPDATE_STRATEGY"}),Ot.update(e).then((function(){return t(function(e){return{type:_t,strategy:e}}(e))})).then((function(){It("Strategy successfully updated.",t)})).catch(z(t,Nt))}}},zl=Object(l.b)((function(e,t){var n=t.strategy,a=t.editMode;return{strategy:n||{name:fi(),description:"",parameters:[]},editMode:a}}),Hl)(Ml),Jl=function(e){var t=e.history;return Object(dr.jsx)(zl,{history:t})},Yl=function(e){var t=e.toggles;return Object(dr.jsx)(Pr.a,{style:{textAlign:"left"},className:eo.a.truncate,children:Object(dr.jsx)(hr,{condition:t.length>0,show:t.map((function(e){var t=e.name,n=e.description,a=void 0===n?"-":n,r=e.enabled,i=e.icon,c=void 0===i?r?"play_arrow":"pause":i;return Object(dr.jsxs)(Zc.a,{children:[Object(dr.jsx)(Ir.a,{title:r?"Enabled":"Disabled",children:Object(dr.jsx)(Kc.a,{children:Object(dr.jsx)(_r.a,{children:c})})}),Object(dr.jsx)(Qc.a,{primary:Object(dr.jsx)(o.b,{to:"/features/view/".concat(t),children:t},t),secondary:a})]},t)}))})})},Wl=n(181),ql=n.n(Wl),Zl=function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(sr.a)(n,[{key:"renderParameters",value:function(e){return e?e.map((function(e,t){var n=e.name,a=e.type,r=e.description,i=e.required;return Object(dr.jsxs)(Zc.a,{children:[Object(dr.jsx)(hr,{condition:i,show:Object(dr.jsx)(Ir.a,{title:"Required",children:Object(dr.jsx)(Kc.a,{children:Object(dr.jsx)(_r.a,{children:"add"})})}),elseShow:Object(dr.jsx)(Ir.a,{title:"Optional",children:Object(dr.jsx)(Kc.a,{children:Object(dr.jsx)(_r.a,{children:"radio_button_unchecked"})})})}),Object(dr.jsx)(Qc.a,{primary:Object(dr.jsxs)("div",{children:[n," ",Object(dr.jsxs)("small",{children:["(",a,")"]})]}),secondary:r})]},"".concat(n,"-").concat(t))})):Object(dr.jsx)(Zc.a,{children:"(no params)"})}},{key:"render",value:function(){var e=this.props,t=e.strategy,n=e.applications,a=e.toggles,r=t.parameters,i=void 0===r?[]:r;return Object(dr.jsx)("div",{className:ql.a.listcontainer,children:Object(dr.jsxs)(gr.a,{container:!0,children:[Object(dr.jsx)(hr,{condition:t.deprecated,show:Object(dr.jsx)(gr.a,{item:!0,children:Object(dr.jsx)("h5",{style:{color:"#ff0000"},children:"Deprecated"})})}),Object(dr.jsxs)(gr.a,{item:!0,sm:12,md:12,children:[Object(dr.jsx)("h6",{children:"Parameters"}),Object(dr.jsx)("hr",{}),Object(dr.jsx)(Pr.a,{children:this.renderParameters(i)})]}),Object(dr.jsxs)(gr.a,{item:!0,sm:12,md:6,children:[Object(dr.jsx)("h6",{children:"Applications using this strategy"}),Object(dr.jsx)("hr",{}),Object(dr.jsx)(no,{apps:n})]}),Object(dr.jsxs)(gr.a,{item:!0,sm:12,md:6,children:[Object(dr.jsx)("h6",{children:"Toggles using this strategy"}),Object(dr.jsx)("hr",{}),Object(dr.jsx)(Yl,{toggles:a})]})]})})}}]),n}(a.PureComponent),Kl=function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(sr.a)(n,[{key:"componentDidMount",value:function(){this.props.strategy||this.props.fetchStrategies(),this.props.applications&&0!==this.props.applications.length||this.props.fetchApplications(),this.props.toggles&&0!==this.props.toggles.length||this.props.fetchFeatureToggles()}},{key:"render",value:function(){var e=this.props.strategy;if(!e)return null;var t=[{label:"Details",component:Object(dr.jsx)(Zl,{strategy:this.props.strategy,toggles:this.props.toggles,applications:this.props.applications})},{label:"Edit",component:Object(dr.jsx)(zl,{strategy:this.props.strategy,history:this.props.history,editMode:!0})}],n=this.context.hasAccess;return Object(dr.jsx)(qc,{headerContent:e.name,children:Object(dr.jsx)(gr.a,{container:!0,children:Object(dr.jsxs)(gr.a,{item:!0,xs:12,sm:12,children:[Object(dr.jsx)(Rr.a,{variant:"subtitle1",children:e.description}),Object(dr.jsx)(hr,{condition:e.editable&&n("UPDATE_STRATEGY"),show:Object(dr.jsx)("div",{children:Object(dr.jsx)(Ks,{tabData:t})}),elseShow:Object(dr.jsx)("section",{children:Object(dr.jsx)("div",{className:"content",children:Object(dr.jsx)(Zl,{strategy:this.props.strategy,toggles:this.props.toggles,applications:this.props.applications})})})})]})})})}}]),n}(a.Component);Kl.contextType=el;var Xl=Object(l.b)((function(e,t){var n=e.strategies.get("list").find((function(e){return e.name===t.strategyName})),a=e.applications.get("list").filter((function(e){return e.strategies&&e.strategies.includes(t.strategyName)})),r=e.features.filter((function(e){return e.get("strategies").findIndex((function(e){return e.name===t.strategyName}))>-1}));return{strategy:n,strategyName:t.strategyName,applications:a&&a.toJS(),toggles:r&&r.toJS(),activeTab:t.activeTab}}),{fetchStrategies:Dt,fetchApplications:Qn,fetchFeatureToggles:ue})(Kl),Ql=function(e){var t=e.match.params,n=e.history;return Object(dr.jsx)(Xl,{strategyName:t.strategyName,activeTab:t.activeTab,history:n})},$l=Object(mr.a)((function(e){return{listItem:Object(Ai.a)({padding:"0"},"& a",{textDecoration:"none",color:"inherit"}),deprecated:{"& a":{color:e.palette.links.deprecated}}}})),eu=function(e){var t=e.strategies,n=e.fetchStrategies,r=e.removeStrategy,i=e.deprecateStrategy,c=e.reactivateStrategy,l=Object(s.g)(),u=$l(),d=Object(Er.a)("(max-width:700px)"),j=Object(a.useContext)(el).hasAccess,h=Object(a.useState)({show:!1}),b=Object(Sr.a)(h,2),p=b[0],f=b[1];Object(a.useEffect)((function(){n()}),[]);var m=function(e){var t=e.name,n=e.deprecated;return Object(dr.jsxs)(o.b,{to:"/strategies/view/".concat(t),children:[Object(dr.jsx)("strong",{children:t}),Object(dr.jsx)(hr,{condition:n,show:Object(dr.jsx)("small",{children:" (Deprecated)"})})]})},g=function(e){return Object(dr.jsx)(Ir.a,{title:"Reactivate activation strategy",children:Object(dr.jsx)(yr.a,{onClick:function(){return f({show:!0,title:"Really reactivate strategy?",onConfirm:function(){return c(e)}})},children:Object(dr.jsx)(_r.a,{children:"visibility"})})})},O=function(e){return Object(dr.jsx)(hr,{condition:"default"===e.name,show:Object(dr.jsx)(Ir.a,{title:"You cannot deprecate the default strategy",children:Object(dr.jsx)("div",{children:Object(dr.jsx)(yr.a,{disabled:!0,children:Object(dr.jsx)(_r.a,{children:"visibility_off"})})})}),elseShow:Object(dr.jsx)(Ir.a,{title:"Deprecate activation strategy",children:Object(dr.jsx)("div",{children:Object(dr.jsx)(yr.a,{onClick:function(){return f({show:!0,title:"Really deprecate strategy?",onConfirm:function(){return i(e)}})},children:Object(dr.jsx)(_r.a,{children:"visibility_off"})})})})})},v=function(e){return Object(dr.jsx)(hr,{condition:e.editable,show:Object(dr.jsx)(Ir.a,{title:"Delete strategy",children:Object(dr.jsx)(yr.a,{onClick:function(){return f({show:!0,title:"Really delete strategy?",onConfirm:function(){return r(e)}})},children:Object(dr.jsx)(_r.a,{children:"delete"})})}),elseShow:Object(dr.jsx)(Ir.a,{title:"You cannot delete a built-in strategy",children:Object(dr.jsx)("div",{children:Object(dr.jsx)(yr.a,{disabled:!0,children:Object(dr.jsx)(_r.a,{children:"delete"})})})})})};return Object(dr.jsxs)(qc,{headerContent:Object(dr.jsx)(ii,{title:"Strategies",actions:Object(dr.jsx)(hr,{condition:j(bo),show:Object(dr.jsx)(hr,{condition:d,show:Object(dr.jsx)(Ir.a,{title:"Add new strategy",children:Object(dr.jsx)(yr.a,{onClick:function(){return l.push("/strategies/create")},children:Object(dr.jsx)(_r.a,{children:"add"})})}),elseShow:Object(dr.jsx)(ni.a,{onClick:function(){return l.push("/strategies/create")},color:"primary",variant:"contained",children:"Add new strategy"})})})}),children:[Object(dr.jsx)(bs,{open:p.show,onClick:function(){null===p||void 0===p||p.onConfirm(),f((function(e){return Object(x.a)(Object(x.a)({},e),{},{show:!1})}))},title:null===p||void 0===p?void 0:p.title,onClose:function(){return f((function(e){return Object(x.a)(Object(x.a)({},e),{},{show:!1})}))}}),Object(dr.jsx)(Pr.a,{children:Object(dr.jsx)(hr,{condition:t.length>0,show:t.map((function(e){return Object(dr.jsxs)(Zc.a,{classes:{root:fr()(u.listItem,Object(Ai.a)({},u.deprecated,e.deprecated))},children:[Object(dr.jsx)(Kc.a,{children:Object(dr.jsx)(_r.a,{style:{color:"#0000008a"},children:"extension"})}),Object(dr.jsx)(Qc.a,{primary:m(e),secondary:e.description}),Object(dr.jsx)(hr,{condition:e.deprecated,show:g(e),elseShow:O(e)}),Object(dr.jsx)(hr,{condition:j("DELETE_STRATEGY"),show:v(e)})]},e.name)})),elseShow:Object(dr.jsx)(Zc.a,{children:"No strategies found"})})})]})},tu=Object(l.b)((function(e){return{strategies:e.strategies.get("list").toArray()}}),(function(e){return{removeStrategy:function(t){Lt(t)(e)},deprecateStrategy:function(t){Pt(t)(e)},reactivateStrategy:function(t){Ft(t)(e)},fetchStrategies:function(){return Dt()(e)}}}))(eu),nu=function(e){var t=e.history;return Object(dr.jsx)(tu,{history:t})},au=function(e){var t=e.fetchHistory,n=e.history;return Object(a.useEffect)((function(){t()}),[t]),n.length<0?null:Object(dr.jsx)(Go,{history:n,title:"Recent changes"})},ru=Object(l.b)((function(e){return{history:e.history.get("list").toArray()}}),{fetchHistory:function(){return function(e){return zt.fetchAll().then((function(t){return e(function(e){return{type:Jt,value:e.events}}(t))})).catch(z(e,Yt))}}})(au),iu=function(e){e.history;var t=Object(a.useContext)(el).hasAccess;return Object(dr.jsx)(br,{condition:t(uo),show:Object(dr.jsx)(ru,{}),elseShow:Object(dr.jsx)(ai.a,{severity:"error",children:"You need instance admin to access this section."})})},cu=function(e){var t=e.match.params;return Object(dr.jsx)(Ho,{toggleName:t.toggleName})},ou=Object(l.b)((function(e,t){return{features:e.archive.get("list").toArray(),featureToggle:e.archive.get("list").toArray().find((function(e){return e.name===t.featureToggleName})),tagTypes:e.tagTypes.toJS(),featureTags:e.featureTags.toJS(),activeTab:t.activeTab}}),{fetchArchive:nn,revive:tn,fetchTags:qe})(tl),su=function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(sr.a)(n,[{key:"render",value:function(){var e=this.props,t=e.match,n=e.history;return Object(dr.jsx)(ou,{history:n,featureToggleName:t.params.name,activeTab:t.params.activeTab})}}]),n}(a.PureComponent),lu=Rl(!1),uu={fetcher:function(){return nn()},revive:tn,updateSetting:ra("feature")},du=Object(l.b)(lu,uu)(Nl),ju=function(e){var t=e.match.params,n=e.history;return Object(dr.jsx)(du,{name:t.name,history:n})},hu=n(335),bu=function(){return Object(dr.jsx)(r.a.Fragment,{children:Object(dr.jsxs)("section",{style:{textAlign:"center"},children:[Object(dr.jsx)(_r.a,{children:"warning"})," ",Object(dr.jsx)("br",{}),Object(dr.jsx)("br",{}),"Oh snap, it does not seem like you have connected any applications. To connect your application to Unleash you will require a Client SDK.",Object(dr.jsx)("br",{}),Object(dr.jsx)("br",{}),"You can read more about how to use Unleash in your application in the"," ",Object(dr.jsx)("a",{href:"https://docs.getunleash.io/docs/sdks/",children:"documentation."})]})})},pu=function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(sr.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchAll()}},{key:"render",value:function(){var e=this.props.applications;return e?Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)("div",{className:eo.a.searchField,children:Object(dr.jsx)(gl,{value:this.props.settings.filter,updateValue:this.props.updateSetting.bind(this,"filter")})}),Object(dr.jsx)(qc,{headerContent:Object(dr.jsx)(ii,{title:"Applications"}),children:Object(dr.jsx)("div",{className:eo.a.fullwidth,children:e.length>0?Object(dr.jsx)(no,{apps:e}):Object(dr.jsx)(bu,{})})})]}):Object(dr.jsx)(hu.a,{variant:"indeterminate"})}}]),n}(a.Component),fu={fetchAll:Qn,updateSetting:ra("application")},mu=Object(l.b)((function(e){var t=e.applications.get("list").toJS(),n=e.settings.toJS().application||{},a=new RegExp(n.filter,"i");return{applications:n.filter?t.filter((function(e){return a.test(e.appName)})):t,settings:n}}),fu)(pu),gu=function(){return Object(dr.jsx)(mu,{})},Ou=n(336);var xu=function(e){var t=e.seenToggles,n=e.hasAccess,a=e.strategies,r=e.instances,i=e.formatFullDateTime,c=function(e){var t=e.createUrl,a=e.name,r=e.permission;return Object(dr.jsx)(hr,{condition:n(r),show:Object(dr.jsxs)(Zc.a,{children:[Object(dr.jsx)(Kc.a,{children:Object(dr.jsx)(_r.a,{children:"report"})}),Object(dr.jsx)(Qc.a,{primary:Object(dr.jsx)(o.b,{to:"".concat(t,"?name=").concat(a),children:a}),secondary:"Missing, want to create?"})]},"not_found_".concat(a)),elseShow:Object(dr.jsxs)(Zc.a,{children:[Object(dr.jsx)(Kc.a,{children:Object(dr.jsx)(_r.a,{children:"report"})}),Object(dr.jsx)(Qc.a,{primary:a,secondary:"Could not find feature toggle with name ".concat(a)})]},"not_found_".concat(a))},"not_found_conditional_".concat(a))},s=function(e){var t=e.viewUrl,n=e.name,a=e.showSwitch,r=e.enabled,i=e.description,c=e.i;return Object(dr.jsxs)(Zc.a,{children:[Object(dr.jsx)(Kc.a,{children:Object(dr.jsx)(hr,{condition:a,show:Object(dr.jsx)(Gr.a,{disabled:!0,value:!!r}),elseShow:Object(dr.jsx)(_r.a,{children:"extension"})},"conditional_avatar_".concat(n))}),Object(dr.jsx)(Qc.a,{primary:Object(dr.jsx)(o.b,{to:"".concat(t,"/").concat(n),children:to(n,50)}),secondary:to(i,60)})]},"found_".concat(n,"-").concat(c))};return Object(dr.jsxs)(gr.a,{container:!0,style:{margin:0},children:[Object(dr.jsxs)(gr.a,{item:!0,xl:6,md:6,xs:12,children:[Object(dr.jsx)(Rr.a,{variant:"subtitle1",style:{padding:"1rem 0"},children:"Toggles"}),Object(dr.jsx)("hr",{}),Object(dr.jsx)(Pr.a,{children:t.map((function(e,t){var n=e.name,a=e.description,r=e.enabled,i=e.notFound;return Object(dr.jsx)(hr,{condition:i,show:c({createUrl:"/features/create",name:n,permission:jo,i:t}),elseShow:s({viewUrl:"/features/strategies",name:n,showSwitch:!0,enabled:r,description:a,i:t})},"toggle_conditional_".concat(n))}))})]}),Object(dr.jsxs)(gr.a,{item:!0,xl:6,md:6,xs:12,children:[Object(dr.jsx)(Rr.a,{variant:"subtitle1",style:{padding:"1rem 0"},children:"Implemented strategies"}),Object(dr.jsx)("hr",{}),Object(dr.jsx)(Pr.a,{children:a.map((function(e,t){var n=e.name,a=e.description,r=e.notFound;return Object(dr.jsx)(hr,{condition:r,show:c({createUrl:"/strategies/create",name:n,permission:bo,i:t}),elseShow:s({viewUrl:"/strategies/view",name:n,showSwitch:!1,enabled:void 0,description:a,i:t})},"strategies_conditional_".concat(n))}))})]}),Object(dr.jsxs)(gr.a,{item:!0,xl:12,md:12,children:[Object(dr.jsxs)(Rr.a,{variant:"subtitle1",style:{padding:"1rem 0"},children:[r.length," Instances registered"]}),Object(dr.jsx)("hr",{}),Object(dr.jsx)(Pr.a,{children:r.map((function(e){var t=e.instanceId,n=e.clientIp,a=e.lastSeen,r=e.sdkVersion;return Object(dr.jsxs)(Zc.a,{children:[Object(dr.jsx)(Kc.a,{children:Object(dr.jsx)(_r.a,{children:"timeline"})}),Object(dr.jsx)(Qc.a,{primary:Object(dr.jsx)(hr,{condition:r,show:"".concat(t," (").concat(r,")"),elseShow:t},"".concat(t,"_conditional")),secondary:Object(dr.jsxs)("span",{children:[n," last seen at"," ",Object(dr.jsx)("small",{children:i(a)})]})})]},"".concat(t))}))})]})]})},vu=["3d_rotation","ac_unit","access_alarm","access_alarms","access_time","accessibility","accessible","account_balance","account_balance_wallet","account_box","account_circle","adb","add","add_a_photo","add_alarm","add_alert","add_box","add_circle","add_circle_outline","add_location","add_shopping_cart","add_to_photos","add_to_queue","adjust","airline_seat_flat","airline_seat_flat_angled","airline_seat_individual_suite","airline_seat_legroom_extra","airline_seat_legroom_normal","airline_seat_legroom_reduced","airline_seat_recline_extra","airline_seat_recline_normal","airplanemode_active","airplanemode_inactive","airplay","airport_shuttle","alarm","alarm_add","alarm_off","alarm_on","album","all_inclusive","all_out","android","announcement","apps","archive","arrow_back","arrow_downward","arrow_drop_down","arrow_drop_down_circle","arrow_drop_up","arrow_forward","arrow_upward","art_track","aspect_ratio","assessment","assignment","assignment_ind","assignment_late","assignment_return","assignment_returned","assignment_turned_in","assistant","assistant_photo","attach_file","attach_money","attachment","audiotrack","autorenew","av_timer","backspace","backup","battery_alert","battery_charging_full","battery_full","battery_std","battery_unknown","beach_access","beenhere","block","bluetooth","bluetooth_audio","bluetooth_connected","bluetooth_disabled","bluetooth_searching","blur_circular","blur_linear","blur_off","blur_on","book","bookmark","bookmark_border","border_all","border_bottom","border_clear","border_color","border_horizontal","border_inner","border_left","border_outer","border_right","border_style","border_top","border_vertical","branding_watermark","brightness_1","brightness_2","brightness_3","brightness_4","brightness_5","brightness_6","brightness_7","brightness_auto","brightness_high","brightness_low","brightness_medium","broken_image","brush","bubble_chart","bug_report","build","burst_mode","business","business_center","cached","cake","call","call_end","call_made","call_merge","call_missed","call_missed_outgoing","call_received","call_split","call_to_action","camera","camera_alt","camera_enhance","camera_front","camera_rear","camera_roll","cancel","card_giftcard","card_membership","card_travel","casino","cast","cast_connected","center_focus_strong","center_focus_weak","change_history","chat","chat_bubble","chat_bubble_outline","check","check_box","check_box_outline_blank","check_circle","chevron_left","chevron_right","child_care","child_friendly","chrome_reader_mode","class","clear","clear_all","close","closed_caption","cloud","cloud_circle","cloud_done","cloud_download","cloud_off","cloud_queue","cloud_upload","code","collections","collections_bookmark","color_lens","colorize","comment","compare","compare_arrows","computer","confirmation_number","contact_mail","contact_phone","contacts","content_copy","content_cut","content_paste","control_point","control_point_duplicate","copyright","create","create_new_folder","credit_card","crop","crop_16_9","crop_3_2","crop_5_4","crop_7_5","crop_din","crop_free","crop_landscape","crop_original","crop_portrait","crop_rotate","crop_square","dashboard","data_usage","date_range","dehaze","delete","delete_forever","delete_sweep","description","desktop_mac","desktop_windows","details","developer_board","developer_mode","device_hub","devices","devices_other","dialer_sip","dialpad","directions","directions_bike","directions_boat","directions_bus","directions_car","directions_railway","directions_run","directions_subway","directions_transit","directions_walk","disc_full","dns","do_not_disturb","do_not_disturb_alt","do_not_disturb_off","do_not_disturb_on","dock","domain","done","done_all","donut_large","donut_small","drafts","drag_handle","drive_eta","dvr","edit","edit_location","eject","email","enhanced_encryption","equalizer","error","error_outline","euro_symbol","ev_station","event","event_available","event_busy","event_note","event_seat","exit_to_app","expand_less","expand_more","explicit","explore","exposure","exposure_neg_1","exposure_neg_2","exposure_plus_1","exposure_plus_2","exposure_zero","extension","face","fast_forward","fast_rewind","favorite","favorite_border","featured_play_list","featured_video","feedback","fiber_dvr","fiber_manual_record","fiber_new","fiber_pin","fiber_smart_record","file_download","file_upload","filter","filter_1","filter_2","filter_3","filter_4","filter_5","filter_6","filter_7","filter_8","filter_9","filter_9_plus","filter_b_and_w","filter_center_focus","filter_drama","filter_frames","filter_hdr","filter_list","filter_none","filter_tilt_shift","filter_vintage","find_in_page","find_replace","fingerprint","first_page","fitness_center","flag","flare","flash_auto","flash_off","flash_on","flight","flight_land","flight_takeoff","flip","flip_to_back","flip_to_front","folder","folder_open","folder_shared","folder_special","font_download","format_align_center","format_align_justify","format_align_left","format_align_right","format_bold","format_clear","format_color_fill","format_color_reset","format_color_text","format_indent_decrease","format_indent_increase","format_italic","format_line_spacing","format_list_bulleted","format_list_numbered","format_paint","format_quote","format_shapes","format_size","format_strikethrough","format_textdirection_l_to_r","format_textdirection_r_to_l","format_underlined","forum","forward","forward_10","forward_30","forward_5","free_breakfast","fullscreen","fullscreen_exit","functions","g_translate","gamepad","games","gavel","gesture","get_app","gif","golf_course","gps_fixed","gps_not_fixed","gps_off","grade","gradient","grain","graphic_eq","grid_off","grid_on","group","group_add","group_work","hd","hdr_off","hdr_on","hdr_strong","hdr_weak","headset","headset_mic","healing","hearing","help","help_outline","high_quality","highlight","highlight_off","history","home","hot_tub","hotel","hourglass_empty","hourglass_full","http","https","image","image_aspect_ratio","import_contacts","import_export","important_devices","inbox","indeterminate_check_box","info","info_outline","input","insert_chart","insert_comment","insert_drive_file","insert_emoticon","insert_invitation","insert_link","insert_photo","invert_colors","invert_colors_off","iso","keyboard","keyboard_arrow_down","keyboard_arrow_left","keyboard_arrow_right","keyboard_arrow_up","keyboard_backspace","keyboard_capslock","keyboard_hide","keyboard_return","keyboard_tab","keyboard_voice","kitchen","label","label_outline","landscape","language","laptop","laptop_chromebook","laptop_mac","laptop_windows","last_page","launch","layers","layers_clear","leak_add","leak_remove","lens","library_add","library_books","library_music","lightbulb_outline","line_style","line_weight","linear_scale","link","linked_camera","list","live_help","live_tv","local_activity","local_airport","local_atm","local_bar","local_cafe","local_car_wash","local_convenience_store","local_dining","local_drink","local_florist","local_gas_station","local_grocery_store","local_hospital","local_hotel","local_laundry_service","local_library","local_mall","local_movies","local_offer","local_parking","local_pharmacy","local_phone","local_pizza","local_play","local_post_office","local_printshop","local_see","local_shipping","local_taxi","location_city","location_disabled","location_off","location_on","location_searching","lock","lock_open","lock_outline","looks","looks_3","looks_4","looks_5","looks_6","looks_one","looks_two","loop","loupe","low_priority","loyalty","mail","mail_outline","map","markunread","markunread_mailbox","memory","menu","merge_type","message","mic","mic_none","mic_off","mms","mode_comment","mode_edit","monetization_on","money_off","monochrome_photos","mood","mood_bad","more","more_horiz","more_vert","motorcycle","mouse","move_to_inbox","movie","movie_creation","movie_filter","multiline_chart","music_note","music_video","my_location","nature","nature_people","navigate_before","navigate_next","navigation","near_me","network_cell","network_check","network_locked","network_wifi","new_releases","next_week","nfc","no_encryption","no_sim","not_interested","note","note_add","notifications","notifications_active","notifications_none","notifications_off","notifications_paused","offline_pin","ondemand_video","opacity","open_in_browser","open_in_new","open_with","pages","pageview","palette","pan_tool","panorama","panorama_fish_eye","panorama_horizontal","panorama_vertical","panorama_wide_angle","party_mode","pause","pause_circle_filled","pause_circle_outline","payment","people","people_outline","perm_camera_mic","perm_contact_calendar","perm_data_setting","perm_device_information","perm_identity","perm_media","perm_phone_msg","perm_scan_wifi","person","person_add","person_outline","person_pin","person_pin_circle","personal_video","pets","phone","phone_android","phone_bluetooth_speaker","phone_forwarded","phone_in_talk","phone_iphone","phone_locked","phone_missed","phone_paused","phonelink","phonelink_erase","phonelink_lock","phonelink_off","phonelink_ring","phonelink_setup","photo","photo_album","photo_camera","photo_filter","photo_library","photo_size_select_actual","photo_size_select_large","photo_size_select_small","picture_as_pdf","picture_in_picture","picture_in_picture_alt","pie_chart","pie_chart_outlined","pin_drop","place","play_arrow","play_circle_filled","play_circle_outline","play_for_work","playlist_add","playlist_add_check","playlist_play","plus_one","poll","polymer","pool","portable_wifi_off","portrait","power","power_input","power_settings_new","pregnant_woman","present_to_all","print","priority_high","public","publish","query_builder","question_answer","queue","queue_music","queue_play_next","radio","radio_button_checked","radio_button_unchecked","rate_review","receipt","recent_actors","record_voice_over","redeem","redo","refresh","remove","remove_circle","remove_circle_outline","remove_from_queue","remove_red_eye","remove_shopping_cart","reorder","repeat","repeat_one","replay","replay_10","replay_30","replay_5","reply","reply_all","report","report_problem","restaurant","restaurant_menu","restore","restore_page","ring_volume","room","room_service","rotate_90_degrees_ccw","rotate_left","rotate_right","rounded_corner","router","rowing","rss_feed","rv_hookup","satellite","save","scanner","schedule","school","screen_lock_landscape","screen_lock_portrait","screen_lock_rotation","screen_rotation","screen_share","sd_card","sd_storage","search","security","select_all","send","sentiment_dissatisfied","sentiment_neutral","sentiment_satisfied","sentiment_very_dissatisfied","sentiment_very_satisfied","settings","settings_applications","settings_backup_restore","settings_bluetooth","settings_brightness","settings_cell","settings_ethernet","settings_input_antenna","settings_input_component","settings_input_composite","settings_input_hdmi","settings_input_svideo","settings_overscan","settings_phone","settings_power","settings_remote","settings_system_daydream","settings_voice","share","shop","shop_two","shopping_basket","shopping_cart","short_text","show_chart","shuffle","signal_cellular_4_bar","signal_cellular_connected_no_internet_4_bar","signal_cellular_no_sim","signal_cellular_null","signal_cellular_off","signal_wifi_4_bar","signal_wifi_4_bar_lock","signal_wifi_off","sim_card","sim_card_alert","skip_next","skip_previous","slideshow","slow_motion_video","smartphone","smoke_free","smoking_rooms","sms","sms_failed","snooze","sort","sort_by_alpha","spa","space_bar","speaker","speaker_group","speaker_notes","speaker_notes_off","speaker_phone","spellcheck","star","star_border","star_half","stars","stay_current_landscape","stay_current_portrait","stay_primary_landscape","stay_primary_portrait","stop","stop_screen_share","storage","store","store_mall_directory","straighten","streetview","strikethrough_s","style","subdirectory_arrow_left","subdirectory_arrow_right","subject","subscriptions","subtitles","subway","supervisor_account","surround_sound","swap_calls","swap_horiz","swap_vert","swap_vertical_circle","switch_camera","switch_video","sync","sync_disabled","sync_problem","system_update","system_update_alt","tab","tab_unselected","tablet","tablet_android","tablet_mac","tag_faces","tap_and_play","terrain","text_fields","text_format","textsms","texture","theaters","thumb_down","thumb_up","thumbs_up_down","time_to_leave","timelapse","timeline","timer","timer_10","timer_3","timer_off","title","toc","today","toll","tonality","touch_app","toys","track_changes","traffic","train","tram","transfer_within_a_station","transform","translate","trending_down","trending_flat","trending_up","tune","turned_in","turned_in_not","tv","unarchive","undo","unfold_less","unfold_more","update","usb","verified_user","vertical_align_bottom","vertical_align_center","vertical_align_top","vibration","video_call","video_label","video_library","videocam","videocam_off","videogame_asset","view_agenda","view_array","view_carousel","view_column","view_comfy","view_compact","view_day","view_headline","view_list","view_module","view_quilt","view_stream","view_week","vignette","visibility","visibility_off","voice_chat","voicemail","volume_down","volume_mute","volume_off","volume_up","vpn_key","vpn_lock","wallpaper","warning","watch","watch_later","wb_auto","wb_cloudy","wb_incandescent","wb_iridescent","wb_sunny","wc","web","web_asset","weekend","whatshot","widgets","wifi","wifi_lock","wifi_tethering","work","wrap_text","youtube_searched_for","zoom_in","zoom_out","zoom_out_map"];var yu=function(e){var t=e.application,n=e.storeApplicationMetaData,r=t.appName,i=t.icon,c=t.url,o=t.description,s=Object(a.useState)(c),l=Object(Sr.a)(s,2),u=l[0],d=l[1],j=Object(a.useState)(o),h=Object(Sr.a)(j,2),b=h[0],p=h[1],f=Gi();return Object(dr.jsx)(gr.a,{container:!0,style:{marginTop:"1rem"},children:Object(dr.jsxs)(gr.a,{item:!0,sm:12,xs:12,className:f.contentSpacingY,children:[Object(dr.jsx)(gr.a,{item:!0,children:Object(dr.jsx)(Yr,{label:"Icon",options:vu.map((function(e){return{key:e,label:e}})),value:i||"apps",onChange:function(e){return n(r,"icon",e.target.value)}})}),Object(dr.jsx)(gr.a,{item:!0,children:Object(dr.jsx)(Vr.a,{value:u,onChange:function(e){return d(e.target.value)},label:"Application URL",placeholder:"https://example.com",type:"url",variant:"outlined",size:"small",onBlur:function(){return n(r,"url",u)}})}),Object(dr.jsx)(gr.a,{item:!0,children:Object(dr.jsx)(Vr.a,{value:b,label:"Description",variant:"outlined",size:"small",rows:2,onChange:function(e){return p(e.target.value)},onBlur:function(){return n(r,"description",b)}})})]})})},_u=qc,wu=function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(S.a)(this,n),(a=t.call(this)).formatFullDateTime=function(e){return ji(e,a.props.location.locale)},a.formatDate=function(e){return hi(e,a.props.location.locale)},a.deleteApplication=function(){var e=Object(_.a)(y.a.mark((function e(t){var n,r,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.props,r=n.deleteApplication,i=n.appName,e.next=4,r(i);case 4:a.props.history.push("/applications");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={activeTab:0,loading:!e.application,prompt:!1},a}return Object(sr.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.fetchApplication(this.props.appName).finally((function(){return e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this;if(this.state.loading)return Object(dr.jsxs)("div",{children:[Object(dr.jsx)("p",{children:"Loading..."}),Object(dr.jsx)(No.a,{})]});if(!this.props.application)return Object(dr.jsxs)("p",{children:["Application (",this.props.appName,") not found"]});var t=this.context.hasAccess,n=this.props,a=n.application,r=n.storeApplicationMetaData,i=a.appName,c=a.instances,o=a.strategies,s=a.seenToggles,l=a.url,u=a.description,d=a.icon,j=void 0===d?"apps":d,h=a.createdAt,b=function(){e.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{prompt:!e.prompt})}))},p=[{label:"Application overview",component:Object(dr.jsx)(xu,{strategies:o,instances:c,seenToggles:s,hasAccess:t,formatFullDateTime:this.formatFullDateTime})},{label:"Edit application",component:Object(dr.jsx)(yu,{application:a,storeApplicationMetaData:r})}];return Object(dr.jsxs)(_u,{headerContent:Object(dr.jsx)(ii,{title:Object(dr.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[Object(dr.jsx)(Xc.a,{style:{marginRight:"8px"},children:Object(dr.jsx)(_r.a,{children:j||"apps"})}),i]}),actions:Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(hr,{condition:l,show:Object(dr.jsx)(yr.a,{component:Ou.a,href:l,children:Object(dr.jsx)(_r.a,{children:"link"})})}),Object(dr.jsx)(hr,{condition:t(po),show:Object(dr.jsx)(ni.a,{color:"secondary",title:"Delete application",onClick:b,children:"Delete"})})]})}),children:[Object(dr.jsxs)("div",{children:[Object(dr.jsx)(Rr.a,{variant:"body1",children:u||""}),Object(dr.jsxs)(Rr.a,{variant:"body2",children:["Created: ",Object(dr.jsx)("strong",{children:this.formatDate(h)})]})]}),Object(dr.jsx)(hr,{condition:t(po),show:Object(dr.jsxs)("div",{children:[Object(dr.jsx)(bs,{open:e.state.prompt,onClose:b,onClick:e.deleteApplication,title:"Are you sure you want to delete this application?"}),Object(dr.jsx)(Ks,{tabData:p})]})})]})}}]),n}(a.PureComponent);wu.contextType=el;var Cu=wu,Tu=Object(l.b)((function(e,t){var n=e.applications.getIn(["apps",t.appName]),a=e.settings.toJS().location||{};return n&&(n=n.toJS()),{application:n,location:a}}),{fetchApplication:function(e){return function(t){return vt.fetchApplication(e).then((function(e){return t(function(e){return{type:Zn,value:e}}(e))})).catch(z(t,qn))}},storeApplicationMetaData:function(e,t,n){return function(a){return vt.storeApplicationMetaData(e,t,n).then((function(){var r="".concat(e," successfully updated!");setTimeout((function(){return a({type:J,error:r})}),1e3),a({type:Kn,appName:e,key:t,value:n,info:r})})).catch(z(a,"ERROR_UPDATING_APPLICATION_DATA"))}},deleteApplication:function(e){return function(t){return vt.deleteApplication(e).then((function(){return t({type:Xn,appName:e})})).catch(z(t,"ERROR_DELETE_APPLICATION"))}}})(Cu),Su=function(e){var t=e.match.params,n=e.history;return Object(dr.jsx)(Tu,{appName:t.name,history:n})},Eu=n(337),ku=Object(mr.a)({listItem:Object(Ai.a)({padding:0},"& a",{textDecoration:"none",color:"inherit"})}),Nu=function(e){var t=e.removeContextField,n=e.history,r=e.contextFields,i=Object(a.useContext)(el).hasAccess,c=Object(a.useState)(!1),s=Object(Sr.a)(c,2),l=s[0],u=s[1],d=Object(Er.a)("(max-width:700px)"),j=Object(a.useState)(),h=Object(Sr.a)(j,2),b=h[0],p=h[1],f=ku();return Object(dr.jsxs)(qc,{headerContent:Object(dr.jsx)(ii,{actions:Object(dr.jsx)(hr,{condition:i("CREATE_CONTEXT_FIELD"),show:Object(dr.jsx)(hr,{condition:d,show:Object(dr.jsx)(Ir.a,{title:"Add context type",children:Object(dr.jsx)(yr.a,{onClick:function(){return n.push("/context/create")},children:Object(dr.jsx)(_r.a,{children:"add"})})}),elseShow:Object(dr.jsx)(ni.a,{onClick:function(){return n.push("/context/create")},color:"primary",variant:"contained",children:"Add new context field"})})}),title:"Context fields"}),children:[Object(dr.jsx)(Pr.a,{children:Object(dr.jsx)(hr,{condition:r.length>0,show:function(){return r.map((function(e){return Object(dr.jsxs)(Zc.a,{classes:{root:f.listItem},children:[Object(dr.jsx)(Eu.a,{children:Object(dr.jsx)(_r.a,{children:"album"})}),Object(dr.jsx)(Qc.a,{primary:Object(dr.jsx)(o.b,{to:"/context/edit/".concat(e.name),children:Object(dr.jsx)("strong",{children:e.name})}),secondary:e.description}),Object(dr.jsx)(hr,{condition:i("DELETE_CONTEXT_FIELD"),show:Object(dr.jsx)(Ir.a,{title:"Delete context field",children:Object(dr.jsx)(yr.a,{"aria-label":"delete",onClick:function(){p(e.name),u(!0)},children:Object(dr.jsx)(_r.a,{children:"delete"})})})})]},e.name)}))},elseShow:Object(dr.jsx)(Zc.a,{children:"No context fields defined"})})}),Object(dr.jsx)(bs,{open:l,onClick:function(){t({name:b}),p(void 0),u(!1)},onClose:function(){p(void 0),u(!1)},title:"Really delete context field"})]})},Au=Object(l.b)((function(e){return{contextFields:e.context.toJS()}}),(function(e){return{removeContextField:function(t){pn(t)(e)},fetchContext:function(){return function(e){return on.fetchAll().then((function(t){t.sort((function(e,t){return e.sortOrder-t.sortOrder})),e(bn(t))})).catch(z(e,"ERROR_RECEIVE_CONTEXT"))}(e)}}}))(Nu),Ru=function(e){var t=e.history;return Object(dr.jsx)(Au,{history:t})},Iu=n(63),Du=n.n(Iu),Lu=function(e,t){return(e=e.toLowerCase())===(t=t.toLowerCase())?0:e>t?1:-1},Pu=function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(S.a)(this,n),(a=t.call(this,e)).handleKeydown=function(e){"Enter"===e.key&&a.state.focusedLegalValue?a.addLegalValue(e):"Enter"===e.key&&a.onSubmit(e)},a.setValue=function(e,t){var n=a.state.contextField;n[e]=t,a.setState({contextField:n,dirty:!0})},a.validateContextName=function(){var e=Object(_.a)(y.a.mark((function e(t){var n,r,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.state.errors,r=a.props,i=r.validateName,!r.editMode){e.next=4;break}return e.abrupt("return",!0);case 4:return e.prev=4,e.next=7,i(t);case 7:n.name=void 0,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),n.name=e.t0.message;case 13:if(a.setState({errors:n}),!n.name){e.next=16;break}return e.abrupt("return",!1);case 16:return e.abrupt("return",!0);case 17:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),a.onCancel=function(e){e.preventDefault(),a.props.history.push("/context")},a.onSubmit=function(){var e=Object(_.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state.contextField,e.next=4,a.validateContextName(n.name);case 4:e.sent&&a.props.submit(n).then((function(){return a.props.history.push("/context")})).catch((function(e){return a.setState((function(t){return Object(x.a)(Object(x.a)({},t),{},{errors:{api:e.toString()}})}))}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.updateCurrentLegalValue=function(e){a.setState({currentLegalValue:bi(e.target.value)})},a.addLegalValue=function(e){e.preventDefault();var t=a.state,n=t.contextField,r=t.currentLegalValue,i=t.errors;if(r){if(-1!==n.legalValues.indexOf(r))return i.currentLegalValue="Duplicate legal value",void a.setState({errors:i});var c=n.legalValues.concat(bi(r));n.legalValues=c.sort(Lu),a.setState({contextField:n,currentLegalValue:"",errors:{}})}},a.removeLegalValue=function(e){var t=a.state.contextField,n=t.legalValues.filter((function(t,n){return n!==e}));t.legalValues=n,a.setState({contextField:t})},a.renderLegalValue=function(e,t){return Object(dr.jsx)(Hi.a,{className:Du.a.chip,onDelete:function(){return a.removeLegalValue(t)},label:e},"".concat(e,":").concat(t))},a.state={contextField:e.contextField,errors:{},currentLegalValue:"",dirty:!1,focusedLegalValue:!1},a}return Object(sr.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeydown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeydown)}},{key:"render",value:function(){var e=this,t=this.state,n=t.contextField,a=t.errors,r=this.props.editMode,i=r?"Update":"Create";return Object(dr.jsxs)(qc,{headerContent:"Create context field",children:[Object(dr.jsx)("div",{className:Du.a.supporting,children:"Context fields are a basic building block used in Unleash to control roll-out. They can be used together with strategy constraints as part of the activation strategy evaluation."}),Object(dr.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(dr.jsxs)("section",{className:Du.a.formContainer,children:[Object(dr.jsx)(br,{condition:a.api,show:Object(dr.jsx)(ai.a,{severity:"error",children:this.state.errors.api})}),Object(dr.jsx)(Vr.a,{className:eo.a.fullwidth,label:"Name",name:"name",defaultValue:n.name,error:a.name,helperText:a.name,disabled:r,variant:"outlined",size:"small",onBlur:function(t){return e.validateContextName(t.target.value)},onChange:function(t){return e.setValue("name",bi(t.target.value))}}),Object(dr.jsx)(Vr.a,{className:eo.a.fullwidth,rowsMax:1,label:"Description",error:a.description,helperText:a.description,variant:"outlined",size:"small",defaultValue:n.description,onChange:function(t){return e.setValue("description",t.target.value)}}),Object(dr.jsx)("br",{}),Object(dr.jsx)("br",{})]}),Object(dr.jsxs)("section",{className:Du.a.inset,children:[Object(dr.jsx)("h6",{className:Du.a.h6,children:"Legal values"}),Object(dr.jsx)("p",{className:Du.a.alpha,children:"By defining the legal values the Unleash Admin UI will validate the user input. A concrete example would be that we know all values for our \u201cenvironment\u201d (local, development, stage, production)."}),Object(dr.jsxs)("div",{children:[Object(dr.jsx)(Vr.a,{label:"Value",name:"value",className:Du.a.valueField,onFocus:function(){return e.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{focusedLegalValue:!0})}))},onBlur:function(){return e.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{focusedLegalValue:!1})}))},value:this.state.currentLegalValue,error:!!a.currentLegalValue,helperText:a.currentLegalValue,variant:"outlined",size:"small",onChange:this.updateCurrentLegalValue}),Object(dr.jsx)(ni.a,{className:Du.a.legalValueButton,startIcon:Object(dr.jsx)(_r.a,{children:"add"}),onClick:this.addLegalValue,variant:"contained",color:"primary",children:"Add"})]}),Object(dr.jsx)("div",{children:n.legalValues.map(this.renderLegalValue)})]}),Object(dr.jsx)("br",{}),Object(dr.jsxs)("section",{children:[Object(dr.jsx)(Rr.a,{variant:"subtitle1",children:"Custom stickiness (beta)"}),Object(dr.jsxs)("p",{className:fr()(Du.a.alpha,Du.a.formContainer),children:["By enabling stickiness on this context field you can use it together with the flexible-rollout strategy. This will guarantee a consistent behavior for specific values of this context field. PS! Not all client SDK's support this feature yet!"," ",Object(dr.jsx)("a",{href:"https://unleash.github.io/docs/activation_strategy#flexiblerollout",target:"_blank",rel:"noreferrer",children:"Read more"})]}),Object(dr.jsx)(Gr.a,{label:"Allow stickiness",checked:n.stickiness,value:n.stickiness,onChange:function(){return e.setValue("stickiness",!n.stickiness)}})]}),Object(dr.jsx)("div",{className:Du.a.formButtons,children:Object(dr.jsx)(ao,{submitText:i,onCancel:this.onCancel})})]})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.contextField.initial&&!e.contextField.initial?{contextField:e.contextField}:null}}]),n}(a.Component),Fu=Object(l.b)((function(e,t){var n={name:"",description:"",legalValues:[]};return t.contextFieldName&&(n=e.context.toJS().find((function(e){return e.name===t.contextFieldName}))),{contextField:n}}),(function(e){return{validateName:gn,submit:function(t){return fn(t)(e)}}}))(Pu),Uu=function(e){var t=e.history;return Object(dr.jsx)(Fu,{title:"Create context field",history:t,editMode:!1})},Vu=Object(l.b)((function(e,t){var n=e.context.toJS().find((function(e){return e.name===t.contextFieldName})),a=Object.assign({name:"",description:"",legalValues:[]},n);return n||(a.initial=!0),{contextField:a}}),(function(e){return{validateName:gn,submit:function(t){return mn(t)(e)},editMode:!0}}))(Pu),Gu=function(e){var t=e.match.params,n=e.history;return Object(dr.jsx)(Vu,{contextFieldName:t.name,title:"Edit context field",history:n})},Bu=function(e){var t=e.logoutUser,n=e.user;return Object(a.useEffect)((function(){n&&t()}),[n,t]),Object(dr.jsxs)(ki.a,{shadow:0,className:eo.a.fullwidth,children:[Object(dr.jsx)(Xi.a,{children:"Logged out"}),Object(dr.jsxs)(Ni.a,{children:["You have now been successfully logged out of Unleash.",Object(dr.jsx)("br",{})," ",Object(dr.jsx)("br",{}),"Thank you for using Unleash."," "]})]})},Mu={logoutUser:we},Hu=Object(l.b)((function(e){return{user:e.user.get("profile")}}),Mu)(Bu),zu=function(){return Object(dr.jsx)(Hu,{})},Ju=Object(mr.a)({listItem:Object(Ai.a)({padding:0},"& a",{textDecoration:"none",color:"inherit"})}),Yu=function(e){var t=e.projects,n=e.fetchProjects,r=e.removeProject,i=e.history,c=Object(a.useContext)(el).hasAccess,s=Object(Er.a)("(max-width:700px)"),l=Object(a.useState)(!1),u=Object(Sr.a)(l,2),d=u[0],j=u[1],h=Object(a.useState)(void 0),b=Object(Sr.a)(h,2),p=b[0],f=b[1],m=Ju();Object(a.useEffect)((function(){n()}),[n]);var g=function(e){var t=e.id,n=e.name;return Object(dr.jsx)(o.b,{to:"/projects/view/".concat(t),children:Object(dr.jsx)("strong",{children:n})})},O=function(e){return Object(dr.jsx)(Ir.a,{title:"Manage access",children:Object(dr.jsx)(o.b,{to:"/projects/".concat(e.id,"/access"),style:{color:"black"},children:Object(dr.jsx)(yr.a,{"aria-label":"manage_access",children:Object(dr.jsx)(_r.a,{children:"supervised_user_circle"})})})})},x=function(e){return Object(dr.jsx)(Ir.a,{title:"Remove project",children:Object(dr.jsx)(yr.a,{"aria-label":"delete",onClick:function(){f(e),j(!0)},children:Object(dr.jsx)(_r.a,{children:"delete"})})})};return Object(dr.jsxs)(qc,{headerContent:Object(dr.jsx)(ii,{title:"Projects",actions:Object(dr.jsx)(hr,{condition:c(fo),show:Object(dr.jsx)(hr,{condition:s,show:Object(dr.jsx)(Ir.a,{title:"Add new project",children:Object(dr.jsx)(yr.a,{onClick:function(){return i.push("/projects/create")},children:Object(dr.jsx)(_r.a,{children:"add"})})}),elseShow:Object(dr.jsx)(ni.a,{onClick:function(){return i.push("/projects/create")},color:"primary",variant:"contained",children:"Add new project"})})})}),children:[Object(dr.jsx)(Pr.a,{children:Object(dr.jsx)(hr,{condition:t.length>0,show:t.map((function(e){return Object(dr.jsxs)(Zc.a,{classes:{root:m.listItem},children:[Object(dr.jsx)(Kc.a,{children:Object(dr.jsx)(_r.a,{children:"folder_open"})}),Object(dr.jsx)(Qc.a,{primary:g(e),secondary:e.description}),Object(dr.jsx)(hr,{condition:c("UPDATE_PROJECT",e.id),show:O(e)}),Object(dr.jsx)(hr,{condition:c("DELETE_PROJECT",e.id),show:x(e)})]},e.id)})),elseShow:Object(dr.jsx)(Zc.a,{children:"No projects defined"})})}),Object(dr.jsx)(bs,{open:d,onClick:function(){r(p),f(void 0),j(!1)},onClose:function(){f(void 0),j(!1)},title:"Really delete project"})]})},Wu=Object(l.b)((function(e){return{projects:e.projects.toJS()}}),(function(e){return{removeProject:function(t){Nn(t)(e)},fetchProjects:function(){return kn()(e)}}}))(Yu),qu=function(e){var t=e.history;return Object(dr.jsx)(Wu,{history:t})},Zu=n(143),Ku=n.n(Zu),Xu=function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(S.a)(this,n),(a=t.call(this,e)).setValue=function(e,t){var n=a.state.project;n[e]=t,a.setState({project:n,dirty:!0})},a.validateId=function(){var e=Object(_.a)(y.a.mark((function e(t){var n,r,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.state.errors,r=a.props,i=r.validateId,!r.editMode){e.next=4;break}return e.abrupt("return",!0);case 4:return e.prev=4,e.next=7,i(t);case 7:n.id=void 0,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),n.id=e.t0.message;case 13:if(a.setState({errors:n}),!n.id){e.next=16;break}return e.abrupt("return",!1);case 16:return e.abrupt("return",!0);case 17:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),a.validateName=function(){return 0!==a.state.project.name.length||(a.setState((function(e){return{errors:Object(x.a)(Object(x.a)({},e.errors),{},{name:"Name can not be empty."})}})),!1)},a.validate=function(){var e=Object(_.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.validateId(t);case 2:return n=e.sent,r=a.validateName(),e.abrupt("return",n&&r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onCancel=function(e){var t=a.props.editMode,n=a.state.project;e.preventDefault(),t?a.props.history.push("/projects/view/".concat(n.id)):a.props.history.push("/projects")},a.onSubmit=function(){var e=Object(_.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state.project,e.next=4,a.validate(n.id);case 4:if(!e.sent){e.next=9;break}return e.next=8,a.props.submit(n);case 8:a.props.history.push("/projects/view/".concat(n.id));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={project:e.project,errors:{},currentLegalValue:"",dirty:!1},a}return Object(sr.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.project,a=t.errors,r=this.context.hasAccess,i=this.props.editMode,c=i?"Update":"Create";return Object(dr.jsxs)(qc,{headerContent:Object(dr.jsxs)("div",{children:[Object(dr.jsxs)("span",{children:[c," Project"]}),Object(dr.jsx)(br,{condition:r(fo)&&i,show:Object(dr.jsx)(o.b,{to:"/projects/".concat(n.id,"/access"),style:{float:"right"},children:"Manage access"})})]}),children:[Object(dr.jsx)(Rr.a,{variant:"subtitle1",style:{marginBottom:"0.5rem"},children:"Projects allows you to group feature toggles together in the management UI."}),Object(dr.jsxs)("form",{onSubmit:this.onSubmit,className:fr()(eo.a.contentSpacing,Ku.a.formContainer),children:[Object(dr.jsx)(Vr.a,{label:"Project Id",name:"id",placeholder:"A-unique-key",value:n.id,error:!!a.id,helperText:a.id,disabled:i,variant:"outlined",size:"small",onBlur:function(t){return e.validateId(t.target.value)},onChange:function(t){return e.setValue("id",bi(t.target.value))}}),Object(dr.jsx)("br",{}),Object(dr.jsx)(Vr.a,{label:"Name",name:"name",placeholder:"Project name",value:n.name,error:!!a.name,variant:"outlined",size:"small",helperText:a.name,onChange:function(t){return e.setValue("name",t.target.value)}}),Object(dr.jsx)(Vr.a,{className:eo.a.fullwidth,placeholder:"A short description",rowsMax:2,label:"Description",error:!!a.description,helperText:a.description,variant:"outlined",size:"small",multiline:!0,value:n.description,onChange:function(t){return e.setValue("description",t.target.value)}}),Object(dr.jsx)(br,{condition:r(fo),show:Object(dr.jsx)("div",{className:Ku.a.formButtons,children:Object(dr.jsx)(ao,{submitText:c,onCancel:this.onCancel})})})]})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return!t.project.id&&e.project.id?{project:e.project}:null}}]),n}(a.Component);Xu.contextType=el;var Qu=Xu,$u=Object(l.b)((function(){return{project:{id:"",name:"",description:""}}}),(function(e){return{validateId:In,submit:function(){var t=Object(_.a)(y.a.mark((function t(n){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,An(n)(e);case 2:_e()(e);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),editMode:!1}}))(Qu),ed=function(e){var t=e.history;return Object(dr.jsx)($u,{title:"Create Project",history:t})},td=Object(l.b)((function(e,t){var n=e.projects.toJS().find((function(e){return e.id===t.projectId}));return{project:Object.assign({id:"",name:"",description:""},n)}}),(function(e){return{validateId:In,submit:function(t){return Rn(t)(e)},editMode:!0}}))(Qu),nd=function(e){var t=e.match.params,n=e.history;return Object(dr.jsx)(td,{projectId:t.id,title:"Edit project",history:n})},ad=function(e){var t=e.project,n=e.features,r=e.settings,i=e.toggleFeature,c=e.featureMetrics,s=e.revive,l=e.fetchFeatureToggles,u=Object(a.useContext)(el).hasAccess;Object(a.useEffect)((function(){l()}),[]);return Object(dr.jsx)("div",{children:Object(dr.jsxs)(_u,{headerContent:Object(dr.jsx)(ii,{title:"".concat(t.name),actions:Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(ni.a,{component:o.b,to:"/projects/edit/".concat(t.id),children:"Edit"}),Object(dr.jsx)(ni.a,{component:o.b,to:"/projects/".concat(t.id,"/access"),children:"Manage access"})]})}),children:[Object(dr.jsx)(br,{condition:t.description,show:Object(dr.jsxs)("div",{style:{marginBottom:"2rem"},children:[Object(dr.jsx)(Rr.a,{variant:"subtitle2",children:"Description"}),Object(dr.jsx)(Rr.a,{children:t.description})]})}),Object(dr.jsx)(Rr.a,{variant:"subtitle2",children:"Feature toggles in this project"}),Object(dr.jsx)(Pr.a,{children:Object(dr.jsx)(br,{condition:n.length>0,show:n.map((function(e){return Object(dr.jsx)(jl,{settings:r,metricsLastHour:c.lastHour[e.name],metricsLastMinute:c.lastMinute[e.name],feature:e,toggleFeature:i,revive:s,hasAccess:u},e.name)})),elseShow:Object(dr.jsx)(kl,{text:"No features available. Get started by adding a new feature toggle."})})})]})})},rd={toggleFeature:le,fetchFeatureToggles:ue},id=Object(l.b)((function(e,t){var n=e.projects.toJS().find((function(e){return e.id===t.projectId})),a=Object.assign({id:"",name:"",description:""},n),r=e.features.toJS().filter((function(e){return e.project===a.id})),i=e.settings.toJS(),c=e.featureMetrics.toJS();return{project:a,features:r,settings:i,featureMetrics:c}}),rd)(ad),cd=function(e){var t=e.match.params,n=e.history;return Object(dr.jsx)(id,{projectId:t.id,title:"View project",history:n})},od=n(338);var sd=function(e){var t=e.roles,n=e.addUserToRole,i=Object(a.useState)(),c=Object(Sr.a)(i,2),o=c[0],s=c[1],l=Object(a.useState)({}),u=Object(Sr.a)(l,2),d=u[0],j=u[1],h=Object(a.useState)([]),b=Object(Sr.a)(h,2),p=b[0],f=b[1],m=Object(a.useState)(!1),g=Object(Sr.a)(m,2),O=g[0],v=g[1];Object(a.useEffect)((function(){if(t.length>0){var e=t.find((function(e){return"regular"===e.name.toLowerCase()}));j(e||t[0])}}),[t]);var w=function(){var e=Object(_.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>1)){e.next=8;break}return v(!0),e.next=4,xn.searchProjectUser(t);case 4:n=e.sent,f(Object(Xr.a)(n)),e.next=9;break;case 8:f([]);case 9:v(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(e){var t=e.target.value;w(t)},T=function(){var e=Object(_.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,n(o.id,d.id);case 3:s(void 0),f([]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(dr.jsxs)(gr.a,{container:!0,justify:"left",spacing:3,alignItems:"flex-end",children:[Object(dr.jsx)(gr.a,{item:!0,children:Object(dr.jsx)(kc.a,{id:"add-user-component",style:{width:300},noOptionsText:"No users found.",onChange:function(e,t){f([]),s(t)},autoSelect:!1,value:o||"",freeSolo:!0,getOptionSelected:function(){return!0},filterOptions:function(e){return e},getOptionLabel:function(e){return e?"".concat(e.name||"(Empty name)"," <").concat(e.email||e.username,">"):""},options:p,loading:O,renderInput:function(e){return Object(dr.jsx)(Vr.a,Object(x.a)(Object(x.a)({},e),{},{label:"User",variant:"outlined",size:"small",name:"search",onChange:C,InputProps:Object(x.a)(Object(x.a)({},e.InputProps),{},{startAdornment:Object(dr.jsx)(hs.a,{position:"start",children:Object(dr.jsx)(_r.a,{children:"search"})}),endAdornment:Object(dr.jsxs)(r.a.Fragment,{children:[O?Object(dr.jsx)(hu.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))}})}),Object(dr.jsx)(gr.a,{item:!0,children:Object(dr.jsxs)(Hr.a,{variant:"outlined",size:"small",style:{minWidth:"125px"},children:[Object(dr.jsx)(zr.a,{style:{backgroundColor:"#fff"},id:"add-user-select-role-label",children:"Role"}),Object(dr.jsx)(Jr.a,{labelId:"add-user-select-role-label",id:"add-user-select-role",placeholder:"Project role",value:d.id||"",onChange:function(e){var n=+e.target.value,a=t.find((function(e){return e.id===n}));j(a)},children:t.map((function(e){return Object(dr.jsx)(Mr.a,{value:e.id,children:e.name},e.id)}))})]})}),Object(dr.jsx)(gr.a,{item:!0,children:Object(dr.jsx)(ni.a,{variant:"contained",color:"primary",disabled:!o,onClick:T,children:"Add user"})})]})};var ld=function(e){var t=e.projectId,n=e.project,r=Object(a.useState)([]),i=Object(Sr.a)(r,2),c=i[0],o=i[1],l=Object(a.useState)([]),u=Object(Sr.a)(l,2),d=u[0],j=u[1],h=Object(a.useState)(),b=Object(Sr.a)(h,2),p=b[0],f=b[1],m=Object(s.g)(),g=function(){var e=Object(_.a)(y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xn.fetchAccess(t);case 2:n=e.sent,o(n.roles),j(n.users.map((function(e){return Object(x.a)(Object(x.a)({},e),{},{name:e.name||"(No name)"})})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(Object(a.useEffect)((function(){g()}),[t]),!n)return Object(dr.jsx)("p",{children:"...."});var O=function(){var e=Object(_.a)(y.a.mark((function e(n,a){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xn.addUserToRole(t,a,n);case 3:return e.next=5,g();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),f(e.t0.message||"Server problems when adding users.");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),v=function(e,n){return Object(_.a)(y.a.mark((function a(){var r;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,xn.removeUserFromRole(t,n,e);case 3:r=d.filter((function(t){return t.id!==e})),j(r),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),f(a.t0.message||"Server problems when adding users.");case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))},w=function(){f(void 0)};return Object(dr.jsxs)(_u,{style:{minHeight:"400px"},headerContent:Object(dr.jsx)(ii,{title:'Manage Access for project "'.concat(n.name,'"'),actions:Object(dr.jsx)(ni.a,{variant:"contained",color:"primary",onClick:function(){return m.goBack()},children:"Back"})}),children:[Object(dr.jsx)(sd,{roles:c,addUserToRole:O}),Object(dr.jsxs)(lc.a,{open:!!p,onClose:w,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(dr.jsx)(uc.a,{id:"alert-dialog-title",children:"Error"}),Object(dr.jsx)(dc.a,{children:Object(dr.jsx)(Vs.a,{id:"alert-dialog-description",children:p})}),Object(dr.jsx)(jc.a,{children:Object(dr.jsx)(ni.a,{onClick:w,color:"secondary",autoFocus:!0,children:"Close"})})]}),Object(dr.jsx)("div",{style:{height:"1px",width:"106.65%",marginLeft:"-2rem",backgroundColor:"#efefef",marginTop:"2rem"}}),Object(dr.jsx)(Pr.a,{children:d.map((function(e){var n,a,r="checkbox-list-secondary-label-".concat(e.id);return Object(dr.jsxs)(Zc.a,{button:!0,children:[Object(dr.jsx)(Kc.a,{children:Object(dr.jsx)(Xc.a,{alt:e.name,src:e.imageUrl})}),Object(dr.jsx)(Qc.a,{id:r,primary:e.name,secondary:e.email||e.username}),Object(dr.jsxs)(od.a,{style:{display:"flex",alignItems:"center"},children:[Object(dr.jsxs)(Hr.a,{variant:"outlined",size:"small",children:[Object(dr.jsx)(zr.a,{style:{backgroundColor:"#fff"},for:"add-user-select-role-label",children:"Role"}),Object(dr.jsxs)(Jr.a,{labelId:"role-".concat(e.id,"-select-label"),id:"role-".concat(e.id,"-select"),placeholder:"Choose role",value:e.roleId||"",onChange:(n=e.id,a=e.roleId,function(){var e=Object(_.a)(y.a.mark((function e(r){var i,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.target.value,e.prev=1,e.next=4,xn.removeUserFromRole(t,a,n);case 4:return e.next=6,xn.addUserToRole(t,i,n);case 6:c=d.map((function(e){return e.id===n?Object(x.a)(Object(x.a)({},e),{},{roleId:i}):e})),j(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),f(e.t0.message||"Server problems when adding users.");case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()),children:[Object(dr.jsx)(Mr.a,{value:"",disabled:!0,children:"Choose role"}),c.map((function(t){return Object(dr.jsx)(Mr.a,{value:t.id,children:t.name},"".concat(e.id,":").concat(t.id))}))]},e.id)]}),Object(dr.jsx)(yr.a,{style:{marginLeft:"0.5rem"},edge:"end","aria-label":"delete",title:"Remove access",onClick:v(e.id,e.roleId),children:Object(dr.jsx)(_r.a,{children:"delete"})})]})]},e.id)}))})]})},ud=Object(l.b)((function(e,t){var n=e.projects.toJS().find((function(e){return e.id===t.projectId}));return{project:Object.assign({id:"",name:"",description:""},n)}}),(function(){return{}}))(ld),dd=function(e){var t=e.match.params,n=e.history;return Object(dr.jsx)(ud,{projectId:t.id,title:"Edit project Access",history:n})},jd=n(97),hd=n.n(jd),bd=function(e){var t=e.tagTypes,n=e.fetchTagTypes,r=e.removeTagType,i=Object(a.useContext)(el).hasAccess,c=Object(a.useState)({open:!1}),l=Object(Sr.a)(c,2),u=l[0],d=l[1],j=Object(s.g)(),h=Object(Er.a)("(max-width:700px)");Object(a.useEffect)((function(){n()}),[]);var b=Object(dr.jsx)(ii,{title:"Tag Types",actions:Object(dr.jsx)(hr,{condition:i(mo),show:Object(dr.jsx)(hr,{condition:h,show:Object(dr.jsx)(Ir.a,{title:"Add tag type",children:Object(dr.jsx)(yr.a,{"aria-label":"add tag type",onClick:function(){return j.push("/tag-types/create")},children:Object(dr.jsx)(_r.a,{children:"add"})})}),elseShow:Object(dr.jsx)(ni.a,{variant:"contained",color:"primary",onClick:function(){return j.push("/tag-types/create")},children:"Add new tag type"})})})});return Object(dr.jsxs)(qc,{headerContent:b,children:[Object(dr.jsx)(Pr.a,{children:Object(dr.jsx)(hr,{condition:t.length>0,show:t.map((function(e){return function(e){var t=Object(dr.jsx)(o.b,{to:"/tag-types/edit/".concat(e.name),children:Object(dr.jsx)("strong",{children:e.name})}),n=Object(dr.jsx)(Ir.a,{title:"Delete ".concat(e.name),children:Object(dr.jsx)(yr.a,{onClick:function(){return d({open:!0,name:e.name})},children:Object(dr.jsx)(_r.a,{children:"delete"})})});return Object(dr.jsxs)(Zc.a,{classes:{root:hd.a.tagListItem},children:[Object(dr.jsx)(Eu.a,{children:Object(dr.jsx)(_r.a,{children:"label"})}),Object(dr.jsx)(Qc.a,{primary:t,secondary:e.description}),Object(dr.jsx)(hr,{condition:i("DELETE_TAG_TYPE"),show:n})]},"".concat(e.name))}(e)})),elseShow:Object(dr.jsx)(Zc.a,{children:"No entries"})})}),Object(dr.jsx)(Mc,{title:"Really delete Tag type?",open:u.open,onClick:function(){r(u.name),d({open:!1})},onClose:function(){d({open:!1})}})]})},pd=Object(l.b)((function(e){return{tagTypes:e.tagTypes.toJS()}}),(function(e){return{removeTagType:function(t){var n;(n=t,function(e){return e({type:"START_DELETE_TAG_TYPE"}),$e.deleteTagType(n).then((function(){return e({type:at,tagType:{name:n}})})).catch(z(e,"ERROR_DELETE_TAG_TYPE"))})(e)},fetchTagTypes:function(){return ct()(e)}}}))(bd),fd=function(e){var t=e.history;return Object(dr.jsx)(pd,{history:t})},md=function(e){var t=e.tagType,n=e.validateName,r=e.submit,i=e.history,c=e.editMode,o=Object(a.useState)(t.name||""),s=Object(Sr.a)(o,2),l=s[0],u=s[1],d=Object(a.useState)(t.description||""),j=Object(Sr.a)(d,2),h=j[0],b=j[1],p=Object(a.useState)({general:void 0,name:void 0,description:void 0}),f=Object(Sr.a)(p,2),m=f[0],g=f[1],O=Object(a.useContext)(el).hasAccess,x=function(){var e=Object(_.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=t.target.value,e.prev=2,e.next=5,n(a);case 5:g({name:void 0}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),g({name:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(_.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,r({name:l,description:h});case 4:i.push("/tag-types"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),g({general:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),w=c?"Update":"Create";return Object(dr.jsx)(qc,{headerContent:"".concat(w," Tag type"),children:Object(dr.jsxs)("section",{className:fr()(eo.a.contentSpacing,hd.a.tagTypeContainer),children:[Object(dr.jsx)(Rr.a,{variant:"subtitle1",children:"Tag types allows you to group tags together in the management UI"}),Object(dr.jsxs)("form",{onSubmit:v,className:fr()(hd.a.addTagTypeForm,eo.a.contentSpacing),children:[Object(dr.jsx)(Vr.a,{label:"Name",name:"name",placeholder:"url-friendly-unique-name",value:l,error:void 0!==m.name,helperText:m.name,disabled:c,onBlur:x,onChange:function(e){return u(e.target.value.trim())},variant:"outlined",size:"small"}),Object(dr.jsx)(Vr.a,{label:"Description",name:"description",placeholder:"Some short explanation of the tag type",rowsMax:4,multiline:!0,error:void 0!==m.description,helperText:m.description,value:h,onChange:function(e){return b(e.target.value)},variant:"outlined",size:"small"}),Object(dr.jsx)(br,{condition:O(c?"UPDATE_TAG_TYPE":mo),show:Object(dr.jsx)("div",{className:hd.a.formButtons,children:Object(dr.jsx)(ao,{submitText:w,onCancel:function(e){e.preventDefault(),i.push("/tag-types")}})}),elseShow:Object(dr.jsx)("span",{children:"You do not have permissions to save."})})]})]})})},gd=Object(l.b)((function(){return{tagType:{name:"",description:"",icon:""},editMode:!1}}),(function(e){return{validateName:function(e){return function(e){return $e.validateTagType({name:e})}(e)},submit:function(t){return function(e){var t=e.name,n=e.description,a=e.icon;return function(e){return e({type:"START_CREATE_TAG_TYPE"}),$e.create({name:t,description:n,icon:a}).then((function(){return e({type:nt,tagType:{name:t,description:n,icon:a}})})).catch(z(e,"ERROR_CREATE_TAG_TYPE"))}}(t)(e)}}}))(md),Od=function(e){var t=e.history;return Object(dr.jsx)(gd,{title:"Add tag type",history:t})},xd=Object(l.b)((function(e,t){var n=e.tagTypes.toJS().find((function(e){return e.name===t.tagTypeName}));return{tagType:Object.assign({name:"",description:"",icon:""},n),editMode:!0}}),(function(e){return{validateName:function(){},submit:function(t){!function(e){var t=e.name,n=e.description,a=e.icon;return function(e){return e({type:"START_UPDATE_TAG_TYPE"}),$e.update({name:t,description:n,icon:a}).then((function(){return e({type:rt,tagType:{name:t,description:n,icon:a}})})).catch(z(e,"ERROR_UPDATE_TAG_TYPE"))}}(t)(e)}}}))(md),vd=function(e){var t=e.match.params,n=e.history;return Object(dr.jsx)(xd,{tagTypeName:t.name,title:"Edit Tag type",history:n})},yd=Object(mr.a)({tagListItem:{padding:0}}),_d=function(e){var t=e.tags,n=e.fetchTags,r=e.removeTag,i=Object(s.g)(),c=Object(Er.a)("(max-width:700px)"),o=yd(),l=Object(a.useContext)(el).hasAccess;Object(a.useEffect)((function(){n()}),[]);var u=function(e){var t=e.tagType,n=e.tagValue;return Object(dr.jsx)(Ir.a,{title:"Delete tag",children:Object(dr.jsx)(yr.a,{onClick:function(e){return a={type:t,value:n},e.preventDefault(),void r(a);var a},children:Object(dr.jsx)(_r.a,{children:"delete"})})})},d=function(e){var t=e.hasAccess;return Object(dr.jsx)(hr,{condition:t("CREATE_TAG"),show:Object(dr.jsx)(hr,{condition:c,show:Object(dr.jsx)(yr.a,{"aria-label":"add tag",onClick:function(){return i.push("/tags/create")},children:Object(dr.jsx)(_r.a,{children:"add"})}),elseShow:Object(dr.jsx)(Ir.a,{title:"Add new tag",children:Object(dr.jsx)(ni.a,{color:"primary",startIcon:Object(dr.jsx)(_r.a,{children:"add"}),onClick:function(){return i.push("/tags/create")},variant:"contained",children:"Add new tag"})})})})};return Object(dr.jsx)(qc,{headerContent:Object(dr.jsx)(ii,{title:"Tags",actions:Object(dr.jsx)(d,{hasAccess:l})}),children:Object(dr.jsx)(Pr.a,{children:Object(dr.jsx)(hr,{condition:t.length>0,show:t.map((function(e){return function(e){return Object(dr.jsxs)(Zc.a,{className:o.tagListItem,children:[Object(dr.jsx)(Eu.a,{children:Object(dr.jsx)(_r.a,{children:"label"})}),Object(dr.jsx)(Qc.a,{primary:e.value,secondary:e.type}),Object(dr.jsx)(hr,{condition:l("DELETE_TAG"),show:Object(dr.jsx)(u,{tagType:e.type,tagValue:e.value})})]},"".concat(e.type,"_").concat(e.value))}(e)})),elseShow:Object(dr.jsx)(Zc.a,{className:o.tagListItem,children:Object(dr.jsx)(Qc.a,{primary:"No tags available"})})})})})},wd=Object(l.b)((function(e){return{tags:e.tags.toJS()}}),(function(e){return{removeTag:function(t){window.confirm("Are you sure you want to remove this tag?")&&function(e){return function(t){return t({type:"START_DELETE_TAG"}),ut.deleteTag(e).then((function(){return t({type:bt,tag:e})})).catch(z(t,"ERROR_DELETE_TAG"))}}(t)(e)},fetchTags:function(){return pt()(e)}}}))(_d),Cd=function(e){var t=e.history;return Object(dr.jsx)(wd,{history:t})},Td=n(108),Sd=n.n(Td),Ed=function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(S.a)(this,n),(a=t.call(this,e)).setValue=function(e,t){var n=a.state.tag;n[e]=t,a.setState({tag:n,dirty:!0})},a.onCancel=function(e){e.preventDefault(),a.props.history.push("/tags")},a.onSubmit=function(){var e=Object(_.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(n=a.state.tag).type&&""!==n.type||(n.type="simple"),e.prev=3,e.next=6,a.props.submit(n);case 6:a.props.history.push("/tags"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),a.setState({errors:{general:e.t0.message}});case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),a.state={tag:e.tag,errors:{},dirty:!1,currentLegalValue:""},a}return Object(sr.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.tag,a=t.errors,r="Create";return Object(dr.jsx)(qc,{headerContent:"".concat(r," Tag"),children:Object(dr.jsx)("section",{className:Sd.a.container,children:Object(dr.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(dr.jsx)("p",{style:{color:"red"},children:a.general}),Object(dr.jsx)(Bs,{name:"type",value:n.type,onChange:function(t){return e.setValue("type",t.target.value)},className:Sd.a.select}),Object(dr.jsx)(Vr.a,{label:"Value",name:"value",placeholder:"Your tag",size:"small",variant:"outlined",rowsMax:4,value:n.value,error:void 0!==a.value,helperText:a.value,onChange:function(t){return e.setValue("value",t.target.value)},className:Sd.a.textfield}),Object(dr.jsx)("div",{className:Sd.a.formbuttons,children:Object(dr.jsx)(ao,{submitText:r,onCancel:this.onCancel})})]})})})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return!t.tag.id&&e.tag.id?{tag:e.tag}:null}}]),n}(a.Component),kd=Object(l.b)((function(){return{tag:{type:"",value:""}}}),(function(e){return{submit:function(t){return function(e){var t=e.type,n=e.value;return function(e){return e({type:"START_CREATE_TAG"}),ut.create({type:t,value:n}).then((function(){return e({type:ht,tag:{type:t,value:n}})})).catch(z(e,"ERROR_CREATE_TAG"))}}(t)(e)}}}))(Ed),Nd=function(e){var t=e.history;return Object(dr.jsx)(kd,{title:"Add Tag",history:t})},Ad=function(e){var t=e.addons,n=e.hasAccess,a=e.removeAddon,r=e.getIcon,i=e.toggleAddon,c=function(e){return function(){return a(e)}};return Object(dr.jsx)(qc,{headerContent:"Configured addons",children:Object(dr.jsx)(Pr.a,{children:t.map((function(e){return function(e){return Object(dr.jsxs)(Zc.a,{children:[Object(dr.jsx)(Kc.a,{children:r(e.provider)}),Object(dr.jsx)(Qc.a,{primary:Object(dr.jsxs)("span",{children:[Object(dr.jsx)(hr,{condition:n(go),show:Object(dr.jsx)(o.b,{style:{textDecoration:"none",color:"inherit"},to:"/addons/edit/".concat(e.id),children:Object(dr.jsx)("strong",{children:e.provider})}),elseShow:Object(dr.jsx)("strong",{children:e.provider})}),e.enabled?null:Object(dr.jsx)("small",{children:" (Disabled)"})]}),secondary:e.description}),Object(dr.jsxs)(od.a,{children:[Object(dr.jsx)(hr,{condition:n(go),show:Object(dr.jsx)(yr.a,{size:"small",title:e.enabled?"Disable addon":"Enable addon",onClick:function(){return i(e)},children:Object(dr.jsx)(_r.a,{children:e.enabled?"visibility":"visibility_off"})})}),Object(dr.jsx)(hr,{condition:n("DELETE_ADDON"),show:Object(dr.jsx)(yr.a,{size:"small",title:"Remove addon",onClick:c(e),children:Object(dr.jsx)(_r.a,{children:"delete"})})})]})]},e.id)}(e)}))})})},Rd=function(e){var t=e.providers,n=e.getIcon,a=e.hasAccess,r=e.history;return Object(dr.jsx)(qc,{headerContent:"Available addons",children:Object(dr.jsx)(Pr.a,{children:t.map((function(e){return function(e){return Object(dr.jsxs)(Zc.a,{children:[Object(dr.jsx)(Kc.a,{children:n(e.name)}),Object(dr.jsx)(Qc.a,{primary:e.displayName,secondary:e.description}),Object(dr.jsx)(od.a,{children:Object(dr.jsx)(hr,{condition:a("CREATE_ADDON"),show:Object(dr.jsx)(ni.a,{variant:"contained",name:"device_hub",onClick:function(){return r.push("/addons/create/".concat(e.name))},title:"Configure",children:"Configure"})})})]},e.name)}(e)}))})})},Id=n.p+"static/media/teams.7d4f3481.svg",Dd=n.p+"static/media/datadog.a761520d.svg",Ld={width:"40px",height:"40px",marginRight:"16px",float:"left"},Pd=function(e){switch(e){case"slack":return Object(dr.jsx)("img",{style:Ld,alt:"Slack Logo",src:T(Rs)});case"jira-comment":return Object(dr.jsx)("img",{style:Ld,alt:"JIRA Logo",src:T(Is)});case"webhook":return Object(dr.jsx)("img",{style:Ld,alt:"Generic Webhook logo",src:T(Ds)});case"teams":return Object(dr.jsx)("img",{style:Ld,alt:"Microsoft Teams Logo",src:T(Id)});case"datadog":return Object(dr.jsx)("img",{style:Ld,alt:"Datadog",src:T(Dd)});default:return Object(dr.jsx)(Xc.a,{children:Object(dr.jsx)(_r.a,{children:"device_hub"})})}},Fd=function(e){var t=e.addons,n=e.providers,r=e.fetchAddons,i=e.removeAddon,c=e.toggleAddon,o=e.history,s=Object(a.useContext)(el).hasAccess;return Object(a.useEffect)((function(){0===t.length&&r()}),[t.length]),Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(hr,{condition:t.length>0,show:Object(dr.jsx)(Ad,{addons:t,toggleAddon:c,hasAccess:s,removeAddon:i,getIcon:Pd})}),Object(dr.jsx)("br",{}),Object(dr.jsx)(Rd,{providers:n,hasAccess:s,history:o,getIcon:Pd})]})},Ud=Object(l.b)((function(e){var t=e.addons.toJS();return{addons:t.addons,providers:t.providers}}),(function(e){return{removeAddon:function(t){window.confirm("Are you sure you want to remove this addon?")&&zn(t)(e)},fetchAddons:function(){return Hn()(e)},toggleAddon:function(t){return Yn(Object(x.a)(Object(x.a)({},t),{},{enabled:!t.enabled}))(e)}}}))(Fd),Vd=function(e){var t=e.history;return Object(dr.jsx)(Ud,{history:t})},Gd=function(e){var t=e.definition,n=e.config,a=e.errors,r=e.setParameterValue,i=n.parameters[t.name]||"",c=function(e,t){var n=e.type,a=void 0===n?"text":n,r=e.sensitive;return void 0!==r&&r&&"*****"===t||"textfield"===a?"text":a}(t,i),o=a.parameters[t.name];return Object(dr.jsx)("div",{style:{width:"80%",marginTop:"25px"},children:Object(dr.jsx)(Vr.a,{size:"small",style:{width:"100%"},rows:"textfield"===t.type?9:0,multiline:"textfield"===t.type,type:c,label:t.displayName,name:t.name,placeholder:t.placeholder||"",InputLabelProps:{shrink:!0},value:i,error:o,onChange:r(t.name),variant:"outlined",helperText:t.description})})},Bd=function(e){var t=e.provider,n=e.config,a=e.errors,i=e.setParameterValue,c=e.editMode;return t?Object(dr.jsxs)(r.a.Fragment,{children:[Object(dr.jsx)("h4",{children:"Parameters"}),c?Object(dr.jsxs)("p",{children:['Sensitive parameters will be masked with value "',Object(dr.jsx)("i",{children:"*****"}),"\". If you don't change the value they will not be updated when saving."]}):null,t.parameters.map((function(e){return Object(dr.jsx)(Gd,{definition:e,errors:a,config:n,setParameterValue:i},e.name)}))]}):null},Md=function(e){var t=e.provider,n=e.checkedEvents,a=e.setEventValue,i=e.error;return t?Object(dr.jsxs)(r.a.Fragment,{children:[Object(dr.jsx)("h4",{children:"Events"}),Object(dr.jsx)("span",{className:eo.a.error,children:i}),Object(dr.jsx)(gr.a,{container:!0,spacing:0,children:t.events.map((function(e){return Object(dr.jsx)(gr.a,{item:!0,xs:4,children:Object(dr.jsx)(Sc.a,{control:Object(dr.jsx)(Fl.a,{checked:n.includes(e),onChange:a(e)}),label:e})},e)}))})]}):null},Hd=n(82),zd=n.n(Hd),Jd=function(e){var t=e.editMode,n=e.provider,r=e.addon,i=e.fetch,c=e.cancel,o=e.submit,s=Object(a.useState)(r),l=Object(Sr.a)(s,2),u=l[0],d=l[1],j=Object(a.useState)({parameters:{}}),h=Object(Sr.a)(j,2),b=h[0],p=h[1],f=t?"Update":"Create";Object(a.useEffect)((function(){n||i()}),[i,n]),Object(a.useEffect)((function(){d(Object(x.a)({},r))}),[r]),Object(a.useEffect)((function(){n&&!u.provider&&d(Object(x.a)(Object(x.a)({},r),{},{provider:n.name}))}),[n,r,u.provider]);var m,g=function(){var e=Object(_.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n){e.next=3;break}return e.abrupt("return");case 3:if((a=$r()(b)).containsErrors=!1,0===u.events.length&&(a.events="You must listen to at least one event",a.containsErrors=!0),n.parameters.forEach((function(e){var t=bi(u.parameters[e.name]);e.required&&!t&&(a.parameters[e.name]="This field is required",a.containsErrors=!0)})),!a.containsErrors){e.next=10;break}return p(a),e.abrupt("return");case 10:return e.prev=10,e.next=13,o(u);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),p({parameters:{},general:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[10,15]])})));return function(t){return e.apply(this,arguments)}}(),O=n||{},v=O.name,w=O.description,C=O.documentationUrl,T=void 0===C?"https://unleash.github.io/docs/addons":C;return Object(dr.jsxs)(qc,{headerContent:"Configure ".concat(v," addon"),children:[Object(dr.jsxs)("section",{className:zd.a.formSection,children:[w,"\xa0",Object(dr.jsx)("a",{href:T,target:"_blank",rel:"noreferrer",children:"Read more"}),Object(dr.jsx)("p",{className:eo.a.error,children:b.general})]}),Object(dr.jsxs)("form",{onSubmit:g,children:[Object(dr.jsxs)("section",{className:zd.a.formSection,children:[Object(dr.jsx)(Vr.a,{size:"small",label:"Provider",name:"provider",value:u.provider,disabled:!0,variant:"outlined",className:zd.a.nameInput}),Object(dr.jsx)(Sc.a,{control:Object(dr.jsx)(Gr.a,{checked:u.enabled,onChange:function(e){e.preventDefault();var t=!u.enabled;d(Object(x.a)(Object(x.a)({},u),{},{enabled:t}))}}),label:u.enabled?"Enabled":"Disabled"})]}),Object(dr.jsx)("section",{className:zd.a.formSection,children:Object(dr.jsx)(Vr.a,{size:"small",style:{width:"80%"},rows:4,multiline:!0,label:"Description",name:"description",placeholder:"",value:u.description,error:b.description,onChange:(m="description",function(e){e.preventDefault();var t=Object(x.a)({},u);t[m]=e.target.value,d(t)}),variant:"outlined"})}),Object(dr.jsx)("section",{className:zd.a.formSection,children:Object(dr.jsx)(Md,{provider:n,checkedEvents:u.events,setEventValue:function(e){return function(t){var n=Object(x.a)({},u);t.target.checked?n.events.push(e):n.events=n.events.filter((function(t){return t!==e})),d(n),p(Object(x.a)(Object(x.a)({},b),{},{events:void 0}))}},error:b.events})}),Object(dr.jsx)("section",{className:zd.a.formSection,children:Object(dr.jsx)(Bd,{provider:n,config:u,errors:b,editMode:t,setParameterValue:function(e){return function(t){t.preventDefault();var n=Object(x.a)({},u);n.parameters[e]=t.target.value,d(n)}}})}),Object(dr.jsx)("section",{className:zd.a.formSection,children:Object(dr.jsx)(ao,{submitText:f,onCancel:c})})]})]})},Yd={provider:"",description:"",enabled:!0,parameters:{},events:[]},Wd=Object(l.b)((function(e,t){var n,a,r=$r()(Yd),i=!!t.addonId,c=e.addons.get("addons").toJS(),o=e.addons.get("providers").toJS();return i?a=(n=c.find((function(e){return e.id===+t.addonId}))||r)?o.find((function(e){return e.name===n.provider})):void 0:(a=o.find((function(e){return e.name===t.provider})),n=Object(x.a)(Object(x.a)({},r),{},{provider:a?a.name:""})),{provider:a,addon:n,editMode:i}}),(function(e,t){var n=t.addonId,a=t.history,r=n?Yn:Jn;return{submit:function(){var t=Object(_.a)(y.a.mark((function t(n){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r(n)(e);case 2:a.push("/addons");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),fetch:function(){return Hn()(e)},cancel:function(){return a.push("/addons")}}}))(Jd),qd=function(e){var t=e.match.params,n=e.history;return Object(dr.jsx)(Wd,{provider:t.provider,title:"Configure addon",history:n})},Zd=function(e){var t=e.match.params,n=e.history;return Object(dr.jsx)(Wd,{addonId:t.id,title:"Edit addon",history:n})},Kd=function(){return Object(dr.jsx)(s.a,{to:"/admin/users"})},Xd=Object(mr.a)({addApiKeyForm:{display:"flex",flexDirection:"column"}});var Qd=function(e){var t=e.addKey,n=e.show,r=e.setShow,i=Xd(),c=Object(a.useState)("CLIENT"),o=Object(Sr.a)(c,2),s=o[0],l=o[1],u=Object(a.useState)(),d=Object(Sr.a)(u,2),j=d[0],h=d[1],b=Object(a.useState)(),p=Object(Sr.a)(b,2),f=p[0],m=p[1],g=function(e){e.preventDefault(),r(!n)},O=function(){var e=Object(_.a)(y.a.mark((function e(n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),j){e.next=4;break}return m("You must define a username"),e.abrupt("return");case 4:return e.next=6,t({username:j,type:s});case 6:h(""),l("CLIENT"),r(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(dr.jsxs)("div",{style:{margin:"5px"},children:[Object(dr.jsx)(Mc,{onClick:function(e){O(e),r(!1)},open:n,primaryButtonText:"Create new key",onClose:g,secondaryButtonText:"Cancel",title:"Add new API key",children:Object(dr.jsxs)("form",{onSubmit:O,className:fr()(i.addApiKeyForm,eo.a.contentSpacing),children:[Object(dr.jsx)(Vr.a,{value:j||"",name:"username",onChange:function(e){return h(e.target.value)},label:"Username",style:{width:"200px"},error:void 0!==f,helperText:f,variant:"outlined",size:"small"}),Object(dr.jsxs)(Hr.a,{variant:"outlined",size:"small",style:{minWidth:"120px"},children:[Object(dr.jsx)(zr.a,{id:"apikey_type"}),Object(dr.jsxs)(Jr.a,{labelId:"apikey_type",id:"apikey_select",value:s,onChange:function(e){return l(e.target.value)},children:[Object(dr.jsx)(Mr.a,{value:"CLIENT",title:"Client",children:"Client"},"apikey_client"),Object(dr.jsx)(Mr.a,{value:"ADMIN",title:"Admin",children:"Admin"},"apikey_admin")]})]})]})}),Object(dr.jsx)(ni.a,{onClick:g,variant:"contained",color:"primary",children:"Add new API key"})]})};var $d=function(e){var t=e.value,n=Object(a.useState)(!1),r=Object(Sr.a)(n,2),i=r[0],c=r[1];return Object(dr.jsxs)("div",{children:[i?Object(dr.jsx)("input",{readOnly:!0,value:t,style:{width:"240px"}}):Object(dr.jsx)("span",{children:"***************************"}),Object(dr.jsx)(yr.a,{"aria-label":"Show token",onClick:function(e){e.preventDefault(),c(!i)},title:"Show token",children:Object(dr.jsx)(_r.a,{style:{marginLeft:"5px",fontSize:"1.2em"},children:"visibility"})})]})};var ej=function(e){var t=e.location,n=e.fetchApiKeys,r=e.removeKey,i=e.addKey,c=e.keys,o=e.unleashUrl,s=Object(a.useState)(!1),l=Object(Sr.a)(s,2),u=l[0],d=l[1],j=Object(a.useContext)(el).hasAccess,h=Object(a.useState)(!1),b=Object(Sr.a)(h,2),p=b[0],f=b[1],m=Object(a.useState)(void 0),g=Object(Sr.a)(m,2),O=g[0],x=g[1],v=function(){var e=Object(_.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(O);case 2:x(void 0),f(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){n()}),[]),Object(dr.jsx)(_u,{headerContent:Object(dr.jsx)(ii,{title:"API Access",actions:Object(dr.jsx)(hr,{condition:j("CREATE_API_TOKEN"),show:Object(dr.jsx)(Qd,{addKey:i,setShow:d,show:u})})}),children:Object(dr.jsxs)("div",{children:[Object(dr.jsxs)(ai.a,{severity:"info",children:[Object(dr.jsxs)("p",{children:["Read the"," ",Object(dr.jsx)("a",{href:"https://docs.getunleash.io/docs",target:"_blank",rel:"noreferrer",children:"Getting started guide"})," ","to learn how to connect to the Unleash API from your application or programmatically. Please note it can take up to 1 minute before a new API key is activated."]}),Object(dr.jsx)("br",{}),Object(dr.jsx)("strong",{children:"API URL: "})," ",Object(dr.jsxs)("pre",{style:{display:"inline"},children:[o,"/api/"]})]}),Object(dr.jsx)("br",{}),Object(dr.jsx)("br",{}),Object(dr.jsx)("br",{}),Object(dr.jsxs)(us.a,{children:[Object(dr.jsx)(ds.a,{children:Object(dr.jsxs)(is.a,{children:[Object(dr.jsx)(cs.a,{children:"Created"}),Object(dr.jsx)(cs.a,{children:"Username"}),Object(dr.jsx)(cs.a,{children:"Access Type"}),Object(dr.jsx)(cs.a,{children:"Secret"}),Object(dr.jsx)(cs.a,{children:"Action"})]})}),Object(dr.jsx)(js.a,{children:c.map((function(e){return Object(dr.jsxs)(is.a,{children:[Object(dr.jsx)(cs.a,{style:{textAlign:"left"},children:ji(e.createdAt,t.locale)}),Object(dr.jsx)(cs.a,{style:{textAlign:"left"},children:e.username}),Object(dr.jsx)(cs.a,{style:{textAlign:"left"},children:e.type}),Object(dr.jsx)(cs.a,{style:{textAlign:"left"},children:Object(dr.jsx)($d,{value:e.secret})}),Object(dr.jsx)(hr,{condition:j("DELETE_API_TOKEN"),show:Object(dr.jsx)(cs.a,{style:{textAlign:"right"},children:Object(dr.jsx)(yr.a,{onClick:function(){x(e.secret),f(!0)},children:Object(dr.jsx)(_r.a,{children:"delete"})})})})]},e.secret)}))})]}),Object(dr.jsx)(Mc,{open:p,onClick:v,onClose:function(){f(!1),x(void 0)},title:"Really delete API key?",children:Object(dr.jsx)("div",{children:"Are you sure you want to delete?"})})]})})},tj=Object(l.b)((function(e){return{location:e.settings.toJS().location||{},unleashUrl:e.uiConfig.toJS().unleashUrl,keys:e.apiAdmin.toJS()}}),{fetchApiKeys:function(){return Fa("Start fetching api-keys"),function(e){return Ia.fetchAll().then((function(t){return e({type:Da,tokens:t.tokens})})).catch(z(e,"ERROR_FETCH_KEYS"))}},removeKey:function(e){return function(t){return Ia.remove(e).then((function(){return t({type:La,secret:e})})).catch(z(t,La))}},addKey:function(e){return function(t){return Ia.create(e).then((function(e){return t({type:Pa,token:e})})).catch(z(t,"ADD_KEY_ERROR"))}}})(ej),nj={display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textDecoration:"none",color:"inherit",padding:"0.8rem 1.5rem"},aj={fontWeight:"bold",borderRadius:"3px",padding:"0.8rem 1.5rem"};var rj=function(e){var t=e.history.location.pathname;return Object(dr.jsx)(Yc.a,{style:{marginBottom:"1rem"},children:Object(dr.jsxs)(Ws.a,{centered:!0,value:t,children:[Object(dr.jsx)(Ys.a,{value:"/admin/users",label:Object(dr.jsx)(o.c,{to:"/admin/users",activeStyle:aj,style:nj,children:Object(dr.jsx)("span",{children:"Users"})})}),Object(dr.jsx)(Ys.a,{value:"/admin/api",label:Object(dr.jsx)(o.c,{to:"/admin/api",activeStyle:aj,style:nj,children:"API Access"})}),Object(dr.jsx)(Ys.a,{value:"/admin/auth",label:Object(dr.jsx)(o.c,{to:"/admin/auth",activeStyle:aj,style:nj,children:"Authentication"})})]})})},ij=function(e){var t=e.history;return Object(dr.jsxs)("div",{children:[Object(dr.jsx)(rj,{history:t}),Object(dr.jsx)(tj,{})]})},cj=n(362),oj=n(349),sj=Object(mr.a)((function(e){return{roleBox:{margin:"3px 0",border:"1px solid #EFEFEF",padding:"1rem"},userInfoContainer:{margin:"-20px 0"},roleRadio:{marginRight:"15px"},roleSubtitle:{marginBottom:"0.5rem"},errorAlert:{marginBottom:"1rem"}}})),lj=200,uj=function(){var e=Object(a.useState)({}),t=Object(Sr.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(!1),c=Object(Sr.a)(i,2),o=c[0],s=c[1],l={headers:F,credentials:"include"},u=function(){var e=Object(_.a)(y.a.mark((function e(t,n){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,t();case 4:if(a=e.sent,s(!1),!(a.status>299)){e.next=9;break}return e.next=9,f(a,n);case 9:return a.status===lj&&r({}),e.abrupt("return",a);case 13:throw e.prev=13,e.t0=e.catch(1),s(!1),e.t0;case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=Object(_.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u((function(){var e=C("api/admin/user-admin");return fetch(e,Object(x.a)(Object(x.a)({},l),{},{method:"POST",body:JSON.stringify(t)}))}),"addUser"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(_.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u((function(){var e=C("api/admin/user-admin/".concat(t.id));return fetch(e,Object(x.a)(Object(x.a)({},l),{},{method:"DELETE"}))}),"removeUser"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(_.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u((function(){var e=C("api/admin/user-admin/".concat(t.id));return fetch(e,Object(x.a)(Object(x.a)({},l),{},{method:"PUT",body:JSON.stringify(t)}))}),"updateUser"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(_.a)(y.a.mark((function e(t,n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u((function(){var e=C("api/admin/user-admin/".concat(t.id,"/change-password"));return fetch(e,Object(x.a)(Object(x.a)({},l),{},{method:"POST",body:JSON.stringify({password:n})}))}),"changePassword"));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=Object(_.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u((function(){var e=C("api/admin/user-admin/validate-password");return fetch(e,Object(x.a)(Object(x.a)({},l),{},{method:"POST",body:JSON.stringify({password:t})}))}),"validatePassword"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(_.a)(y.a.mark((function e(t,n){var a,i,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(400!==t.status){e.next=6;break}return e.next=3,t.json();case 3:throw a=e.sent,r((function(e){return Object(x.a)(Object(x.a)({},e),{},Object(Ai.a)({},n,a[0].msg))})),new Error;case 6:if(404!==t.status){e.next=9;break}throw r((function(e){return Object(x.a)(Object(x.a)({},e),{},Object(Ai.a)({},n,"Could not find the requested resource."))})),new L(t.status);case 9:if(401!==t.status){e.next=15;break}return e.next=12,t.json();case 12:throw i=e.sent,r((function(e){return Object(x.a)(Object(x.a)({},e),{},Object(Ai.a)({},n,i[0].msg))})),new I(t.status);case 15:if(403!==t.status){e.next=21;break}return e.next=18,t.json();case 18:throw c=e.sent,r((function(e){return Object(x.a)(Object(x.a)({},e),{},Object(Ai.a)({},n,c[0].msg))})),new D(t.status);case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return{addUser:d,updateUser:h,removeUser:j,changePassword:b,validatePassword:p,userApiErrors:n,userLoading:o}};var dj=function(e){var t=e.submit,n=e.data,a=e.error,r=e.setData,i=e.roles,c=e.userLoading,o=e.userApiErrors,s=_l(c),l=Gi(),u=sj(),d=o.addUser||o.updateUser;return Object(dr.jsx)("div",{ref:s,children:Object(dr.jsx)("form",{onSubmit:t,children:Object(dr.jsxs)(dc.a,{children:[Object(dr.jsx)(br,{condition:d,show:Object(dr.jsx)(ai.a,{className:u.errorAlert,severity:"error","data-loading":!0,children:d})}),Object(dr.jsxs)("div",{className:fr()(l.contentSpacingY,l.flexColumn,u.userInfoContainer),children:[Object(dr.jsx)(Rr.a,{variant:"subtitle1","data-loading":!0,children:"Who is your team member?"}),Object(dr.jsx)(br,{condition:a.general,show:Object(dr.jsx)("p",{"data-loading":!0,style:{color:"red"},children:a.general})}),Object(dr.jsx)(Vr.a,{label:"Full name","data-loading":!0,name:"name",value:n.name||"",error:void 0!==a.name,helperText:a.name,type:"name",variant:"outlined",size:"small",onChange:function(e){r(Object(x.a)(Object(x.a)({},n),{},Object(Ai.a)({},e.target.name,e.target.value)))}}),Object(dr.jsx)(Vr.a,{label:"Email","data-loading":!0,name:"email",required:!0,value:n.email||"",error:void 0!==a.email,helperText:a.email,variant:"outlined",size:"small",type:"email",onChange:function(e){r(Object(x.a)(Object(x.a)({},n),{},Object(Ai.a)({},e.target.name,bi(e.target.value))))}}),Object(dr.jsx)("br",{}),Object(dr.jsx)("br",{})]}),Object(dr.jsxs)(Hr.a,{children:[Object(dr.jsx)(Rr.a,{variant:"subtitle1",className:u.roleSubtitle,"data-loading":!0,children:"What is your team member allowed to do?"}),Object(dr.jsx)(cj.a,{name:"rootRole",value:n.rootRole||"",onChange:function(e){r(Object(x.a)(Object(x.a)({},n),{},Object(Ai.a)({},e.target.name,+e.target.value)))},"data-loading":!0,children:i.sort((function(e,t){return t.name[0]<e.name[0]?1:e.name[0]<t.name[0]?-1:0})).map((function(e){return Object(dr.jsx)(Sc.a,{labelPlacement:"end",className:u.roleBox,label:Object(dr.jsxs)("div",{children:[Object(dr.jsx)("strong",{children:e.name}),Object(dr.jsx)(Rr.a,{variant:"body2",children:e.description})]}),control:Object(dr.jsx)(oj.a,{checked:e.id===n.rootRole,className:u.roleRadio}),value:e.id},"role-".concat(e.id))}))})]})]})})})},jj={email:"",name:"",rootRole:2},hj=function(e){var t=e.showDialog,n=e.closeDialog,r=e.userLoading,i=e.addUser,c=e.userApiErrors,o=e.roles,s=Object(a.useState)(jj),l=Object(Sr.a)(s,2),u=l[0],d=l[1],j=Object(a.useState)({}),h=Object(Sr.a)(j,2),b=h[0],p=h[1],f=function(){var e=Object(_.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),u.email){e.next=4;break}return p({general:"You must specify the email address"}),e.abrupt("return");case 4:if(u.rootRole){e.next=7;break}return p({general:"You must specify a role for the user"}),e.abrupt("return");case 7:return e.next=9,i(u);case 9:d(jj),p({});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(dr.jsx)(bs,{onClick:function(e){f(e)},open:t,onClose:function(e){e.preventDefault(),d(jj),p({}),n()},primaryButtonText:"Add user",secondaryButtonText:"Cancel",title:"Add team member",fullWidth:!0,children:Object(dr.jsx)(dj,{userApiErrors:c,data:u,setData:d,roles:o,submit:f,error:b,userLoading:r})})},bj={overlay:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",zIndex:5},content:{width:"500px",maxWidth:"90%",margin:"0",top:"50%",left:"50%",right:"auto",bottom:"auto",transform:"translate(-50%, -50%)"}},pj=Object(bc.a)((function(e){var t;return{container:{border:"1px solid #f1f1f1",borderRadius:"3px",position:"relative",maxWidth:"350px",color:"#44606e"},headerContainer:{display:"flex",padding:"0.5rem"},divider:{backgroundColor:null===(t=e.palette.borders)||void 0===t?void 0:t.main,height:"1px",width:"100%"},checkContainer:{width:"95px",margin:"0 0.25rem",display:"flex",justifyContent:"center"},statusBarContainer:{display:"flex",padding:"0.5rem"},statusBar:{width:"50px",borderRadius:"3px",backgroundColor:"red",height:"6px"},title:{marginBottom:"0",display:"flex",alignItems:"center"},statusBarSuccess:{backgroundColor:e.palette.primary.main},helpIcon:{height:"17.5px"},repeatingError:{marginTop:"0.5rem",bottom:"0",position:"absolute"}}})),fj=n(182),mj=n.n(fj),gj=function(e){var t=e.password,n=e.callback,r=e.style,i=void 0===r?{}:r,c=pj(),o=Object(a.useState)(!0),s=Object(Sr.a)(o,2),l=s[0],u=s[1],d=Object(a.useState)(!0),j=Object(Sr.a)(d,2),h=j[0],b=j[1],p=Object(a.useState)(!0),f=Object(Sr.a)(p,2),m=f[0],g=f[1],O=Object(a.useState)(!0),v=Object(Sr.a)(O,2),w=v[0],T=v[1],S=Object(a.useState)(!1),E=Object(Sr.a)(S,2),k=E[0],N=E[1],A=Object(a.useCallback)((function(){var e=C("auth/reset/validate-password");return fetch(e,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({password:t})})}),[t]),R=Object(a.useCallback)((function(){D(!1)}),[]),I=Object(a.useCallback)(Object(_.a)(y.a.mark((function e(){var a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return D(!0),e.abrupt("return");case 3:if(!(t.length<3)){e.next=6;break}return T(!0),e.abrupt("return");case 6:return e.prev=6,e.next=9,A();case 9:if(400!==(a=e.sent).status){e.next=16;break}return e.next=13,a.json();case 13:r=e.sent,L(r),n(!1);case 16:a.status===lj&&(R(),N(!1),n(!0)),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(6),console.log("An exception was caught and handled");case 22:case"end":return e.stop()}}),e,null,[[6,19]])}))),[A,n,t,R]);Object(a.useEffect)((function(){I()}),[t,I]);var D=function(e){u(e),b(e),g(e),T(e)},L=function(e){var t=e.details[0].validationErrors;t.includes("The password must contain at least one number.")?b(!0):b(!1),t.includes("The password must contain at least one special character.")?g(!0):g(!1),t.includes("The password must be at least 10 characters long.")?T(!0):T(!1),t.includes("The password must contain at least one lowercase letter.")||t.includes("The password must contain at least one uppercase letter.")?u(!0):u(!1),t.includes("The password may not contain sequences of three or more repeated characters.")?N(!0):N(!1)},P=fr()(c.statusBar,Object(Ai.a)({},c.statusBarSuccess,!w)),F=fr()(c.statusBar,Object(Ai.a)({},c.statusBarSuccess,!h)),U=fr()(c.statusBar,Object(Ai.a)({},c.statusBarSuccess,!m)),V=fr()(c.statusBar,Object(Ai.a)({},c.statusBarSuccess,!l));return Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(Ir.a,{arrow:!0,title:"Your password needs to be at least ten characters long, and include an uppercase letter, a lowercase letter, a number and a symbol to be a valid OWASP password",children:Object(dr.jsxs)(Rr.a,{variant:"body2",className:c.title,"data-loading":!0,children:["Please set a strong password",Object(dr.jsx)(mj.a,{className:c.helpIcon})]})}),Object(dr.jsxs)("div",{className:c.container,style:Object(x.a)({},i),children:[Object(dr.jsxs)("div",{className:c.headerContainer,children:[Object(dr.jsx)("div",{className:c.checkContainer,children:Object(dr.jsx)(Rr.a,{variant:"body2","data-loading":!0,children:"Length"})}),Object(dr.jsx)("div",{className:c.checkContainer,children:Object(dr.jsx)(Rr.a,{variant:"body2","data-loading":!0,children:"Casing"})}),Object(dr.jsx)("div",{className:c.checkContainer,children:Object(dr.jsx)(Rr.a,{variant:"body2","data-loading":!0,children:"Number"})}),Object(dr.jsx)("div",{className:c.checkContainer,children:Object(dr.jsx)(Rr.a,{variant:"body2","data-loading":!0,children:"Symbol"})})]}),Object(dr.jsx)("div",{className:c.divider}),Object(dr.jsxs)("div",{className:c.statusBarContainer,children:[Object(dr.jsx)("div",{className:c.checkContainer,children:Object(dr.jsx)("div",{className:P,"data-loading":!0})}),Object(dr.jsx)("div",{className:c.checkContainer,children:Object(dr.jsx)("div",{className:V,"data-loading":!0})})," ",Object(dr.jsx)("div",{className:c.checkContainer,children:Object(dr.jsx)("div",{className:F,"data-loading":!0})}),Object(dr.jsx)("div",{className:c.checkContainer,children:Object(dr.jsx)("div",{className:U,"data-loading":!0})})]}),Object(dr.jsx)(br,{condition:k,show:Object(dr.jsx)(ai.a,{severity:"error",className:c.repeatingError,children:"You may not repeat three characters in a row."})})]})]})},Oj=n(86),xj=n.n(Oj),vj=Object(bc.a)((function(e){return{matcherContainer:{position:"relative"},matcherIcon:{marginRight:"5px"},matcher:{position:"absolute",bottom:"-8px",display:"flex",alignItems:"center"},matcherError:{color:e.palette.error.main},matcherSuccess:{color:e.palette.primary.main}}})),yj=function(e){var t=e.started,n=e.matchingPasswords,a=vj();return Object(dr.jsx)("div",{className:a.matcherContainer,children:Object(dr.jsx)(br,{condition:t,show:Object(dr.jsx)(br,{condition:n,show:Object(dr.jsxs)(Rr.a,{variant:"body2","data-loading":!0,className:fr()(a.matcher,Object(Ai.a)({},a.matcherSuccess,n)),children:[Object(dr.jsx)(xj.a,{className:a.matcherIcon})," ","Passwords match"]}),elseShow:Object(dr.jsx)(Rr.a,{variant:"body2","data-loading":!0,className:fr()(a.matcher,Object(Ai.a)({},a.matcherError,!n)),children:"Passwords do not match"})})})})};var _j=function(e){var t=e.showDialog,n=e.closeDialog,r=e.changePassword,i=e.user,c=void 0===i?{}:i,o=Object(a.useState)({}),s=Object(Sr.a)(o,2),l=s[0],u=s[1],d=Object(a.useState)({}),j=Object(Sr.a)(d,2),h=j[0],b=j[1],p=Object(a.useState)(!1),f=Object(Sr.a)(p,2),m=f[0],g=f[1],O=Gi(),v=function(e){b({}),u(Object(x.a)(Object(x.a)({},l),{},Object(Ai.a)({},e.target.name,bi(e.target.value))))},w=function(){var e=Object(_.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),m){e.next=8;break}if(l.password&&!(l.password.length<8)){e.next=5;break}return b({password:"You must specify a password with at least 8 chars."}),e.abrupt("return");case 5:if(l.password===l.confirm){e.next=8;break}return b({confirm:"Passwords does not match"}),e.abrupt("return");case 8:return e.prev=8,e.next=11,r(c,l.password);case 11:u({}),n(),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(8),a=e.t0.message||"Could not update password",b({general:a});case 19:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(dr.jsx)(Mc,{open:t,onClick:w,style:bj,onClose:function(e){e.preventDefault(),u({}),n()},primaryButtonText:"Save",title:"Update password",secondaryButtonText:"Cancel",children:Object(dr.jsxs)("form",{onSubmit:w,className:fr()(O.contentSpacingY,O.flexColumn),children:[Object(dr.jsx)(br,{condition:h.general,show:Object(dr.jsx)(ai.a,{severity:"error",children:h.general})}),Object(dr.jsx)(Rr.a,{variant:"subtitle1",children:"Changing password for user"}),Object(dr.jsxs)("div",{className:O.flexRow,children:[Object(dr.jsx)(Xc.a,{variant:"rounded",alt:c.name,src:c.imageUrl,title:"".concat(c.name||c.email||c.username," (id: ").concat(c.id,")")}),Object(dr.jsx)(Rr.a,{variant:"subtitle1",style:{marginLeft:"1rem"},children:c.username||c.email})]}),Object(dr.jsx)(gj,{password:l.password,callback:g}),Object(dr.jsx)("p",{style:{color:"red"},children:h.general}),Object(dr.jsx)(Vr.a,{label:"New password",name:"password",type:"password",value:l.password,helperText:h.password,onChange:v,variant:"outlined",size:"small"}),Object(dr.jsx)(Vr.a,{label:"Confirm password",name:"confirm",type:"password",value:l.confirm,error:void 0!==h.confirm,helperText:h.confirm,onChange:v,variant:"outlined",size:"small"}),Object(dr.jsx)(yj,{started:l.password&&l.confirm,matchingPasswords:l.password===l.confirm})]})})};var wj,Cj,Tj=function(e){var t=e.user,n=e.showDialog,r=e.closeDialog,i=e.updateUser,c=e.roles,o=e.userApiErrors,s=e.userLoading,l=Object(a.useState)({}),u=Object(Sr.a)(l,2),d=u[0],j=u[1],h=Object(a.useState)({}),b=Object(Sr.a)(h,2),p=b[0],f=b[1];if(Object(a.useEffect)((function(){j(Object(x.a)({},t))}),[t]),!t)return null;var m=function(){var e=Object(_.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,i(d);case 4:j({}),f({}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),f({general:"Could not update user"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(dr.jsx)(bs,{onClick:function(e){m(e)},open:n,onClose:function(e){e.preventDefault(),j({}),f({}),r()},primaryButtonText:"Update user",secondaryButtonText:"Cancel",title:"Update team member",fullWidth:!0,children:Object(dr.jsx)(dj,{data:d,setData:j,roles:c,submit:m,error:p,userApiErrors:o,userLoading:s})})},Sj=function(e){var t=e.showDialog,n=e.closeDialog,a=e.user,r=e.userLoading,i=e.removeUser,c=e.userApiErrors,o=_l(r),s=Gi();return Object(dr.jsx)(Mc,{open:t,title:"Really delete user?",onClose:n,onClick:function(){return i(a)},primaryButtonText:"Delete user",secondaryButtonText:"Cancel",children:Object(dr.jsxs)("div",{ref:o,children:[Object(dr.jsx)(hr,{condition:c.removeUser,show:Object(dr.jsx)(ai.a,{"data-loading":!0,severity:"error",style:{margin:"1rem 0"},children:c.removeUser})}),Object(dr.jsxs)("div",{"data-loading":!0,className:s.flexRow,children:[Object(dr.jsx)(Xc.a,{variant:"rounded",alt:a.name,src:a.imageUrl,title:"".concat(a.name||a.email||a.username," (id: ").concat(a.id,")")}),Object(dr.jsx)(Rr.a,{variant:"subtitle1",style:{marginLeft:"1rem"},children:a.username||a.email})]}),Object(dr.jsxs)(Rr.a,{"data-loading":!0,variant:"body1",style:{marginTop:"1rem"},children:["Are you sure you want to delete"," ",a?"".concat(a.name||"user"," (").concat(a.email||a.username,")"):"","?"]})]})})};function Ej(){return(Ej=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function kj(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Nj(e,t){var n=e.title,r=e.titleId,i=kj(e,["title","titleId"]);return a.createElement("svg",Ej({width:197,height:177,viewBox:"0 0 197 177",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,wj||(wj=a.createElement("g",{clipPath:"url(#clip0)"},a.createElement("path",{d:"M195.272 67.6884C195.201 67.6884 195.132 67.6668 195.074 67.6264L99.4918 1.00044C99.2009 0.798626 98.8553 0.690774 98.5013 0.691378C98.1474 0.691982 97.8021 0.801012 97.5119 1.00382L2.61779 67.6257C2.54273 67.6784 2.44984 67.6991 2.35954 67.6832C2.26924 67.6674 2.18893 67.6163 2.13629 67.5411C2.08364 67.466 2.06297 67.373 2.07881 67.2826C2.09466 67.1923 2.14573 67.1119 2.22079 67.0592L97.115 0.437299C97.5213 0.153417 98.0047 0.000817369 98.5002 2.3283e-06C98.9957 -0.000812712 99.4796 0.150195 99.8868 0.432738L195.469 67.0585C195.53 67.1006 195.575 67.1609 195.599 67.2306C195.623 67.3004 195.624 67.3758 195.602 67.4461C195.58 67.5164 195.536 67.5778 195.476 67.6214C195.417 67.6649 195.345 67.6884 195.272 67.6884L195.272 67.6884Z",fill:"#3F3D56"}),a.createElement("path",{d:"M8.04028 70.0501L98.5953 2.87773L189.837 74.8297L103.261 126.199L56.2576 115.476L8.04028 70.0501Z",fill:"#E6E6E6"}),a.createElement("path",{d:"M60.2251 157.928H15.4887C15.214 157.928 14.942 157.875 14.6881 157.77C14.4342 157.665 14.2035 157.511 14.0091 157.316C13.8147 157.122 13.6606 156.891 13.5554 156.637C13.4502 156.383 13.396 156.111 13.396 155.836C13.396 155.561 13.4502 155.289 13.5554 155.035C13.6606 154.781 13.8147 154.55 14.0091 154.356C14.2035 154.162 14.4342 154.008 14.6881 153.903C14.942 153.798 15.214 153.744 15.4887 153.744H60.2251C60.4998 153.744 60.7719 153.798 61.0258 153.903C61.2797 154.008 61.5104 154.162 61.7048 154.356C61.8991 154.55 62.0533 154.781 62.1585 155.035C62.2637 155.289 62.3179 155.561 62.3179 155.836C62.3179 156.111 62.2637 156.383 62.1585 156.637C62.0533 156.891 61.8991 157.122 61.7048 157.316C61.5104 157.511 61.2797 157.665 61.0258 157.77C60.7719 157.875 60.4998 157.928 60.2251 157.928Z",fill:"#607D8B"}),a.createElement("path",{d:"M31.5392 148.934H15.4887C15.214 148.934 14.942 148.88 14.6881 148.776C14.4342 148.671 14.2035 148.516 14.0091 148.322C13.8147 148.128 13.6606 147.897 13.5554 147.643C13.4502 147.389 13.396 147.117 13.396 146.842C13.396 146.567 13.4502 146.295 13.5554 146.041C13.6606 145.787 13.8147 145.556 14.0091 145.362C14.2035 145.168 14.4342 145.014 14.6881 144.909C14.942 144.804 15.214 144.75 15.4887 144.75H31.5392C31.8139 144.75 32.0859 144.804 32.3398 144.909C32.5937 145.014 32.8244 145.168 33.0188 145.362C33.2132 145.556 33.3674 145.787 33.4726 146.041C33.5778 146.295 33.6319 146.567 33.6319 146.842C33.6319 147.117 33.5778 147.389 33.4726 147.643C33.3674 147.897 33.2132 148.128 33.0188 148.322C32.8244 148.516 32.5937 148.671 32.3398 148.776C32.0859 148.88 31.8139 148.934 31.5392 148.934Z",fill:"#607D8B"}),a.createElement("path",{d:"M99.8687 107.464C99.5287 107.465 99.1918 107.399 98.8771 107.27L43.0291 84.0761V11.4759C43.0298 10.8339 43.2849 10.2184 43.7385 9.76446C44.192 9.31051 44.8069 9.05515 45.4484 9.0544H152.589C153.23 9.05515 153.845 9.31051 154.299 9.76446C154.752 10.2184 155.007 10.8339 155.008 11.4759V84.1267L154.903 84.1717L100.89 107.258C100.567 107.394 100.22 107.464 99.8687 107.464Z",fill:"white"}),a.createElement("path",{d:"M99.8687 107.637C99.5061 107.637 99.1469 107.567 98.8112 107.43L42.8562 84.1916V11.4759C42.857 10.788 43.1303 10.1286 43.6163 9.64218C44.1022 9.1558 44.7611 8.88221 45.4483 8.88143H152.589C153.276 8.88221 153.935 9.1558 154.421 9.64218C154.907 10.1286 155.18 10.788 155.181 11.4759V84.2409L100.958 107.417C100.613 107.563 100.243 107.637 99.8687 107.637ZM43.5474 83.7295L99.0748 106.79C99.5928 107.001 100.173 106.997 100.688 106.781L154.49 83.7842V11.4759C154.489 10.9714 154.288 10.4879 153.932 10.1312C153.576 9.77452 153.093 9.57387 152.589 9.57328H45.4483C44.9444 9.57387 44.4612 9.77452 44.1049 10.1312C43.7485 10.4879 43.548 10.9714 43.5474 11.4759L43.5474 83.7295Z",fill:"#3F3D56"}),a.createElement("path",{d:"M194.581 66.9965H194.512L154.835 83.9537L100.55 107.155C100.337 107.244 100.11 107.291 99.8797 107.292C99.6496 107.293 99.4215 107.249 99.2084 107.162L43.2018 83.9052L2.55059 67.0242L2.48849 66.9965H2.4193C1.77788 66.9972 1.16293 67.2526 0.70938 67.7066C0.255828 68.1605 0.000711706 68.776 0 69.418V174.579C0.000712619 175.221 0.255828 175.836 0.70938 176.29C1.16293 176.744 1.77788 176.999 2.4193 177H194.581C195.222 176.999 195.837 176.744 196.291 176.29C196.744 175.836 196.999 175.221 197 174.579V69.418C196.999 68.776 196.744 68.1605 196.291 67.7066C195.837 67.2526 195.222 66.9972 194.581 66.9965ZM196.309 174.579C196.309 175.037 196.126 175.477 195.802 175.801C195.478 176.126 195.039 176.308 194.581 176.308H2.4193C1.96104 176.308 1.52161 176.126 1.19757 175.801C0.873536 175.477 0.691411 175.037 0.691228 174.579V69.418C0.691855 68.9707 0.865197 68.541 1.17501 68.2187C1.48483 67.8963 1.90713 67.7063 2.35365 67.6884L43.2018 84.6524L98.9425 107.802C99.5459 108.047 100.222 108.044 100.823 107.791L154.835 84.7043L194.65 67.6884C195.096 67.7076 195.517 67.8982 195.826 68.2203C196.135 68.5425 196.308 68.9714 196.309 69.418V174.579Z",fill:"#3F3D56"}),a.createElement("path",{d:"M99.3104 86.8775C97.2487 86.8813 95.2416 86.214 93.5919 84.9762L93.4896 84.8994L71.9541 68.3963C70.9567 67.6314 70.1197 66.6774 69.4907 65.5888C68.8617 64.5001 68.4531 63.2981 68.2882 62.0514C68.1233 60.8047 68.2054 59.5377 68.5297 58.3228C68.8541 57.1078 69.4143 55.9687 70.1785 54.9704C70.9426 53.9722 71.8958 53.1344 72.9835 52.5048C74.0711 51.8753 75.2721 51.4663 76.5177 51.3013C77.7632 51.1362 79.0291 51.2184 80.243 51.543C81.4569 51.8676 82.595 52.4284 83.5923 53.1932L97.5414 63.8988L130.505 20.8706C131.27 19.8726 132.223 19.0351 133.311 18.4059C134.399 17.7767 135.6 17.3682 136.846 17.2036C138.091 17.039 139.357 17.1216 140.571 17.4467C141.785 17.7718 142.923 18.333 143.92 19.0982L143.715 19.3767L143.925 19.1023C145.936 20.6494 147.252 22.9319 147.584 25.449C147.916 27.9661 147.237 30.5122 145.696 32.5287L106.922 83.1402C106.026 84.3065 104.872 85.2503 103.552 85.8984C102.232 86.5466 100.781 86.8816 99.3104 86.8775Z",fill:"#607D8B"}))),Cj||(Cj=a.createElement("defs",null,a.createElement("clipPath",{id:"clip0"},a.createElement("rect",{width:197,height:177,fill:"white"})))))}var Aj=a.forwardRef(Nj),Rj=(n.p,Object(mr.a)({iconContainer:{width:"100%",textAlign:"center"},emailIcon:{margin:"2rem auto"}})),Ij=n(183),Dj=n.n(Ij),Lj=function(e){var t=e.inviteLink,n=Object(a.useState)({show:!1,type:"success",text:""}),r=Object(Sr.a)(n,2),i=r[0],c=r[1],o=function(){return c({show:!0,type:"error",text:"Could not copy invite link."})};return Object(dr.jsxs)("div",{style:{backgroundColor:"#efefef",padding:"2rem",borderRadius:"3px",margin:"1rem 0",display:"flex",justifyContent:"space-between",alignItems:"center",wordBreak:"break-all"},children:[t,Object(dr.jsx)(yr.a,{onClick:function(){try{return navigator.clipboard.writeText(t).then((function(){c({show:!0,type:"success",text:"Successfully copied invite link."})})).catch((function(){o()}))}catch(e){o()}},children:Object(dr.jsx)(Dj.a,{})}),Object(dr.jsx)(vr.a,{open:i.show,autoHideDuration:6e3,onClose:function(){return c({show:!1,type:"success",text:""})},children:Object(dr.jsx)(ai.a,{severity:i.type,children:i.text})})]})},Pj=function(e){var t=e.open,n=e.closeConfirm,a=e.inviteLink,r=Rj();return Object(dr.jsxs)(bs,{open:t,title:"Team member added",primaryButtonText:"Close",onClick:n,children:[Object(dr.jsx)(Rr.a,{children:"A new team member has been added. We\u2019ve sent an email on your behalf to inform them of their new account and role. No further steps are required."}),Object(dr.jsx)("div",{className:r.iconContainer,children:Object(dr.jsx)(Aj,{className:r.emailIcon})}),Object(dr.jsx)(Rr.a,{style:{fontWeight:"bold"},variant:"subtitle1",children:"In a rush?"}),Object(dr.jsx)(Rr.a,{children:"You may also copy the invite link and send it to the user."}),Object(dr.jsx)(Lj,{inviteLink:a})]})},Fj=function(e){var t=e.open,n=e.closeConfirm,a=e.inviteLink,r=Gi();return Object(dr.jsx)(bs,{open:t,onClick:n,primaryButtonText:"Close",title:"Team member added",children:Object(dr.jsxs)("div",{className:r.contentSpacingYLarge,children:[Object(dr.jsx)(Rr.a,{variant:"body1",children:"A new team member has been added. Please provide them with the following link to get started:"}),Object(dr.jsx)(Lj,{inviteLink:a}),Object(dr.jsx)(Rr.a,{variant:"body1",children:"Copy the link and send it to the user. This will allow them to set up their password and get started with their Unleash account."}),Object(dr.jsx)(ai.a,{severity:"info",children:Object(dr.jsxs)(Rr.a,{variant:"body2",children:["Want to avoid this step in the future?"," ",Object(dr.jsx)("a",{href:"https://docs.getunleash.io/docs/deploy/email",target:"_blank",rel:"noopener noreferrer",children:"If you configure an email server for Unleash"})," ","we'll automatically send informational getting started emails to new users once you add them."]})})]})})},Uj=function(e){var t=e.open,n=e.closeConfirm,a=e.emailSent,r=e.inviteLink;return a?Object(dr.jsx)(Pj,{open:t,closeConfirm:n,inviteLink:r}):Object(dr.jsx)(Fj,{open:t,closeConfirm:n,inviteLink:r})},Vj=n(107),Gj=function(){var e=Object(Vj.a)("api/admin/user-admin",(function(){var e=C("api/admin/user-admin");return fetch(e,{method:"GET"}).then((function(e){return e.json()}))})),t=e.data,n=e.error,r=Object(a.useState)(!n&&!t),i=Object(Sr.a)(r,2),c=i[0],o=i[1];return Object(a.useEffect)((function(){o(!n&&!t)}),[t,n]),{users:(null===t||void 0===t?void 0:t.users)||[],roles:(null===t||void 0===t?void 0:t.rootRoles)||[],error:n,loading:c,refetch:function(){Object(Vj.b)("api/admin/user-admin")}}},Bj=function(e){var t=e.user,n=e.renderRole,r=e.openDelDialog,i=e.openPwDialog,c=e.openUpdateDialog,o=e.location,s=Object(a.useContext)(el).hasAccess;return Object(dr.jsxs)(is.a,{children:[Object(dr.jsx)(cs.a,{children:Object(dr.jsx)(Xc.a,{"data-loading":!0,alt:t.name,src:t.imageUrl,title:"".concat(t.name||t.email||t.username," (id: ").concat(t.id,")")})}),Object(dr.jsx)(cs.a,{children:Object(dr.jsx)("span",{"data-loading":!0,children:hi(t.createdAt,o.locale)})}),Object(dr.jsx)(cs.a,{style:{textAlign:"left"},children:Object(dr.jsx)(Rr.a,{variant:"body2","data-loading":!0,children:t.name})}),Object(dr.jsx)(cs.a,{style:{textAlign:"left"},children:Object(dr.jsx)(Rr.a,{variant:"body2","data-loading":!0,children:t.username||t.email})}),Object(dr.jsx)(cs.a,{align:"center",children:Object(dr.jsx)(Rr.a,{variant:"body2","data-loading":!0,children:n(t.rootRole)})}),Object(dr.jsx)(br,{condition:s(uo),show:Object(dr.jsxs)(cs.a,{align:"right",children:[Object(dr.jsx)(yr.a,{"data-loading":!0,"aria-label":"Edit",title:"Edit",onClick:c(t),children:Object(dr.jsx)(_r.a,{children:"edit"})}),Object(dr.jsx)(yr.a,{"data-loading":!0,"aria-label":"Change password",title:"Change password",onClick:i(t),children:Object(dr.jsx)(_r.a,{children:"lock"})}),Object(dr.jsx)(yr.a,{"data-loading":!0,"aria-label":"Remove user",title:"Remove user",onClick:r(t),children:Object(dr.jsx)(_r.a,{children:"delete"})})]}),elseShow:Object(dr.jsx)(cs.a,{})})]},t.id)},Mj=[{id:1,username:"admin",email:"some-email@email.com",name:"admin",permissions:["ADMIN"],imageUrl:"https://gravatar.com/avatar/21232f297a57a5a743894a0e4a801fc3?size=42&default=retro",seenAt:null,loginAttempts:0,createdAt:"2021-04-21T12:09:55.923Z",rootRole:1,inviteLink:""},{id:16,name:"test",email:"test@test.no",permissions:[],imageUrl:"https://gravatar.com/avatar/879fdbb54e4a6cdba456fcb11abe5971?size=42&default=retro",seenAt:null,loginAttempts:0,createdAt:"2021-04-21T15:54:02.765Z",rootRole:2,inviteLink:""},{id:3,name:"Testesen",email:"test@test.com",permissions:[],imageUrl:"https://gravatar.com/avatar/6c15d63f08137733ec0828cd0a3a5dc4?size=42&default=retro",seenAt:"2021-04-21T14:34:31.515Z",loginAttempts:0,createdAt:"2021-04-21T12:33:17.712Z",rootRole:1,inviteLink:""},{id:4,name:"test",email:"test@test.io",permissions:[],imageUrl:"https://gravatar.com/avatar/879fdbb54e4a6cdba456fcb11abe5971?size=42&default=retro",seenAt:null,loginAttempts:0,createdAt:"2021-04-21T15:54:02.765Z",rootRole:2,inviteLink:""},{id:5,name:"Testesen",email:"test@test.uk",permissions:[],imageUrl:"https://gravatar.com/avatar/6c15d63f08137733ec0828cd0a3a5dc4?size=42&default=retro",seenAt:"2021-04-21T14:34:31.515Z",loginAttempts:0,createdAt:"2021-04-21T12:33:17.712Z",rootRole:1,inviteLink:""}];var Hj=function(e){var t=e.location,n=e.closeDialog,r=e.showDialog,i=Gj(),c=i.users,o=i.roles,s=i.refetch,l=i.loading,u=uj(),d=u.addUser,j=u.removeUser,h=u.updateUser,b=u.changePassword,p=u.validatePassword,f=u.userLoading,m=u.userApiErrors,g=Object(a.useContext)(el).hasAccess,O=Object(a.useState)({open:!1}),x=Object(Sr.a)(O,2),v=x[0],y=x[1],_=Object(a.useState)(!1),w=Object(Sr.a)(_,2),C=w[0],T=w[1],S=Object(a.useState)(!1),E=Object(Sr.a)(S,2),k=E[0],N=E[1],A=Object(a.useState)(!1),R=Object(Sr.a)(A,2),I=R[0],D=R[1],L=Object(a.useState)(""),P=Object(Sr.a)(L,2),F=P[0],U=P[1],V=Object(a.useState)(),G=Object(Sr.a)(V,2),B=G[0],M=G[1],H=Object(a.useState)({open:!1}),z=Object(Sr.a)(H,2),J=z[0],Y=z[1],W=_l(l),q=function(){T(!1),M(void 0)},Z=function(e){return function(t){t.preventDefault(),T(!0),M(e)}},K=function(e){return function(t){t.preventDefault(),y({open:!0,user:e})}},X=function(e){return function(t){t.preventDefault(),Y({open:!0,user:e})}},Q=function(){Y({open:!1})},$=function(){return console.log("An exception was thrown and handled.")},ee=function(e){var t=o.find((function(t){return t.id===e}));return t?t.name:""};return c?Object(dr.jsxs)("div",{ref:W,children:[Object(dr.jsxs)(us.a,{children:[Object(dr.jsx)(ds.a,{children:Object(dr.jsxs)(is.a,{children:[Object(dr.jsx)(cs.a,{}),Object(dr.jsx)(cs.a,{children:"Created"}),Object(dr.jsx)(cs.a,{children:"Name"}),Object(dr.jsx)(cs.a,{children:"Username"}),Object(dr.jsx)(cs.a,{align:"center",children:"Role"}),Object(dr.jsx)(cs.a,{align:"right",children:g(uo)?"Action":""})]})}),Object(dr.jsx)(js.a,{children:l?Mj.map((function(e){return Object(dr.jsx)(Bj,{user:e,openUpdateDialog:X,openPwDialog:K,openDelDialog:Z,location:t,renderRole:ee},e.id)})):c.map((function(e){return Object(dr.jsx)(Bj,{user:e,openUpdateDialog:X,openPwDialog:K,openDelDialog:Z,location:t,renderRole:ee},e.id)}))})]}),Object(dr.jsx)("br",{}),Object(dr.jsx)(Uj,{open:k,closeConfirm:function(){N(!1),D(!1),U("")},emailSent:I,inviteLink:F}),Object(dr.jsx)(hj,{showDialog:r,closeDialog:n,addUser:function(e){d(e).then((function(e){return e.json()})).then((function(e){D(e.emailSent),U(e.inviteLink),n(),s(),N(!0)})).catch($)},userLoading:f,validatePassword:p,userApiErrors:m,roles:o}),Object(dr.jsx)(Tj,{showDialog:J.open,closeDialog:Q,updateUser:function(e){h(e).then((function(){s(),Q()})).catch($)},userLoading:f,userApiErrors:m,user:J.user,roles:o}),Object(dr.jsx)(_j,{showDialog:v.open,closeDialog:function(){y({open:!1})},changePassword:b,validatePassword:p,user:v.user}),Object(dr.jsx)(hr,{condition:B,show:Object(dr.jsx)(Sj,{showDialog:C,closeDialog:q,user:B,removeUser:function(){j(B).then((function(){s(),q()})).catch($)},userLoading:f,userApiErrors:m})})]}):null},zj=Object(l.b)((function(e){return{location:e.settings.toJS().location||{}}}))(Hj),Jj=function(e){var t=e.history,n=Object(a.useContext)(el).hasAccess,r=Object(a.useState)(!1),i=Object(Sr.a)(r,2),c=i[0],o=i[1],s=function(e){e.preventDefault(),o(!0)};return Object(dr.jsxs)("div",{children:[Object(dr.jsx)(rj,{history:t}),Object(dr.jsx)(qc,{headerContent:Object(dr.jsx)(ii,{title:"Users",actions:Object(dr.jsx)(br,{condition:n(uo),show:Object(dr.jsx)(ni.a,{variant:"contained",color:"primary",onClick:s,children:"Add new user"}),elseShow:Object(dr.jsx)("small",{children:"PS! Only admins can add/remove users."})})}),children:Object(dr.jsx)(br,{condition:n(uo),show:Object(dr.jsx)(zj,{openDialog:s,closeDialog:function(){o(!1)},showDialog:c}),elseShow:Object(dr.jsx)(ai.a,{severity:"error",children:"You need instance admin to access this section."})})})]})},Yj=n(184),Wj=n.n(Yj),qj=C("api/admin/invoices/portal");var Zj=function(e){var t=e.location,n=e.fetchInvoices,r=e.invoices,i=Object(a.useState)(!1),c=Object(Sr.a)(i,2),o=c[0],s=c[1];return Object(a.useEffect)((function(){n().finally((function(){return s(!0)}))}),[]),Object(dr.jsx)(br,{condition:r.length>0,show:Object(dr.jsx)(_u,{headerContent:Object(dr.jsx)(ii,{title:"Invoices",actions:Object(dr.jsx)(ni.a,{href:qj,rel:"noreferrer",target:"_blank",endIcon:Object(dr.jsx)(Wj.a,{}),children:"Billing portal"})}),children:Object(dr.jsx)("div",{children:Object(dr.jsxs)(us.a,{children:[Object(dr.jsx)(ds.a,{children:Object(dr.jsxs)(is.a,{children:[Object(dr.jsx)(cs.a,{children:"Amount"}),Object(dr.jsx)(cs.a,{children:"Status"}),Object(dr.jsx)(cs.a,{children:"Due date"}),Object(dr.jsx)(cs.a,{children:"PDF"}),Object(dr.jsx)(cs.a,{children:"Link"})]})}),Object(dr.jsx)(js.a,{children:r.map((function(e){return Object(dr.jsxs)(is.a,{style:{backgroundColor:"past-due"===e.status?"#ff9194":"inherit"},children:[Object(dr.jsx)(cs.a,{style:{textAlign:"left"},children:e.amountFomratted}),Object(dr.jsx)(cs.a,{style:{textAlign:"left"},children:e.status}),Object(dr.jsx)(cs.a,{style:{textAlign:"left"},children:e.dueDate&&hi(e.dueDate,t.locale)}),Object(dr.jsx)(cs.a,{style:{textAlign:"left"},children:Object(dr.jsx)("a",{href:e.invoicePDF,children:"PDF"})}),Object(dr.jsx)(cs.a,{style:{textAlign:"left"},children:Object(dr.jsx)("a",{href:e.invoiceURL,target:"_blank",rel:"noreferrer",children:"Payment link"})})]},e.invoiceURL)}))})]})})}),elseShow:Object(dr.jsx)("div",{children:o&&"No invoices to show."})})},Kj=Object(l.b)((function(e){return{location:e.settings.toJS().location||{},invoices:e.invoiceAdmin.toJS()}}),{fetchInvoices:function(){return tr("Start fetching invoices for hosted customer"),function(e){return $a.fetchAll().then((function(t){return e({type:er,invoices:t.invoices})})).catch(z(e,"ERROR_FETCH_INVOICES"))}}})(Zj),Xj=function(e){e.history;var t=Object(a.useContext)(el).hasAccess;return Object(dr.jsx)("div",{children:Object(dr.jsx)(br,{condition:t(uo),show:Object(dr.jsx)(Kj,{}),elseShow:Object(dr.jsx)(ai.a,{severity:"error",children:"You need to be instance admin to access this section."})})})},Qj={enabled:!1,autoCreate:!1,unleashHostname:location.hostname};var $j=function(e){var t=e.config,n=e.getGoogleConfig,r=e.updateGoogleConfig,i=e.unleashUrl,c=Object(a.useState)(Qj),o=Object(Sr.a)(c,2),s=o[0],l=o[1],u=Object(a.useState)(),d=Object(Sr.a)(u,2),j=d[0],h=d[1],b=Object(a.useContext)(el).hasAccess;if(Object(a.useEffect)((function(){n()}),[]),Object(a.useEffect)((function(){t.clientId&&l(t)}),[t]),!b(uo))return Object(dr.jsx)("span",{children:"You need admin privileges to access this section."});var p=function(e){l(Object(x.a)(Object(x.a)({},s),{},Object(Ai.a)({},e.target.name,e.target.value)))},f=function(){var e=Object(_.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),h("...saving"),e.prev=2,e.next=5,r(s);case 5:h("Settings stored"),setTimeout((function(){return h("")}),2e3),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),h(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(dr.jsxs)(qc,{children:[Object(dr.jsx)(gr.a,{container:!0,style:{marginBottom:"1rem"},children:Object(dr.jsx)(gr.a,{item:!0,xs:12,children:Object(dr.jsxs)(ai.a,{severity:"info",children:["Please read the"," ",Object(dr.jsx)("a",{href:"https://www.unleash-hosted.com/docs/enterprise-authentication/google",target:"_blank",rel:"noreferrer",children:"documentation"})," ","to learn how to integrate with Google OAuth 2.0. ",Object(dr.jsx)("br",{}),"Callback URL:"," ",Object(dr.jsxs)("code",{children:[i,"/auth/google/callback"]})]})})}),Object(dr.jsxs)("form",{onSubmit:f,children:[Object(dr.jsxs)(gr.a,{container:!0,spacing:3,children:[Object(dr.jsxs)(gr.a,{item:!0,xs:5,children:[Object(dr.jsx)("strong",{children:"Enable"}),Object(dr.jsx)("p",{children:"Enable Google users to login. Value is ignored if Client ID and Client Secret are not defined."})]}),Object(dr.jsx)(gr.a,{item:!0,xs:6,style:{padding:"20px"},children:Object(dr.jsx)(Gr.a,{onChange:function(){l(Object(x.a)(Object(x.a)({},s),{},{enabled:!s.enabled}))},name:"enabled",checked:s.enabled,children:s.enabled?"Enabled":"Disabled"})})]}),Object(dr.jsxs)(gr.a,{container:!0,spacing:3,children:[Object(dr.jsxs)(gr.a,{item:!0,xs:5,children:[Object(dr.jsx)("strong",{children:"Client ID"}),Object(dr.jsx)("p",{children:"(Required) The Client ID provided by Google when registering the application."})]}),Object(dr.jsx)(gr.a,{item:!0,xs:6,children:Object(dr.jsx)(Vr.a,{onChange:p,label:"Client ID",name:"clientId",placeholder:"",value:s.clientId||"",style:{width:"400px"},variant:"outlined",size:"small",required:!0})})]}),Object(dr.jsxs)(gr.a,{container:!0,spacing:3,children:[Object(dr.jsxs)(gr.a,{item:!0,md:5,children:[Object(dr.jsx)("strong",{children:"Client Secret"}),Object(dr.jsx)("p",{children:"(Required) Client Secret provided by Google when registering the application."})]}),Object(dr.jsx)(gr.a,{item:!0,md:6,children:Object(dr.jsx)(Vr.a,{onChange:p,label:"Client Secret",name:"clientSecret",value:s.clientSecret||"",placeholder:"",style:{width:"400px"},variant:"outlined",size:"small",required:!0})})]}),Object(dr.jsxs)(gr.a,{container:!0,spacing:3,children:[Object(dr.jsxs)(gr.a,{item:!0,md:5,children:[Object(dr.jsx)("strong",{children:"Unleash hostname"}),Object(dr.jsxs)("p",{children:["(Required) The hostname you are running Unleash on that Google should send the user back to. The final callback URL will be"," ",Object(dr.jsx)("small",{children:Object(dr.jsx)("code",{children:"https://[unleash.hostname.com]/auth/google/callback"})})]})]}),Object(dr.jsx)(gr.a,{item:!0,md:6,children:Object(dr.jsx)(Vr.a,{onChange:p,label:"Unleash Hostname",name:"unleashHostname",placeholder:"",value:s.unleashHostname||"",style:{width:"400px"},variant:"outlined",size:"small"})})]}),Object(dr.jsxs)(gr.a,{container:!0,spacing:3,children:[Object(dr.jsxs)(gr.a,{item:!0,md:5,children:[Object(dr.jsx)("strong",{children:"Auto-create users"}),Object(dr.jsx)("p",{children:"Enable automatic creation of new users when signing in with Google."})]}),Object(dr.jsx)(gr.a,{item:!0,md:6,style:{padding:"20px"},children:Object(dr.jsx)(Gr.a,{onChange:function(){l(Object(x.a)(Object(x.a)({},s),{},{autoCreate:!s.autoCreate}))},name:"enabled",checked:s.autoCreate,children:"Auto-create users"})})]}),Object(dr.jsxs)(gr.a,{container:!0,spacing:3,children:[Object(dr.jsxs)(gr.a,{item:!0,md:5,children:[Object(dr.jsx)("strong",{children:"Email domains"}),Object(dr.jsx)("p",{children:"(Optional) Comma separated list of email domains that should be allowed to sign in."})]}),Object(dr.jsx)(gr.a,{item:!0,md:6,children:Object(dr.jsx)(Vr.a,{onChange:p,label:"Email domains",name:"emailDomains",value:s.emailDomains,placeholder:"@company.com, @anotherCompany.com",style:{width:"400px"},rows:2,multiline:!0,variant:"outlined",size:"small"})})]}),Object(dr.jsx)(gr.a,{container:!0,spacing:3,children:Object(dr.jsxs)(gr.a,{item:!0,md:5,children:[Object(dr.jsx)(ni.a,{variant:"contained",color:"primary",type:"submit",children:"Save"})," ",Object(dr.jsx)("small",{children:j})]})})]})]})},eh=Object(l.b)((function(e){return{config:e.authAdmin.get("google"),unleashUrl:e.uiConfig.toJS().unleashUrl}}),{getGoogleConfig:function(){return Za("Start fetching google-auth config"),function(e){return Ma.getGoogleConfig().then((function(t){return e({type:Ha,config:t})})).catch(z(e,"RECIEVE_GOOGLE_CONFIG_ERROR"))}},updateGoogleConfig:function(e){return function(t){return Ma.updateGoogleConfig(e).then((function(e){return t({type:za,config:e})})).catch((function(e){throw z(t,"UPDATE_GOOGLE_AUTH_ERROR")(e),e}))}}})($j),th={enabled:!1,autoCreate:!1,unleashHostname:location.hostname};var nh=function(e){var t=e.config,n=e.getSamlConfig,r=e.updateSamlConfig,i=e.unleashUrl,c=Object(a.useState)(th),o=Object(Sr.a)(c,2),s=o[0],l=o[1],u=Object(a.useState)(),d=Object(Sr.a)(u,2),j=d[0],h=d[1],b=Object(a.useContext)(el).hasAccess;if(Object(a.useEffect)((function(){n()}),[]),Object(a.useEffect)((function(){t.entityId&&l(t)}),[t]),!b(uo))return Object(dr.jsx)(ai.a,{severity:"error",children:"You need to be a root admin to access this section."});var p=function(e){l(Object(x.a)(Object(x.a)({},s),{},Object(Ai.a)({},e.target.name,e.target.value)))},f=function(){var e=Object(_.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),h("...saving"),e.prev=2,e.next=5,r(s);case 5:h("Settings stored"),setTimeout((function(){return h("")}),2e3),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),h(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(dr.jsxs)(qc,{children:[Object(dr.jsx)(gr.a,{container:!0,style:{marginBottom:"1rem"},children:Object(dr.jsx)(gr.a,{item:!0,md:12,children:Object(dr.jsxs)(ai.a,{severity:"info",children:["Please read the"," ",Object(dr.jsx)("a",{href:"https://www.unleash-hosted.com/docs/enterprise-authentication",target:"_blank",rel:"noreferrer",children:"documentation"})," ","to learn how to integrate with specific SAML 2.0 providers (Okta, Keycloak, etc). ",Object(dr.jsx)("br",{}),"Callback URL:"," ",Object(dr.jsxs)("code",{children:[i,"/auth/saml/callback"]})]})})}),Object(dr.jsxs)("form",{onSubmit:f,children:[Object(dr.jsxs)(gr.a,{container:!0,spacing:3,children:[Object(dr.jsxs)(gr.a,{item:!0,md:5,children:[Object(dr.jsx)("strong",{children:"Enable"}),Object(dr.jsx)("p",{children:"Enable SAML 2.0 Authentication."})]}),Object(dr.jsx)(gr.a,{item:!0,md:6,children:Object(dr.jsx)(Gr.a,{onChange:function(){l(Object(x.a)(Object(x.a)({},s),{},{enabled:!s.enabled}))},value:s.enabled,name:"enabled",checked:s.enabled,children:s.enabled?"Enabled":"Disabled"})})]}),Object(dr.jsxs)(gr.a,{container:!0,spacing:3,children:[Object(dr.jsxs)(gr.a,{item:!0,md:5,children:[Object(dr.jsx)("strong",{children:"Entity ID"}),Object(dr.jsx)("p",{children:"(Required) The Entity Identity provider issuer."})]}),Object(dr.jsx)(gr.a,{item:!0,md:6,children:Object(dr.jsx)(Vr.a,{onChange:p,label:"Entity ID",name:"entityId",value:s.entityId||"",style:{width:"400px"},variant:"outlined",size:"small",required:!0})})]}),Object(dr.jsxs)(gr.a,{container:!0,spacing:3,children:[Object(dr.jsxs)(gr.a,{item:!0,md:5,children:[Object(dr.jsx)("strong",{children:"Single Sign-On URL"}),Object(dr.jsx)("p",{children:"(Required) The url to redirect the user to for signing in."})]}),Object(dr.jsx)(gr.a,{item:!0,md:6,children:Object(dr.jsx)(Vr.a,{onChange:p,label:"Single Sign-On URL",name:"signOnUrl",value:s.signOnUrl||"",style:{width:"400px"},variant:"outlined",size:"small",required:!0})})]}),Object(dr.jsxs)(gr.a,{container:!0,spacing:3,children:[Object(dr.jsxs)(gr.a,{item:!0,md:5,children:[Object(dr.jsx)("strong",{children:"X.509 Certificate"}),Object(dr.jsx)("p",{children:"(Required) The certificate used to sign the SAML 2.0 request."})]}),Object(dr.jsx)(gr.a,{item:!0,md:7,children:Object(dr.jsx)(Vr.a,{onChange:p,label:"X.509 Certificate",name:"certificate",value:s.certificate||"",style:{width:"100%",fontSize:"0.7em",fontFamily:"monospace"},multiline:!0,rows:14,rowsMax:14,variant:"outlined",size:"small",required:!0})})]}),Object(dr.jsxs)(gr.a,{container:!0,spacing:3,children:[Object(dr.jsxs)(gr.a,{item:!0,md:5,children:[Object(dr.jsx)("strong",{children:"Auto-create users"}),Object(dr.jsx)("p",{children:"Enable automatic creation of new users when signing in with Saml."})]}),Object(dr.jsx)(gr.a,{item:!0,md:6,style:{padding:"20px"},children:Object(dr.jsx)(Gr.a,{onChange:function(){l(Object(x.a)(Object(x.a)({},s),{},{autoCreate:!s.autoCreate}))},name:"enabled",checked:s.autoCreate,children:"Auto-create users"})})]}),Object(dr.jsxs)(gr.a,{container:!0,spacing:3,children:[Object(dr.jsxs)(gr.a,{item:!0,md:5,children:[Object(dr.jsx)("strong",{children:"Email domains"}),Object(dr.jsx)("p",{children:"(Optional) Comma separated list of email domains that should be allowed to sign in."})]}),Object(dr.jsx)(gr.a,{item:!0,md:6,children:Object(dr.jsx)(Vr.a,{onChange:p,label:"Email domains",name:"emailDomains",value:s.emailDomains||"",placeholder:"@company.com, @anotherCompany.com",style:{width:"400px"},rows:2,variant:"outlined",size:"small"})})]}),Object(dr.jsx)(gr.a,{container:!0,spacing:3,children:Object(dr.jsxs)(gr.a,{item:!0,md:5,children:[Object(dr.jsx)(ni.a,{variant:"contained",color:"primary",type:"submit",children:"Save"})," ",Object(dr.jsx)("small",{children:j})]})})]})]})},ah=Object(l.b)((function(e){return{config:e.authAdmin.get("saml"),unleashUrl:e.uiConfig.toJS().unleashUrl}}),{getSamlConfig:function(){return Za("Start fetching Saml-auth config"),function(e){return Ma.getSamlConfig().then((function(t){return e({type:Ja,config:t})})).catch(z(e,"RECIEVE_SAML_CONFIG_ERROR"))}},updateSamlConfig:function(e){return function(t){return Ma.updateSamlConfig(e).then((function(e){return t({type:Ya,config:e})})).catch((function(e){throw z(t,"UPDATE_SAML_AUTH_ERROR")(e),e}))}}})(nh),rh={enabled:!1,autoCreate:!1,unleashHostname:location.hostname};var ih=function(e){var t=e.config,n=e.getOidcConfig,r=e.updateOidcConfig,i=e.unleashUrl,c=Object(a.useState)(rh),o=Object(Sr.a)(c,2),s=o[0],l=o[1],u=Object(a.useState)(),d=Object(Sr.a)(u,2),j=d[0],h=d[1],b=Object(a.useState)(),p=Object(Sr.a)(b,2),f=p[0],m=p[1],g=Object(a.useContext)(el).hasAccess;if(Object(a.useEffect)((function(){n()}),[]),Object(a.useEffect)((function(){t.discoverUrl&&l(t)}),[t]),!g(uo))return Object(dr.jsx)(ai.a,{severity:"error",children:"You need to be a root admin to access this section."});var O=function(e){l(Object(x.a)(Object(x.a)({},s),{},Object(Ai.a)({},e.target.name,e.target.value)))},v=function(){var e=Object(_.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),h("...saving"),m(""),e.prev=3,e.next=6,r(s);case 6:h("Settings stored"),setTimeout((function(){return h("")}),2e3),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),h(""),m(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(dr.jsxs)(qc,{children:[Object(dr.jsx)(gr.a,{container:!0,style:{marginBottom:"1rem"},children:Object(dr.jsx)(gr.a,{item:!0,md:12,children:Object(dr.jsxs)(ai.a,{severity:"info",children:["Please read the"," ",Object(dr.jsx)("a",{href:"https://www.unleash-hosted.com/docs/enterprise-authentication",target:"_blank",rel:"noreferrer",children:"documentation"})," ","to learn how to integrate with specific Open Id Connect providers (Okta, Keycloak, Google, etc). ",Object(dr.jsx)("br",{}),"Callback URL:"," ",Object(dr.jsxs)("code",{children:[i,"/auth/oidc/callback"]})]})})}),Object(dr.jsxs)("form",{onSubmit:v,children:[Object(dr.jsxs)(gr.a,{container:!0,spacing:3,children:[Object(dr.jsxs)(gr.a,{item:!0,md:5,children:[Object(dr.jsx)("strong",{children:"Enable"}),Object(dr.jsx)("p",{children:"Enable Open Id Connect Authentication."})]}),Object(dr.jsx)(gr.a,{item:!0,md:6,children:Object(dr.jsx)(Gr.a,{onChange:function(){l(Object(x.a)(Object(x.a)({},s),{},{enabled:!s.enabled}))},value:s.enabled,name:"enabled",checked:s.enabled,children:s.enabled?"Enabled":"Disabled"})})]}),Object(dr.jsxs)(gr.a,{container:!0,spacing:3,children:[Object(dr.jsxs)(gr.a,{item:!0,md:5,children:[Object(dr.jsx)("strong",{children:"Discover URL"}),Object(dr.jsx)("p",{children:"(Required) Issuer discover metadata URL"})]}),Object(dr.jsx)(gr.a,{item:!0,md:6,children:Object(dr.jsx)(Vr.a,{onChange:O,label:"Discover URL",name:"discoverUrl",value:s.discoverUrl||"",style:{width:"400px"},variant:"outlined",size:"small"})})]}),Object(dr.jsxs)(gr.a,{container:!0,spacing:3,children:[Object(dr.jsxs)(gr.a,{item:!0,md:5,children:[Object(dr.jsx)("strong",{children:"Client ID"}),Object(dr.jsx)("p",{children:"(Required) Client ID of your OpenID application"})]}),Object(dr.jsx)(gr.a,{item:!0,md:6,children:Object(dr.jsx)(Vr.a,{onChange:O,label:"Client ID",name:"clientId",value:s.clientId||"",style:{width:"400px"},variant:"outlined",size:"small",required:!0})})]}),Object(dr.jsxs)(gr.a,{container:!0,spacing:3,children:[Object(dr.jsxs)(gr.a,{item:!0,md:5,children:[Object(dr.jsx)("strong",{children:"Client secret"}),Object(dr.jsx)("p",{children:"(Required) Client secret of your OpenID application. "})]}),Object(dr.jsx)(gr.a,{item:!0,md:6,children:Object(dr.jsx)(Vr.a,{onChange:O,label:"Client Secret",name:"secret",value:s.secret||"",style:{width:"400px"},variant:"outlined",size:"small",required:!0})})]}),Object(dr.jsxs)(gr.a,{container:!0,spacing:3,children:[Object(dr.jsxs)(gr.a,{item:!0,md:5,children:[Object(dr.jsx)("strong",{children:"Auto-create users"}),Object(dr.jsx)("p",{children:"Enable automatic creation of new users when signing in with Open ID connect."})]}),Object(dr.jsx)(gr.a,{item:!0,md:6,style:{padding:"20px"},children:Object(dr.jsx)(Gr.a,{onChange:function(){l(Object(x.a)(Object(x.a)({},s),{},{autoCreate:!s.autoCreate}))},name:"enabled",checked:s.autoCreate,children:"Auto-create users"})})]}),Object(dr.jsxs)(gr.a,{container:!0,spacing:3,children:[Object(dr.jsxs)(gr.a,{item:!0,md:5,children:[Object(dr.jsx)("strong",{children:"Email domains"}),Object(dr.jsx)("p",{children:"(Optional) Comma separated list of email domains that should be allowed to sign in."})]}),Object(dr.jsx)(gr.a,{item:!0,md:6,children:Object(dr.jsx)(Vr.a,{onChange:O,label:"Email domains",name:"emailDomains",value:s.emailDomains||"",placeholder:"@company.com, @anotherCompany.com",style:{width:"400px"},rows:2,variant:"outlined",size:"small"})})]}),Object(dr.jsx)(gr.a,{container:!0,spacing:3,children:Object(dr.jsxs)(gr.a,{item:!0,md:12,children:[Object(dr.jsx)(ni.a,{variant:"contained",color:"primary",type:"submit",children:"Save"})," ",Object(dr.jsx)("small",{children:j}),Object(dr.jsx)("small",{style:{color:"red"},children:f})]})})]})]})},ch=Object(l.b)((function(e){return{config:e.authAdmin.get("oidc"),unleashUrl:e.uiConfig.toJS().unleashUrl}}),{getOidcConfig:function(){return Za("Start fetching OIDC-auth config"),function(e){return Ma.getOidcConfig().then((function(t){return e({type:Wa,config:t})})).catch(z(e,"RECIEVE_OIDC_CONFIG_ERROR"))}},updateOidcConfig:function(e){return function(t){return Ma.updateOidcConfig(e).then((function(e){return t({type:qa,config:e})})).catch((function(e){throw z(t,"UPDATE_OIDC_AUTH_ERROR")(e),e}))}}})(ih);var oh,sh,lh,uh=function(e){var t=e.authenticationType,n=e.history,a=e.enableOIDC,r=[{label:"SAML 2.0",component:Object(dr.jsx)(ah,{})},{label:"Google",component:Object(dr.jsx)(eh,{})}];return a&&r.unshift({label:"OpenID Connect",component:Object(dr.jsx)(ch,{})}),Object(dr.jsxs)("div",{children:[Object(dr.jsx)(rj,{history:n}),Object(dr.jsxs)(qc,{headerContent:"Authentication",children:[Object(dr.jsx)(hr,{condition:"enterprise"===t,show:Object(dr.jsx)(Ks,{tabData:r})}),Object(dr.jsx)(hr,{condition:"open-source"===t,show:Object(dr.jsx)(ai.a,{severity:"warning",children:"You are running the open-source version of Unleash. You have to use the Enterprise edition in order configure Single Sign-on."})}),Object(dr.jsx)(hr,{condition:"demo"===t,show:Object(dr.jsx)(ai.a,{severity:"warning",children:"You are running Unleash in demo mode. You have to use the Enterprise edition in order configure Single Sign-on."})}),Object(dr.jsx)(hr,{condition:"custom"===t,show:Object(dr.jsx)(ai.a,{severity:"warning",children:"You have decided to use custom authentication type. You have to use the Enterprise edition in order configure Single Sign-on from the user interface."})}),Object(dr.jsx)(hr,{condition:"hosted"===t,show:Object(dr.jsx)(ai.a,{severity:"info",children:"Your Unleash instance is managed by the Unleash team."})})]})]})},dh=Object(l.b)((function(e){return{authenticationType:e.uiConfig.toJS().authenticationType,enableOIDC:!!e.uiConfig.toJS().flags.OIDC}}),{})(uh),jh=n(106),hh=n.n(jh),bh=n(71),ph=n.n(bh),fh="name",mh="lastSeen",gh="created",Oh="expired",xh="status",vh="report",yh="kill-switch",_h="permission",wh=(oh={},Object(Ai.a)(oh,"experiment",40),Object(Ai.a)(oh,"release",40),Object(Ai.a)(oh,"operational",7),oh),Ch=function(e,t){return e.map((function(e){return Object(x.a)(Object(x.a)({},e),{},{checked:t})}))},Th=function(e,t){var n=t.find((function(t){return t.name===e}));return!!n&&(!!n.checked&&n.checked)},Sh=function(e,t){return Math.abs(li()(e,t))},Eh=function(e,t){return e>=wh[t]},kh=function(e){var t=Object(Xr.a)(e);return t.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})),t},Nh=function(e){var t=Object(Xr.a)(e);return t.sort((function(e,t){if(!e.lastSeenAt)return-1;if(!t.lastSeenAt)return 1;var n=ph()(e.lastSeenAt),a=ph()(t.lastSeenAt);return n.getTime()-a.getTime()})),t},Ah=function(e){var t=Object(Xr.a)(e);return t.sort((function(e,t){var n=ph()(e.createdAt),a=ph()(t.createdAt);return n.getTime()-a.getTime()})),t},Rh=function(e){var t=Object(Xr.a)(e);return t.sort((function(e,t){return e.stale?1:t.stale?-1:0})),t},Ih=function(e,t){return 1===e?"".concat(e," ").concat(t):"".concat(e," ").concat(t,"s")},Dh=function(e){return[ph()(e),new Date]},Lh=function(e){return function(t){return t.project===e}},Ph=n(43),Fh=n.n(Ph),Uh=function(e){var t,n=e.features,a=n.length,r=function(){var e=n.filter((function(e){return!e.stale}));return 0===e?0:e}(),i=r.filter((function(e){return function(e){var t=Dh(e.createdAt),n=Object(Sr.a)(t,2),a=n[0],r=n[1],i=Sh(a,r);return Eh(i,e.type)}(e)&&!e.stale})),c=r.length,o=n.length-c,s=i.length,l=function(e,t,n){var a=t/e*100,r=n/e*100;return Math.round(100-a-r)}(a,o,s),u=l<50,d=l<75,j=fr()(Fh.a.reportCardHealthRating,(t={},Object(Ai.a)(t,Fh.a.healthWarning,d),Object(Ai.a)(t,Fh.a.healthDanger,u),t));return Object(dr.jsx)(Yc.a,{className:Fh.a.card,children:Object(dr.jsxs)("div",{className:Fh.a.reportCardContainer,children:[Object(dr.jsxs)("div",{className:Fh.a.reportCardHealth,children:[Object(dr.jsx)("h2",{className:Fh.a.header,children:"Health rating"}),Object(dr.jsx)("div",{className:Fh.a.reportCardHealthInnerContainer,children:Object(dr.jsx)(hr,{condition:l>-1,show:Object(dr.jsxs)("p",{className:j,children:[l,"%"]})})})]}),Object(dr.jsxs)("div",{className:Fh.a.reportCardListContainer,children:[Object(dr.jsx)("h2",{className:Fh.a.header,children:"Toggle report"}),Object(dr.jsxs)("ul",{className:Fh.a.reportCardList,children:[Object(dr.jsx)("li",{children:Object(dr.jsx)(hr,{condition:c,show:function(){return Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(xj.a,{className:Fh.a.check}),Object(dr.jsxs)("span",{children:[c," active toggles"]})]})}})}),Object(dr.jsx)("li",{children:Object(dr.jsx)(hr,{condition:o,show:function(){return Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(hh.a,{className:Fh.a.danger}),Object(dr.jsxs)("span",{children:[o," stale toggles"]})]})}})}),Object(dr.jsx)("li",{children:Object(dr.jsx)(hr,{condition:s,show:function(){return Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(hh.a,{className:Fh.a.danger}),Object(dr.jsxs)("span",{children:[s," potentially stale toggles"]})]})}})})]})]}),Object(dr.jsxs)("div",{className:Fh.a.reportCardAction,children:[Object(dr.jsx)("h2",{className:Fh.a.header,children:"Potential actions"}),Object(dr.jsx)("div",{className:Fh.a.reportCardActionContainer,children:Object(dr.jsx)("p",{className:Fh.a.reportCardActionText,children:"Review your feature toggles and delete unused toggles."})})]})]})})},Vh=Object(l.b)((function(e,t){var n=e.features.toJS(),a=Lh(t.selectedProject);return{features:n.filter(a)}}),null)(Uh),Gh=n(35),Bh=n.n(Gh),Mh=function(e){var t=e.name,n=e.stale,a=e.lastSeenAt,r=e.createdAt,i=e.type,c=e.checked,o=e.bulkActionsOn,l=e.setFeatures,u=Object(s.g)(),d=function(e,t){return Object(dr.jsxs)("span",{className:Bh.a.reportStatus,children:[e,t]})},j=fr()(Bh.a.active,Object(Ai.a)({},Bh.a.stale,n));return Object(dr.jsxs)("tr",{role:"button",tabIndex:0,onClick:function(){u.push("/features/strategies/".concat(t))},className:Bh.a.tableRow,children:[Object(dr.jsx)(hr,{condition:o,show:Object(dr.jsx)("td",{children:Object(dr.jsx)(Fl.a,{checked:c,value:c,onChange:function(){l((function(e){return Object(Xr.a)(e).map((function(e){return function(e){return e.name===t}(e)?Object(x.a)(Object(x.a)({},e),{},{checked:!e.checked}):e}))}))},className:Bh.a.checkbox})})}),Object(dr.jsx)("td",{children:t}),Object(dr.jsx)("td",{children:function(){if(!a)return"Never";var e=Dh(a),t=Object(Sr.a)(e,2),n=t[0],r=t[1],i=Sh(n,r);return 0===i?"1 day":i?Ih(i,"day"):"1 day"}()}),Object(dr.jsx)("td",{children:function(){var e=Dh(r),t=Object(Sr.a)(e,2),n=t[0],a=t[1],i=Sh(n,a);if(0===i)return"1 day";var c=Ih(i,"day");return"".concat(c," ago")}()}),Object(dr.jsx)("td",{className:Bh.a.expired,children:function(){if(i===yh||i===_h)return"N/A";var e=Dh(r),t=Object(Sr.a)(e,2),n=t[0],a=t[1],c=Sh(n,a);if(Eh(c,i)){var o=c-wh[i];return 0===o?"1 day":Ih(o,"day")}}()}),Object(dr.jsx)("td",{className:j,children:n?"Stale":"Active"}),Object(dr.jsx)("td",{children:function(){if(i===yh||i===_h)return d(Object(dr.jsx)(xj.a,{className:Bh.a.reportIcon}),"Healthy");var e=Dh(r),t=Object(Sr.a)(e,2),n=t[0],a=t[1],c=Sh(n,a);return Eh(c,i)?d(Object(dr.jsx)(hh.a,{className:Bh.a.reportIcon}),"Potentially stale"):d(Object(dr.jsx)(xj.a,{className:Bh.a.reportIcon}),"Healthy")}()})]})},Hh=r.a.memo(Mh),zh=n(89),Jh=n.n(zh),Yh=function(e){var t=e.handleCheckAll,n=e.checkAll,a=e.setSortData,r=e.bulkActionsOn,i=function(e){a((function(t){return{sortKey:e,ascending:!t.ascending}}))};return Object(dr.jsx)("thead",{children:Object(dr.jsxs)("tr",{children:[Object(dr.jsx)(hr,{condition:r,show:Object(dr.jsx)("th",{children:Object(dr.jsx)(Fl.a,{onChange:t,value:n,checked:n,className:Bh.a.checkbox})})}),Object(dr.jsxs)("th",{role:"button",tabIndex:0,style:{width:"150px"},onClick:function(){return i(fh)},children:["Name",Object(dr.jsx)(Jh.a,{className:Bh.a.sortIcon})]}),Object(dr.jsxs)("th",{role:"button",tabIndex:0,onClick:function(){return i(mh)},children:["Last seen",Object(dr.jsx)(Jh.a,{className:Bh.a.sortIcon})]}),Object(dr.jsxs)("th",{role:"button",tabIndex:0,onClick:function(){return i(gh)},children:["Created",Object(dr.jsx)(Jh.a,{className:Bh.a.sortIcon})]}),Object(dr.jsxs)("th",{role:"button",tabIndex:0,onClick:function(){return i(Oh)},children:["Expired",Object(dr.jsx)(Jh.a,{className:Bh.a.sortIcon})]}),Object(dr.jsxs)("th",{role:"button",tabIndex:0,onClick:function(){return i(xh)},children:["Status",Object(dr.jsx)(Jh.a,{className:Bh.a.sortIcon})]}),Object(dr.jsxs)("th",{role:"button",tabIndex:0,onClick:function(){return i(vh)},children:["Report",Object(dr.jsx)(Jh.a,{className:Bh.a.sortIcon})]})]})})},Wh=function(){var e=Object(a.useState)({sortKey:fh,ascending:!0}),t=Object(Sr.a)(e,2),n=t[0],r=t[1],i=function(e){return n.ascending?kh(e):function(e){return kh(Object(Xr.a)(e)).reverse()}(e)},c=function(e){return n.ascending?Nh(e):function(e){return Nh(Object(Xr.a)(e)).reverse()}(e)},o=function(e){return n.ascending?Ah(e):function(e){return Ah(Object(Xr.a)(e)).reverse()}(e)},s=function(e){return n.ascending?function(e){var t=Object(Xr.a)(e);return t.sort((function(e,t){var n=new Date,a=ph()(e.createdAt),r=ph()(t.createdAt),i=Sh(a,n),c=Sh(r,n);if(!Eh(i,e.type)&&Eh(c,t.type))return 1;if(Eh(i,e.type)&&!Eh(c,t.type))return-1;var o=i-wh[e.type];return c-wh[t.type]-o})),t}(e):function(e){var t=Object(Xr.a)(e),n=new Date;return t.sort((function(e,t){var a=ph()(e.createdAt),r=ph()(t.createdAt),i=Sh(a,n),c=Sh(r,n);return!Eh(i,e.type)&&Eh(c,t.type)?1:Eh(i,e.type)&&!Eh(c,t.type)?-1:i-wh[e.type]-(c-wh[t.type])})),t}(e)},l=function(e){return n.ascending?Rh(e):function(e){return Rh(Object(Xr.a)(e)).reverse()}(e)};return[function(e){switch(n.sortKey){case fh:return i(e);case mh:return c(e);case gh:return o(e);case Oh:case vh:return s(e);case xh:return l(e);default:return e}},r]},qh=!1,Zh=function(e){var t=e.features,n=e.selectedProject,r=Object(a.useState)(!1),i=Object(Sr.a)(r,2),c=i[0],o=i[1],s=Object(a.useState)([]),l=Object(Sr.a)(s,2),u=l[0],d=l[1],j=Wh(),h=Object(Sr.a)(j,2),b=h[0],p=h[1];Object(a.useEffect)((function(){var e=t.map((function(e){return Object(x.a)(Object(x.a)({},function(e){for(var t={},n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return a.forEach((function(n){void 0!==e[n]&&(t[n]=e[n])})),t}(e,"name","lastSeenAt","createdAt","stale","type")),{},{checked:Th(e.name,t),setFeatures:d})}));d(e)}),[t,n]);return Object(dr.jsxs)(Yc.a,{className:Bh.a.reportToggleList,children:[Object(dr.jsxs)("div",{className:Bh.a.reportToggleListHeader,children:[Object(dr.jsx)("h3",{className:Bh.a.reportToggleListHeading,children:"Overview"}),Object(dr.jsx)(hr,{condition:qh,show:function(){return Object(dr.jsx)(Fs,{id:"bulk-actions",label:"Bulk actions",renderOptions:function(){return Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(Mr.a,{children:"Mark toggles as stale"}),Object(dr.jsx)(Mr.a,{children:"Delete toggles"})]})}})}})]}),Object(dr.jsx)("div",{className:Bh.a.reportToggleListInnerContainer,children:Object(dr.jsxs)("table",{className:Bh.a.reportingToggleTable,children:[Object(dr.jsx)(Yh,{handleCheckAll:function(){return c?(o(!1),d((function(e){return Ch(e,!1)}))):(o(!0),d((function(e){return Ch(e,!0)})))},checkAll:c,setSortData:p,bulkActionsOn:qh}),Object(dr.jsx)("tbody",{children:b(u).map((function(e){return Object(dr.jsx)(Hh,Object(x.a)(Object(x.a)({},e),{},{bulkActionsOn:qh}),e.name)}))})]})})]})},Kh=Object(l.b)((function(e,t){var n=e.features.toJS(),a=Lh(t.selectedProject);return{features:n.filter(a)}}),null)(Zh),Xh=n(131),Qh=n.n(Xh),$h=function(e){var t=e.fetchFeatureToggles,n=e.projects,i=Object(a.useState)([{key:"default",label:"Default"}]),c=Object(Sr.a)(i,2),o=c[0],s=c[1],l=Object(a.useState)("default"),u=Object(Sr.a)(l,2),d=u[0],j=u[1];Object(a.useEffect)((function(){t(),j(n[0].id)}),[]),Object(a.useEffect)((function(){s(function(e){return e.map((function(e){return{key:e.id,label:e.name}}))}(n))}),[n]);var h=function(e){var t=e.target.value,n=o.find((function(e){return e.key===t}));j(n.key)},b=n.length>1;return Object(dr.jsxs)(r.a.Fragment,{children:[Object(dr.jsx)(hr,{condition:b,show:function(){return Object(dr.jsxs)("div",{className:Qh.a.projectSelector,children:[Object(dr.jsx)("h1",{className:Qh.a.header,children:"Project"}),Object(dr.jsx)(Yr,{name:"project",className:Qh.a.select,options:o,value:d,onChange:h,inputProps:Object(Ai.a)({},"data-testid","REPORTING_SELECT_ID")})]})}}),Object(dr.jsx)(Vh,{selectedProject:d}),Object(dr.jsx)(Kh,{selectedProject:d})]})},eb={fetchFeatureToggles:ue},tb=Object(l.b)((function(e){return{projects:e.projects.toJS()}}),eb)($h),nb=function(){return Object(dr.jsx)(tb,{})},ab=n(144),rb=n.n(ab),ib=function(e){var t=e.insecureLogin,n=e.history,r=e.authDetails,i=Object(a.useState)(""),c=Object(Sr.a)(i,2),o=c[0],s=c[1];return Object(dr.jsx)("form",{onSubmit:function(e){e.preventDefault();var a={email:o},r=e.target.action;t(r,a).then((function(){return n.push("/")}))},action:r.path,children:Object(dr.jsxs)("div",{className:rb.a.container,children:[Object(dr.jsx)("p",{children:r.message}),Object(dr.jsxs)("p",{children:["This instance of Unleash is not set up with a secure authentication provider. You can read more about"," ",Object(dr.jsx)("a",{href:"https://github.com/Unleash/unleash/blob/master/docs/securing-unleash.md",target:"_blank",rel:"noreferrer",children:"securing Unleash on GitHub"})]}),Object(dr.jsx)(Vr.a,{value:o,onChange:function(e){var t=e.target.value;s(t)},inputProps:{"data-test":"email-input-field"},size:"small",variant:"outlined",label:"Email",name:"email",required:!0,type:"email"}),Object(dr.jsx)("br",{}),Object(dr.jsx)("div",{children:Object(dr.jsx)(ni.a,{type:"submit",variant:"contained",color:"primary","data-test":"login-submit",className:rb.a.button,children:"Sign in"})})]})})},cb=function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(sr.a)(n,[{key:"render",value:function(){var e=this.props.authDetails;return Object(dr.jsxs)("div",{children:[Object(dr.jsx)("p",{children:e.message}),Object(dr.jsx)(Br.a,{style:{textAlign:"center"},children:Object(dr.jsx)("a",{href:e.path,style:{width:"100%"},children:Object(dr.jsx)(ni.a,{variant:"contained",color:"primary",style:{width:"150px",margin:"0 auto"},children:"Sign In"})})})]})}}]),n}(r.a.Component),ob=Object(mr.a)((function(e){return{loginContainer:Object(Ai.a)({minWidth:"350px"},e.breakpoints.down("xs"),{width:"100%",minWidth:"auto"}),contentContainer:{display:"flex",flexDirection:"column"},apiError:{color:e.palette.error.main}}})),sb=function(){return new URLSearchParams(Object(s.h)().search)};function lb(){return(lb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ub(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function db(e,t){var n=e.title,r=e.titleId,i=ub(e,["title","titleId"]);return a.createElement("svg",lb({xmlns:"http://www.w3.org/2000/svg",width:"46px",height:"46px",viewBox:"0 0 46 46",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,sh||(sh=a.createElement("defs",null,a.createElement("filter",{x:"-50%",y:"-50%",width:"200%",height:"200%",filterUnits:"objectBoundingBox",id:"filter-1"},a.createElement("feOffset",{dx:0,dy:1,in:"SourceAlpha",result:"shadowOffsetOuter1"}),a.createElement("feGaussianBlur",{stdDeviation:.5,in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),a.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.168 0",in:"shadowBlurOuter1",type:"matrix",result:"shadowMatrixOuter1"}),a.createElement("feOffset",{dx:0,dy:0,in:"SourceAlpha",result:"shadowOffsetOuter2"}),a.createElement("feGaussianBlur",{stdDeviation:.5,in:"shadowOffsetOuter2",result:"shadowBlurOuter2"}),a.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.084 0",in:"shadowBlurOuter2",type:"matrix",result:"shadowMatrixOuter2"}),a.createElement("feMerge",null,a.createElement("feMergeNode",{in:"shadowMatrixOuter1"}),a.createElement("feMergeNode",{in:"shadowMatrixOuter2"}),a.createElement("feMergeNode",{in:"SourceGraphic"}))),a.createElement("rect",{id:"path-2",x:0,y:0,width:40,height:40,rx:2}))),lh||(lh=a.createElement("g",{id:"Google-Button",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"9-PATCH",transform:"translate(-608.000000, -160.000000)"}),a.createElement("g",{id:"btn_google_light_normal",transform:"translate(-1.000000, -1.000000)"},a.createElement("g",{id:"button",transform:"translate(4.000000, 4.000000)",filter:"url(#filter-1)"},a.createElement("g",{id:"button-bg"},a.createElement("use",{fill:"#FFFFFF",fillRule:"evenodd"}),a.createElement("use",{fill:"none"}),a.createElement("use",{fill:"none"}),a.createElement("use",{fill:"none"}))),a.createElement("g",{id:"logo_googleg_48dp",transform:"translate(15.000000, 15.000000)"},a.createElement("path",{d:"M17.64,9.20454545 C17.64,8.56636364 17.5827273,7.95272727 17.4763636,7.36363636 L9,7.36363636 L9,10.845 L13.8436364,10.845 C13.635,11.97 13.0009091,12.9231818 12.0477273,13.5613636 L12.0477273,15.8195455 L14.9563636,15.8195455 C16.6581818,14.2527273 17.64,11.9454545 17.64,9.20454545 L17.64,9.20454545 Z",id:"Shape",fill:"#000"}),a.createElement("path",{d:"M9,18 C11.43,18 13.4672727,17.1940909 14.9563636,15.8195455 L12.0477273,13.5613636 C11.2418182,14.1013636 10.2109091,14.4204545 9,14.4204545 C6.65590909,14.4204545 4.67181818,12.8372727 3.96409091,10.71 L0.957272727,10.71 L0.957272727,13.0418182 C2.43818182,15.9831818 5.48181818,18 9,18 L9,18 Z",id:"Shape",fill:"#000"}),a.createElement("path",{d:"M3.96409091,10.71 C3.78409091,10.17 3.68181818,9.59318182 3.68181818,9 C3.68181818,8.40681818 3.78409091,7.83 3.96409091,7.29 L3.96409091,4.95818182 L0.957272727,4.95818182 C0.347727273,6.17318182 0,7.54772727 0,9 C0,10.4522727 0.347727273,11.8268182 0.957272727,13.0418182 L3.96409091,10.71 L3.96409091,10.71 Z",id:"Shape",fill:"#000"}),a.createElement("path",{d:"M9,3.57954545 C10.3213636,3.57954545 11.5077273,4.03363636 12.4404545,4.92545455 L15.0218182,2.34409091 C13.4631818,0.891818182 11.4259091,0 9,0 C5.48181818,0 2.43818182,2.01681818 0.957272727,4.95818182 L3.96409091,7.29 C4.67181818,5.16272727 6.65590909,3.57954545 9,3.57954545 L9,3.57954545 Z",id:"Shape",fill:"#000"}),a.createElement("path",{d:"M0,0 L18,0 L18,18 L0,18 L0,0 Z",id:"Shape"})),a.createElement("g",{id:"handles_square"})))))}var jb,hb,bb,pb,fb,mb=a.forwardRef(db),gb=(n.p,n(185)),Ob=n.n(gb),xb=function(e){var t=e.options,n=Gi();return Object(dr.jsx)(dr.Fragment,{children:null===t||void 0===t?void 0:t.map((function(e){return Object(dr.jsx)("div",{className:fr()(n.flexColumn,n.contentSpacingY),children:Object(dr.jsx)(ni.a,{color:"primary","data-loading":!0,variant:"outlined",href:e.path,size:"small",style:{height:"40px",color:"#000"},startIcon:Object(dr.jsx)(br,{condition:"google"===e.type,show:Object(dr.jsx)(mb,{style:{height:"35px",width:"35px"}}),elseShow:Object(dr.jsx)(Ob.a,{style:{height:"25px",width:"25px"}})}),children:e.message})},e.type)}))})},vb=Object(mr.a)((function(e){return{container:{display:"flex",alignItems:"center",justifyContent:"center",margin:"1rem auto"},wing:{width:"80px",height:"3px",backgroundColor:e.palette.division.main,borderRadius:e.borders.radius.main},text:{textAlign:"center",display:"block",margin:"0 1rem"}}})),yb=function(e){var t=e.text,n=Object(ur.a)(e,["text"]),a=vb();return Object(dr.jsxs)("div",Object(x.a)(Object(x.a)({className:a.container},n),{},{children:[Object(dr.jsx)("span",{className:a.wing}),Object(dr.jsx)(Rr.a,{variant:"body2",className:a.text,children:t}),Object(dr.jsx)("span",{className:a.wing})]}))},_b=function(e){var t=e.authDetails,n=e.passwordLogin,r=Gi(),i=ob(),c=Object(s.g)(),o=sb(),l=Object(a.useState)(o.get("email")||""),u=Object(Sr.a)(l,2),d=u[0],j=u[1],h=Object(a.useState)(""),b=Object(Sr.a)(h,2),p=b[0],f=b[1],m=Object(a.useState)({usernameError:"",passwordError:""}),g=Object(Sr.a)(m,2),O=g[0],v=g[1],w=function(){var e=Object(_.a)(y.a.mark((function e(t){var a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),d||v((function(e){return Object(x.a)(Object(x.a)({},e),{},{usernameError:"This is a required field"})})),p||v((function(e){return Object(x.a)(Object(x.a)({},e),{},{passwordError:"This is a required field"})})),p&&d){e.next=5;break}return e.abrupt("return");case 5:return a={username:d,password:p},r=t.target.action,e.prev=7,e.next=10,n(r,a);case 10:c.push("/"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(7),404===e.t0.statusCode||400===e.t0.statusCode?(v((function(e){return Object(x.a)(Object(x.a)({},e),{},{apiError:"Invalid login details"})})),f(""),j("")):v({apiError:"Unknown error while trying to authenticate."});case 16:case"end":return e.stop()}}),e,null,[[7,13]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=O.usernameError,n=O.passwordError,a=O.apiError;return Object(dr.jsxs)("form",{onSubmit:w,action:t.path,children:[Object(dr.jsx)(Rr.a,{variant:"subtitle2",className:i.apiError,children:a}),Object(dr.jsxs)("div",{className:fr()(i.contentContainer,r.contentSpacingY),children:[Object(dr.jsx)(Vr.a,{label:"Username or email",name:"username",type:"string",onChange:function(e){return j(e.target.value)},value:d,error:!!e,helperText:e,variant:"outlined",autoComplete:"true",size:"small"}),Object(dr.jsx)(Vr.a,{label:"Password",onChange:function(e){return f(e.target.value)},name:"password",type:"password",value:p,error:!!n,helperText:n,variant:"outlined",autoComplete:"true",size:"small"}),Object(dr.jsx)(ni.a,{variant:"contained",color:"primary",type:"submit",style:{width:"150px",margin:"1rem auto"},children:"Sign in"})]})]})},T=t.options,S=void 0===T?[]:T;return Object(dr.jsx)(dr.Fragment,{children:Object(dr.jsx)(br,{condition:S.length>0,show:function(e){return Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(xb,{options:e}),Object(dr.jsx)(yb,{text:"Or signin with username"}),C()]})}(S),elseShow:C()})})},wb=Object(mr.a)((function(e){return{loginContainer:Object(Ai.a)({minWidth:"350px"},e.breakpoints.down("xs"),{width:"100%",minWidth:"auto"}),contentContainer:{display:"flex",flexDirection:"column"},apiError:{color:e.palette.error.main},button:{width:"150px",margin:"1rem auto 0 auto",display:"block",textAlign:"center"}}})),Cb=function(e){var t=e.authDetails,n=e.passwordLogin,r=Gi(),i=wb(),c=Object(s.g)(),o=sb(),l=Object(a.useState)(o.get("email")||""),u=Object(Sr.a)(l,2),d=u[0],j=u[1],h=Object(a.useState)(""),b=Object(Sr.a)(h,2),p=b[0],f=b[1],m=Object(a.useState)({usernameError:"",passwordError:""}),g=Object(Sr.a)(m,2),O=g[0],v=g[1],w=function(){var e=Object(_.a)(y.a.mark((function e(t){var a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),d||v((function(e){return Object(x.a)(Object(x.a)({},e),{},{usernameError:"This is a required field"})})),p||v((function(e){return Object(x.a)(Object(x.a)({},e),{},{passwordError:"This is a required field"})})),p&&d){e.next=5;break}return e.abrupt("return");case 5:return a={username:d,password:p},r=t.target.action,e.prev=7,e.next=10,n(r,a);case 10:c.push("/"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(7),404===e.t0.statusCode||400===e.t0.statusCode?(v((function(e){return Object(x.a)(Object(x.a)({},e),{},{apiError:"Invalid login details"})})),f(""),j("")):v({apiError:"Unknown error while trying to authenticate."});case 16:case"end":return e.stop()}}),e,null,[[7,13]])})));return function(t){return e.apply(this,arguments)}}(),C=O.usernameError,T=O.passwordError,S=O.apiError,E=t.options,k=void 0===E?[]:E;return Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(br,{condition:k.length>0,show:Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(xb,{options:k}),Object(dr.jsx)(yb,{text:"or signin with username"})]})}),Object(dr.jsxs)("form",{onSubmit:w,action:t.path,children:[Object(dr.jsx)(Rr.a,{variant:"subtitle2",className:i.apiError,children:S}),Object(dr.jsxs)("div",{className:fr()(i.contentContainer,r.contentSpacingY),children:[Object(dr.jsx)(Vr.a,{label:"Username or email",name:"username",type:"string",onChange:function(e){return j(e.target.value)},value:d,error:!!C,helperText:C,variant:"outlined",size:"small"}),Object(dr.jsx)(Vr.a,{label:"Password",onChange:function(e){return f(e.target.value)},name:"password",type:"password",value:p,error:!!T,helperText:T,variant:"outlined",size:"small"}),Object(dr.jsx)(gr.a,{container:!0,children:Object(dr.jsx)(ni.a,{variant:"contained",color:"primary",type:"submit",className:i.button,children:"Sign in"})})]})]})]})},Tb=n(98),Sb=n.n(Tb);function Eb(){return(Eb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function kb(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Nb(e,t){var n=e.title,r=e.titleId,i=kb(e,["title","titleId"]);return a.createElement("svg",Eb({width:52,height:52,viewBox:"0 0 52 52",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,jb||(jb=a.createElement("circle",{cx:26,cy:26,r:26,fill:"white"})),hb||(hb=a.createElement("rect",{x:15,y:15,width:7,height:22,fill:"#1A4049"})),bb||(bb=a.createElement("rect",{x:30,y:15,width:7,height:22,fill:"#1A4049"})),pb||(pb=a.createElement("path",{d:"M37 30L37 37L15 37L15 30L37 30Z",fill:"#1A4049"})),fb||(fb=a.createElement("rect",{x:30,y:30,width:7,height:7,fill:"#817AFE"})))}var Ab,Rb,Ib,Db,Lb,Pb=a.forwardRef(Nb),Fb=(n.p,function(e){var t=e.demoLogin,n=e.history,r=e.authDetails,i=Object(a.useState)(""),c=Object(Sr.a)(i,2),o=c[0],s=c[1];return Object(dr.jsxs)("form",{onSubmit:function(e){e.preventDefault();var a={email:o},r=e.target.action;t(r,a).then((function(){return n.push("/")}))},action:r.path,children:[Object(dr.jsx)(Pb,{className:Sb.a.logo}),Object(dr.jsxs)("div",{className:Sb.a.container,children:[Object(dr.jsx)("h2",{children:"Access the Unleash demo instance"}),Object(dr.jsx)("p",{children:"No further data or Credit Card required"}),Object(dr.jsxs)("div",{className:Sb.a.form,children:[Object(dr.jsx)(Vr.a,{value:o,className:Sb.a.emailField,onChange:function(e){var t=e.target.value;s(t)},inputProps:{"data-test":"email-input-field"},size:"small",variant:"outlined",label:"Email",name:"email",required:!0,type:"email"}),Object(dr.jsx)(ni.a,{type:"submit",variant:"contained",color:"primary","data-test":"login-submit",className:Sb.a.button,children:"Sign in"})]}),Object(dr.jsxs)("p",{children:["By accessing our demo instance, you agree to the Unleash\xa0",Object(dr.jsx)("a",{href:"https://www.unleash-hosted.com/tos/",target:"_blank",rel:"noreferrer",children:"Customer Terms of Service"})," ","and\xa0",Object(dr.jsx)("a",{href:"https://www.unleash-hosted.com/privacy-policy/",target:"_blank",rel:"noreferrer",children:"Privacy Policy"})]})]})]})}),Ub="demo",Vb=Object(bc.a)((function(e){return{container:Object(Ai.a)({margin:"auto auto 0 auto",width:"200px"},e.breakpoints.down("sm"),{marginTop:"1rem"}),link:{textDecoration:"none",fontWeight:"bold",color:e.palette.primary.main,textAlign:"center"},text:{fontWeight:"bold",marginBottom:"0.5rem"}}})),Gb=function(){var e=Vb();return Object(dr.jsxs)("div",{className:e.container,children:[Object(dr.jsx)(o.b,{to:"/forgotten-password",className:e.link,children:Object(dr.jsx)(Rr.a,{variant:"body2",className:e.text,children:"Forgot password?"})}),Object(dr.jsxs)(Rr.a,{variant:"body2",children:["Don't have an account?"," ",Object(dr.jsx)("a",{href:"https://www.getunleash.io/plans",target:"_blank",rel:"noopener noreferrer",className:e.link,children:"Sign up"})]})]})},Bb=function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(sr.a)(n,[{key:"render",value:function(){var e,t=this.props.user.authDetails;return t?(e="password"===t.type?Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(_b,{passwordLogin:this.props.passwordLogin,authDetails:t,history:this.props.history}),Object(dr.jsx)(Gb,{})]}):"unsecure"===t.type?Object(dr.jsx)(ib,{insecureLogin:this.props.insecureLogin,authDetails:t,history:this.props.history}):t.type===Ub?Object(dr.jsx)(Fb,{demoLogin:this.props.demoLogin,authDetails:t,history:this.props.history}):"enterprise-hosted"===t.type?Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(Cb,{passwordLogin:this.props.passwordLogin,authDetails:t,history:this.props.history}),Object(dr.jsx)(Gb,{})]}):Object(dr.jsx)(cb,{authDetails:t}),Object(dr.jsx)(dr.Fragment,{children:e})):null}}]),n}(r.a.Component),Mb=Object(l.b)((function(e){return{user:e.user.toJS(),flags:e.uiConfig.toJS().flags}}),(function(e,t){return{demoLogin:function(t,n){return function(e,t){return function(n){return n({type:Oe}),pe.demoLogin(e,t).then((function(e){return n(ve(e))})).catch(ye)}}(t,n)(e)},insecureLogin:function(t,n){return function(e,t){return function(n){return n({type:Oe}),pe.insecureLogin(e,t).then((function(e){return n(ve(e))})).catch(ye)}}(t,n)(e)},passwordLogin:function(t,n){return function(e,t){return function(n){return n({type:Oe}),pe.passwordLogin(e,t).then((function(e){return n(ve(e))})).then((function(){return n({type:ge})}))}}(t,n)(e)}}}))(Bb),Hb=Object(mr.a)((function(e){return{login:Object(Ai.a)({width:"350px",maxWidth:"350px"},e.breakpoints.down("xs"),{width:"100%"}),loginContainer:{minHeight:"100vh",width:"100%"},container:{display:"flex",height:"100%",flexWrap:"wrap"},contentContainer:Object(Ai.a)({width:"50%",padding:"4rem 3rem",minHeight:"100vh"},e.breakpoints.down("sm"),{width:"100%",minHeight:"auto"}),gradient:{background:"linear-gradient(".concat(e.palette.login.gradient.top,", ").concat(e.palette.login.gradient.bottom,")"),color:e.palette.login.main},title:{fontSize:e.fontSizes.mainHeader,marginBottom:"1rem",textAlign:"center"},logo:{marginRight:"10px",width:"40px",height:"30px"},subTitle:{fontSize:"1.25rem"},loginFormContainer:{display:"flex",flexDirection:"column"},imageContainer:{display:"flex",justifyContent:"center",marginTop:"8rem"}}})),zb=n(339),Jb=function(){return Object(dr.jsxs)(ai.a,{severity:"success",children:[Object(dr.jsx)(zb.a,{children:"Success"}),"You successfully reset your password."]})},Yb=function(e){var t=e.children,n=e.from,a=e.to,r=e.style,i=Object(ur.a)(e,["children","from","to","style"]);return Object(dr.jsx)("div",Object(x.a)(Object(x.a)({style:Object(x.a)({background:"linear-gradient(".concat(n,", ").concat(a,")"),height:"100%",width:"100%",position:"relative"},r)},i),{},{children:t}))};function Wb(){return(Wb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function qb(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Zb(e,t){var n=e.title,r=e.titleId,i=qb(e,["title","titleId"]);return a.createElement("svg",Wb({width:334,height:334,viewBox:"0 0 334 334",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,Ab||(Ab=a.createElement("circle",{cx:167,cy:167,r:167,fill:"white"})),Rb||(Rb=a.createElement("rect",{x:96.3462,y:96.3457,width:44.9615,height:141.308,fill:"#1A4049"})),Ib||(Ib=a.createElement("rect",{x:192.692,y:96.3457,width:44.9615,height:141.308,fill:"#1A4049"})),Db||(Db=a.createElement("path",{d:"M237.654 192.693L237.654 237.655L96.3461 237.655L96.3461 192.693L237.654 192.693Z",fill:"#1A4049"})),Lb||(Lb=a.createElement("rect",{x:192.692,y:192.693,width:44.9615,height:44.9615,fill:"#817AFE"})))}var Kb,Xb,Qb,$b,ep,tp=a.forwardRef(Zb),np=(n.p,Object(bc.a)((function(e){var t,n;return{title:Object(Ai.a)({color:"#fff",marginBottom:"1rem",fontSize:"2rem",marginTop:"5rem"},e.breakpoints.down("sm"),{textAlign:"left",fontSize:"1.75rem",marginTop:0}),container:(t={padding:"6rem 4rem",color:"#fff",position:"relative",borderTopLeftRadius:"3px",borderBottomLeftRadius:"3px",textAlign:"right"},Object(Ai.a)(t,e.breakpoints.down("sm"),{padding:"3rem 2rem"}),Object(Ai.a)(t,e.breakpoints.down("xs"),{padding:"3rem 1rem"}),t),bannerSubtitle:(n={},Object(Ai.a)(n,e.breakpoints.down("sm"),{maxWidth:"300px",fontSize:"1.75rem",textAlign:"left"}),Object(Ai.a)(n,e.breakpoints.down("xs"),{display:"none"}),Object(Ai.a)(n,"fontSize","2rem"),Object(Ai.a)(n,"fontWeight","300"),n),logoContainer:Object(Ai.a)({position:"absolute",bottom:"-50px",left:"-50px",display:"flex",flexDirection:"column"},e.breakpoints.down("sm"),{display:"none"}),logo:{width:"240px",height:"240px"}}}))),ap=function(e){var t=e.title,n=(e.children,Object(kr.a)()),a=np();return Object(dr.jsxs)(Yb,{from:n.palette.primary.main,to:n.palette.login.gradient.bottom,style:{borderBottomLeftRadius:"3px",borderTopLeftRadius:"3px"},children:[Object(dr.jsxs)("div",{className:a.container,children:[Object(dr.jsx)(Rr.a,{variant:"h1",className:a.title,children:t}),Object(dr.jsx)(Rr.a,{className:a.bannerSubtitle,children:"Committed to creating new ways of developing software"})]}),Object(dr.jsx)("div",{className:a.logoContainer,children:Object(dr.jsx)(tp,{className:a.logo})})]})},rp=Object(bc.a)((function(e){var t,n;return{container:(t={padding:"5.5rem",background:"#EFF2F2",display:"flex"},Object(Ai.a)(t,e.breakpoints.down("sm"),{flexDirection:"column"}),Object(Ai.a)(t,e.breakpoints.down("xs"),{padding:"0"}),Object(Ai.a)(t,"minHeight","100vh"),t),leftContainer:Object(Ai.a)({width:"40%",borderRadius:"3px"},e.breakpoints.down("sm"),{borderRadius:"0",width:"100%",minHeight:"auto"}),rightContainer:Object(Ai.a)({width:"60%",flex:"1",borderTopRightRadius:"3px",borderBottomRightRadius:"3px",backgroundColor:"#fff",position:"relative"},e.breakpoints.down("sm"),{borderRadius:"0",width:"100%",position:"static",minHeight:"auto"}),title:{fontWeight:"bold",fontSize:"1.2rem",marginBottom:"1rem"},innerRightContainer:(n={display:"flex",justifyContent:"center",height:"100%",padding:"6rem 3rem"},Object(Ai.a)(n,e.breakpoints.down("sm"),{padding:"2rem 2rem"}),Object(Ai.a)(n,e.breakpoints.down("xs"),{padding:"2rem 1rem"}),n)}})),ip=function(e){var t=e.children,n=e.BannerComponent,a=rp(),r=Object(dr.jsx)(ap,{title:"Unleash"});return n&&(r=n),Object(dr.jsxs)("div",{className:a.container,children:[Object(dr.jsx)("div",{className:a.leftContainer,children:r}),Object(dr.jsx)("div",{className:a.rightContainer,children:Object(dr.jsx)("div",{className:a.innerRightContainer,children:t})})]})},cp=function(e){var t,n=e.history,r=e.user,i=e.fetchUser,c=Hb(),o=sb();Object(a.useEffect)((function(){i()}),[]),Object(a.useEffect)((function(){r.permissions.length>0&&n.push("features")}),[r.permissions]);var s="true"===o.get("reset");return Object(dr.jsx)(ip,{children:Object(dr.jsxs)("div",{className:c.loginFormContainer,children:[Object(dr.jsx)(br,{condition:(null===r||void 0===r||null===(t=r.authDetails)||void 0===t?void 0:t.type)!==Ub,show:Object(dr.jsx)("h2",{className:c.title,children:"Login to continue the great work"})}),Object(dr.jsx)(br,{condition:s,show:Object(dr.jsx)(Jb,{})}),Object(dr.jsx)(Mb,{history:n})]})})},op={fetchUser:_e},sp=Object(l.b)((function(e){return{user:e.user.toJS(),flags:e.uiConfig.toJS().flags}}),op)(cp),lp=function(){return Object(dr.jsxs)(ai.a,{severity:"error","data-loading":!0,children:[Object(dr.jsx)(zb.a,{children:"Unable to reset password"}),"Something went wrong when attempting to update your password. This could be due to unstable internet connectivity. If retrying the request does not work, please try again later."]})},up=Object(bc.a)((function(e){return{container:{display:"flex",flexDirection:"column",position:"relative"},button:{width:"150px",margin:"1rem auto",display:"block"}}})),dp=function(e){var t=e.token,n=e.setLoading,r=up(),i=Gi(),c=Object(a.useState)(!1),o=Object(Sr.a)(c,2),l=o[0],u=o[1],d=Object(a.useState)(""),j=Object(Sr.a)(d,2),h=j[0],b=j[1],p=Object(a.useState)(!1),f=Object(Sr.a)(p,2),m=f[0],g=f[1],O=Object(a.useState)(""),x=Object(Sr.a)(O,2),v=x[0],w=x[1],T=Object(a.useState)(!1),S=Object(Sr.a)(T,2),E=S[0],k=S[1],N=Object(a.useState)(!1),A=Object(Sr.a)(N,2),R=A[0],I=A[1],D=Object(s.g)(),L=E&&R,P=Object(a.useCallback)(I,[I]);Object(a.useEffect)((function(){h||I(!1),k(h===v)}),[h,v]);var F=function(){var e=C("auth/reset/password");return fetch(e,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({token:t,password:h})})},U=function(){var e=Object(_.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.prev=1,e.next=4,F();case 4:t=e.sent,n(!1),t.status===lj?(D.push("login?reset=true"),u(!1)):u(!0),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),u(!0),n(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),V=Boolean(h&&v);return Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(br,{condition:l,show:Object(dr.jsx)(lp,{})}),Object(dr.jsxs)("form",{onSubmit:function(e){e.preventDefault(),L&&U()},className:fr()(i.contentSpacingY,r.container),children:[Object(dr.jsx)(Vr.a,{variant:"outlined",size:"small",type:"password",placeholder:"Password",value:h||"",onChange:function(e){return b(e.target.value)},onFocus:function(){return g(!0)},autoComplete:"password","data-loading":!0}),Object(dr.jsx)(Vr.a,{variant:"outlined",size:"small",type:"password",value:v||"",placeholder:"Confirm password",onChange:function(e){return w(e.target.value)},autoComplete:"confirm-password","data-loading":!0}),Object(dr.jsx)(br,{condition:m,show:Object(dr.jsx)(gj,{password:h,callback:P,style:{marginBottom:"1rem"}})}),Object(dr.jsx)(yj,{started:V,matchingPasswords:E}),Object(dr.jsx)(ni.a,{variant:"contained",color:"primary",type:"submit",className:r.button,"data-loading":!0,disabled:!L,children:"Submit"})]})]})},jp=function(e){var t=e.children,n=e.token,a=e.setLoading;return Object(dr.jsxs)("div",{style:{width:"100%"},children:[t,Object(dr.jsx)(dp,{token:n,setLoading:a})]})},hp=Object(bc.a)((function(e){return{newUser:Object(Ai.a)({width:"350px"},e.breakpoints.down("xs"),{width:"100%"}),title:{fontSize:e.fontSizes.mainHeader,marginBottom:"1.25rem",textAlign:"center"},inviteText:{marginBottom:"1rem",textAlign:"center"},container:{display:"flex"},roleContainer:{marginTop:"2rem"},innerContainer:{width:"60%",padding:"4rem 3rem"},buttonContainer:{display:"flex",marginTop:"1rem"},primaryBtn:{marginRight:"8px"},subtitle:{margin:"0.5rem 0"},passwordHeader:{marginTop:"2rem"},emailField:Object(Ai.a)({minWidth:"300px",width:"100%"},e.breakpoints.down("xs"),{minWidth:"100%"})}})),bp=function(){var e=sb(),t=e.get("token")||"",n=Object(a.useState)(t),r=Object(Sr.a)(n,2),i=r[0],c=r[1],o=function(e){return function(){var t=C("auth/reset/validate?token=".concat(e));return fetch(t,{method:"GET"}).then((function(e){return e.json()}))}}(i),s="auth/reset/validate?token=".concat(i),l=Object(Vj.a)(s,o),u=l.data,d=l.error,j=Object(a.useState)(!d&&!u),h=Object(Sr.a)(j,2),b=h[0],p=h[1];Object(a.useEffect)((function(){p(!d&&!u)}),[u,d]);var f=!b&&"InvalidTokenError"===(null===u||void 0===u?void 0:u.name)||"UsedTokenError"===(null===u||void 0===u?void 0:u.name);return{token:i,data:u,error:d,loading:b,setLoading:p,invalidToken:f,retry:function(){var t=e.get("token")||"";c(t)}}},pp=function(){var e=Gi();return Object(dr.jsxs)("div",{className:e.contentSpacingY,children:[Object(dr.jsx)(Rr.a,{variant:"h2",className:e.title,children:"Invalid token"}),Object(dr.jsx)(Rr.a,{variant:"subtitle1",children:"Your token has either been used to reset your password, or it has expired. Please request a new reset password URL in order to reset your password."}),Object(dr.jsx)(ni.a,{variant:"contained",color:"primary",component:o.b,to:"forgotten-password",children:"Reset password"})]})},fp=function(e){var t,n,a,r=e.user,i=bp(),c=i.token,o=i.data,s=i.loading,l=i.setLoading,u=i.invalidToken,d=_l(s),j=hp();return Object(dr.jsx)("div",{ref:d,children:Object(dr.jsx)(ip,{showMenu:!1,BannerComponent:Object(dr.jsx)(ap,{title:"Unleash"}),children:Object(dr.jsx)("div",{className:j.newUser,children:Object(dr.jsx)(br,{condition:u,show:Object(dr.jsx)(pp,{}),elseShow:Object(dr.jsxs)(jp,{token:c,setLoading:l,children:[Object(dr.jsx)("h2",{className:j.title,children:"Enter your personal details and start your journey"}),Object(dr.jsx)(br,{condition:null===o||void 0===o?void 0:o.createdBy,show:Object(dr.jsxs)(Rr.a,{variant:"body1","data-loading":!0,className:j.inviteText,children:[null===o||void 0===o?void 0:o.createdBy,Object(dr.jsx)("br",{})," has invited you to join Unleash."]})}),Object(dr.jsx)(Rr.a,{"data-loading":!0,variant:"body1",className:j.subtitle,children:"Your username is"}),Object(dr.jsx)(Vr.a,{"data-loading":!0,value:(null===o||void 0===o?void 0:o.email)||"",variant:"outlined",size:"small",className:j.emailField,disabled:!0}),Object(dr.jsx)("div",{className:j.roleContainer,children:Object(dr.jsx)(br,{condition:(null===r||void 0===r||null===(t=r.authDetails)||void 0===t||null===(n=t.options)||void 0===n?void 0:n.length)>0,show:Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(yb,{text:"sign in with","data-loading":!0}),Object(dr.jsx)(xb,{options:null===r||void 0===r||null===(a=r.authDetails)||void 0===a?void 0:a.options}),Object(dr.jsx)(yb,{text:"or set a new password for your account","data-loading":!0})]}),elseShow:Object(dr.jsx)(Rr.a,{variant:"body1","data-loading":!0,children:"Set a password for your account."})})})]})})})})})},mp=Object(l.b)((function(e){return{user:e.user.toJS()}}))(fp),gp=Object(bc.a)((function(e){return{resetPassword:Object(Ai.a)({width:"350px",maxWidth:"350px"},e.breakpoints.down("xs"),{width:"100%"}),container:{display:"flex"},innerContainer:{width:"40%",minHeight:"100vh"},title:{fontWeight:"bold",fontSize:"1.2rem",marginBottom:"1rem"}}})),Op=function(){var e=gp(),t=bp(),n=t.token,a=t.loading,r=t.setLoading,i=t.invalidToken,c=_l(a);return Object(dr.jsx)("div",{ref:c,children:Object(dr.jsx)(ip,{children:Object(dr.jsx)("div",{className:e.resetPassword,children:Object(dr.jsx)(br,{condition:i,show:Object(dr.jsx)(pp,{}),elseShow:Object(dr.jsx)(jp,{token:n,setLoading:r,children:Object(dr.jsx)(Rr.a,{variant:"h2",className:e.title,"data-loading":!0,children:"Reset password"})})})})})})},xp=Object(bc.a)((function(e){return{forgottenPassword:Object(Ai.a)({width:"350px"},e.breakpoints.down("xs"),{width:"100%"}),button:{width:"150px",margin:"1rem auto"},email:{display:"block",margin:"0.5rem 0"},loginText:{textAlign:"center"}}})),vp=[{path:"/features/create",parent:"/features",title:"Create",component:wo,type:"protected",layout:"main"},{path:"/features/copy/:copyToggle",parent:"/features",title:"Copy",component:ko,type:"protected",layout:"main"},{path:"/features/:activeTab/:name",parent:"/features",title:":name",component:al,type:"protected",layout:"main"},{path:"/features",title:"Feature Toggles",icon:"list",component:Pl,type:"protected",layout:"main"},{path:"/strategies/create",title:"Create",parent:"/strategies",component:Jl,type:"protected",layout:"main"},{path:"/strategies/:activeTab/:strategyName",title:":strategyName",parent:"/strategies",component:Ql,type:"protected",layout:"main"},{path:"/strategies",title:"Strategies",icon:"extension",component:nu,type:"protected",layout:"main"},{path:"/history/:toggleName",title:":toggleName",parent:"/history",component:cu,type:"protected",layout:"main"},{path:"/history",title:"Event History",icon:"history",component:iu,type:"protected",layout:"main"},{path:"/archive/:activeTab/:name",title:":name",parent:"/archive",component:su,type:"protected",layout:"main"},{path:"/archive",title:"Archived Toggles",icon:"archive",component:ju,type:"protected",layout:"main"},{path:"/applications/:name",title:":name",parent:"/applications",component:Su,type:"protected",layout:"main"},{path:"/applications",title:"Applications",icon:"apps",component:gu,type:"protected",layout:"main"},{path:"/context/create",parent:"/context",title:"Create",component:Uu,type:"protected",layout:"main"},{path:"/context/edit/:name",parent:"/context",title:":name",component:Gu,type:"protected",layout:"main"},{path:"/context",title:"Context Fields",icon:"album",component:Ru,type:"protected",flag:"C",layout:"main"},{path:"/projects/create",parent:"/projects",title:"Create",component:ed,type:"protected",layout:"main"},{path:"/projects/edit/:id",parent:"/projects",title:":id",component:nd,type:"protected",layout:"main"},{path:"/projects/view/:id",parent:"/projects",title:":id",component:cd,type:"protected",layout:"main"},{path:"/projects/:id/access",parent:"/projects",title:":id",component:dd,type:"protected",layout:"main"},{path:"/projects",title:"Projects",icon:"folder_open",component:qu,flag:"P",type:"protected",layout:"main"},{path:"/tag-types/create",parent:"/tag-types",title:"Create",component:Od,type:"protected",layout:"main"},{path:"/tag-types/edit/:name",parent:"/tag-types",title:":name",component:vd,type:"protected",layout:"main"},{path:"/tag-types",title:"Tag types",icon:"label",component:fd,type:"protected",layout:"main"},{path:"/tags/create",parent:"/tags",title:"Create",component:Nd,type:"protected",layout:"main"},{path:"/tags",title:"Tags",icon:"label",component:Cd,hidden:!0,type:"protected",layout:"main"},{path:"/addons/create/:provider",parent:"/addons",title:"Create",component:qd,type:"protected",layout:"main"},{path:"/addons/edit/:id",parent:"/addons",title:"Edit",component:Zd,type:"protected",layout:"main"},{path:"/addons",title:"Addons",icon:"device_hub",component:Vd,hidden:!1,type:"protected",layout:"main"},{path:"/reporting",title:"Reporting",icon:"report",component:nb,type:"protected",layout:"main"},{path:"/admin/api",parent:"/admin",title:"API access",component:ij,type:"protected",layout:"main"},{path:"/admin/users",parent:"/admin",title:"Users",component:Jj,type:"protected",layout:"main"},{path:"/admin/auth",parent:"/admin",title:"Authentication",component:dh,type:"protected",layout:"main"},{path:"/admin-invoices",title:"Invoices",icon:"money",component:Xj,hidden:!0,type:"protected",layout:"main"},{path:"/admin",title:"Admin",icon:"album",component:Kd,hidden:!1,type:"protected",layout:"main"},{path:"/logout",title:"Sign out",icon:"exit_to_app",component:zu,type:"unprotected",layout:"main"},{path:"/login",title:"Log in",icon:"user",component:sp,type:"unprotected",hidden:!0,layout:"standalone"},{path:"/new-user",title:"New user",hidden:!0,component:mp,type:"unprotected",layout:"standalone"},{path:"/reset-password",title:"reset-password",hidden:!0,component:Op,type:"unprotected",layout:"standalone"},{path:"/forgotten-password",title:"reset-password",hidden:!0,component:function(){var e=Object(a.useState)(""),t=Object(Sr.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(!1),c=Object(Sr.a)(i,2),s=c[0],l=c[1],u=Object(a.useState)(!1),d=Object(Sr.a)(u,2),j=d[0],h=d[1],b=Object(a.useState)(""),p=Object(Sr.a)(b,2),f=p[0],m=p[1],g=Gi(),O=xp(),x=_l(j),v=function(){var e=Object(_.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),h(!0),m(n),a=C("auth/reset/password-email"),e.next=6,fetch(a,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({email:n})});case 6:l(!0),h(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(dr.jsx)(ip,{children:Object(dr.jsxs)("div",{className:fr()(g.contentSpacingY,g.flexColumn,O.forgottenPassword),ref:x,children:[Object(dr.jsx)(Rr.a,{variant:"h2",className:fr()(g.title,g.textCenter),"data-loading":!0,children:"Forgotten password"}),Object(dr.jsx)(br,{condition:s,show:Object(dr.jsxs)(ai.a,{severity:"success","data-loading":!0,children:[Object(dr.jsx)(zb.a,{children:"Attempted to send email"}),"We've attempted to send a reset password email to:",Object(dr.jsx)("strong",{className:O.email,children:f}),"If you did not receive an email, please verify that you typed in the correct email, and contact your administrator to make sure that you are in the system."]})}),Object(dr.jsxs)("form",{onSubmit:v,className:fr()(g.contentSpacingY,g.flexColumn,O.container),children:[Object(dr.jsx)(Rr.a,{variant:"body1","data-loading":!0,className:g.textCenter,children:"Please provide your email address. If it exists in the system we'll send a new reset link."}),Object(dr.jsx)(Vr.a,{variant:"outlined",size:"small",placeholder:"email",type:"email","data-loading":!0,value:n,onChange:function(e){r(e.target.value)}}),Object(dr.jsx)(ni.a,{variant:"contained",type:"submit","data-loading":!0,color:"primary",className:O.button,disabled:j,children:Object(dr.jsx)(br,{condition:!s,show:Object(dr.jsx)("span",{children:"Submit"}),elseShow:Object(dr.jsx)("span",{children:"Try again"})})}),Object(dr.jsx)(yb,{text:"Or log in"}),Object(dr.jsx)(ni.a,{type:"submit","data-loading":!0,variant:"outlined",className:O.button,disabled:j,component:o.b,to:"/login",children:"Log in"})]})]})})},type:"unprotected",layout:"standalone"}],yp=vp.filter((function(e){return!e.hidden})).filter((function(e){return!e.parent}));function _p(){return(_p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function wp(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Cp(e,t){var n=e.title,r=e.titleId,i=wp(e,["title","titleId"]);return a.createElement("svg",_p({id:"bg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 251.43 251.03",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,Kb||(Kb=a.createElement("defs",null,a.createElement("style",null,".cls-1{fill:#1a4049;}.cls-2{fill:#fff;}.cls-3{fill:#817afe;}"))),Xb||(Xb=a.createElement("circle",{className:"cls-1",cx:125.71,cy:125.31,r:80})),Qb||(Qb=a.createElement("polygon",{className:"cls-2",points:"137.14 91.03 137.14 113.88 137.14 136.74 160 136.74 160 113.88 160 91.03 137.14 91.03"})),$b||($b=a.createElement("polygon",{className:"cls-2",points:"114.29 113.88 114.29 91.03 91.43 91.03 91.43 113.88 91.43 136.74 91.43 159.6 114.29 159.6 137.14 159.6 137.14 136.74 114.29 136.74 114.29 113.88"})),ep||(ep=a.createElement("rect",{className:"cls-3",x:137.14,y:136.74,width:22.86,height:22.86})))}var Tp=a.forwardRef(Cp),Sp=(n.p,function(e){return function(t){return!(t.flag&&!e[t.flag])}});function Ep(e){return"c_github"===e?Object(dr.jsx)("i",{className:fr()("material-icons",Ur.a.navigationIcon,Ur.a.iconGitHub)}):Object(dr.jsx)(_r.a,{className:Ur.a.navigationIcon,children:e})}var kp,Np,Ap,Rp,Ip=function(e){var t=e.links,n=void 0===t?[]:t,a=e.title,r=void 0===a?"Unleash":a,i=e.flags,c=void 0===i?{}:i,s=e.open,l=void 0!==s&&s,u=e.toggleDrawer;return Object(dr.jsx)(Dr.a,{className:Ur.a.drawer,open:l,anchor:"left",onClose:function(){return u()},children:Object(dr.jsxs)("div",{className:Ur.a.drawerContainer,children:[Object(dr.jsx)("div",{children:Object(dr.jsxs)("span",{className:[Ur.a.drawerTitle].join(" "),children:[Object(dr.jsx)(Tp,{className:Ur.a.drawerTitleLogo}),Object(dr.jsx)("span",{className:Ur.a.drawerTitleText,children:r})]})}),Object(dr.jsx)(Lr.a,{}),Object(dr.jsx)(Pr.a,{className:Ur.a.drawerList,children:yp.filter(Sp(c)).map((function(e){return Object(dr.jsxs)(o.c,{onClick:function(){return u()},to:e.path,className:fr()(Ur.a.navigationLink),activeClassName:fr()(Ur.a.navigationLinkActive),children:[Ep(e.icon),e.title]},e.path)}))}),Object(dr.jsx)(Lr.a,{}),Object(dr.jsx)(Pr.a,{className:Ur.a.navigation,children:n.map((function(e){return function(e,t){return e.path?Object(dr.jsxs)(o.c,{onClick:function(){return t()},to:e.path,className:fr()(Ur.a.navigationLink),activeClassName:fr()(Ur.a.navigationLinkActive),children:[Ep(e.icon)," ",e.value]},e.path):Object(dr.jsxs)("a",{href:e.href,target:"_blank",className:[Ur.a.navigationLink].join(" "),title:e.title,rel:"noreferrer",children:[Ep(e.icon)," ",e.value]},e.href)}(e,u)}))})]})})},Dp=n(189),Lp=n.n(Dp),Pp=void 0,Fp=function(e,t){if(!t)return null;var n,a,r,i=t.title.startsWith(":")?e[t.title.substring(1)]:t.title;return t.parent?(n=i,r=t.parent,a=vp.find((function(e){return e.path===r})),document.title="".concat(n," -  ").concat(a.title," - Unleash"),Object(dr.jsxs)("span",{children:[Object(dr.jsx)(o.b,{className:xr.a.headerTitleLink,to:a.path,children:a.title}),Object(dr.jsxs)("span",{children:[Object(dr.jsx)("span",{children:" \u203a "}),Object(dr.jsx)("span",{className:xr.a.headerTitleLink,children:n})]})]})):function(e){return document.title="".concat(e.title," - Unleash"),Object(dr.jsx)("span",{children:Object(dr.jsx)("span",{className:xr.a.headerTitleLink,children:e.title})})}(t)},Up=function(){return Object(dr.jsx)(s.d,{children:vp.map((function(e){return Object(dr.jsx)(s.b,{path:e.path,render:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pp.props,n=t.match.params;return Fp(n,e)}},e.path)}))})},Vp=n(186),Gp=n.n(Vp),Bp=n(188),Mp=n.n(Bp),Hp=Object(mr.a)({userProfileMenu:{display:"flex"},profileContainer:{position:"relative"},button:{color:"#fff",padding:"0.2rem 1rem"}}),zp=Object(mr.a)((function(e){return{profile:Object(Ai.a)({position:"absolute",zIndex:"5000",minWidth:"300px",right:0,padding:"1.5rem"},e.breakpoints.down("sm"),{width:"100%",padding:"1rem"}),avatar:{width:"40px",height:"40px",transition:"transform 0.4s ease"},editingAvatar:{transform:"translateX(-102px) translateY(-9px)"},profileEmail:{transition:"transform 0.4s ease"},editingEmail:{transform:"translateX(10px) translateY(-60px)"}}})),Jp=Object(bc.a)((function(e){return{container:{width:"100%",transform:"translateY(-30px)"},form:{width:"100%","& > *":{width:"100%"}},editProfileTitle:{fontWeight:"bold"},button:Object(Ai.a)({width:"150px",marginTop:"1.15rem"},e.breakpoints.down("sm"),{width:"100px"})}})),Yp=function(e){var t=e.setEditingProfile,n=e.setUpdatedPassword,r=Jp(),i=Gi(),c=Object(a.useState)(!1),o=Object(Sr.a)(c,2),s=o[0],l=o[1],u=Object(a.useState)(!1),d=Object(Sr.a)(u,2),j=d[0],h=d[1],b=Object(a.useState)(""),p=Object(Sr.a)(b,2),f=p[0],m=p[1],g=Object(a.useState)(""),O=Object(Sr.a)(g,2),x=O[0],v=O[1],w=Object(a.useState)(""),T=Object(Sr.a)(w,2),S=T[0],E=T[1],k=_l(s),N=function(){var e=Object(_.a)(y.a.mark((function e(t){var n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),j&&x===S){e.next=5;break}m("Password is not valid, or your passwords do not match. Please provide a password with length over 10 characters, an uppercase letter, a lowercase letter, a number and a symbol."),e.next=18;break;case 5:return l(!0),m(""),e.prev=7,n=C("api/admin/user/change-password"),e.next=11,fetch(n,{headers:F,body:JSON.stringify({password:x,confirmPassword:S}),method:"POST",credentials:"include"});case 11:a=e.sent,A(a),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(7),m(e.t0);case 18:l(!1);case 19:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(t){return e.apply(this,arguments)}}(),A=function(e){400===e.status&&m("Password could not be accepted. Please make sure you are inputting a valid password."),401===e.status&&m("You are not authorized to make this request."),404===e.status&&m("The resource you requested could not be found on the server."),e.status===lj&&(t(!1),n(!0))};return Object(dr.jsxs)("div",{className:r.container,ref:k,children:[Object(dr.jsx)(Rr.a,{variant:"body1",className:r.editProfileTitle,"data-loading":!0,children:"Update password"}),Object(dr.jsx)(br,{condition:Boolean(f),show:Object(dr.jsx)(ai.a,{"data-loading":!0,severity:"error",children:f})}),Object(dr.jsxs)("form",{className:fr()(r.form,i.contentSpacingY),children:[Object(dr.jsx)(gj,{password:x,callback:h,"data-loading":!0}),Object(dr.jsx)(Vr.a,{"data-loading":!0,variant:"outlined",size:"small",label:"Password",type:"password",name:"password",value:x,autoComplete:"on",onChange:function(e){return v(e.target.value)}}),Object(dr.jsx)(Vr.a,{"data-loading":!0,variant:"outlined",size:"small",label:"Confirm password",type:"password",name:"confirmPassword",value:S,autoComplete:"on",onChange:function(e){return E(e.target.value)}}),Object(dr.jsx)(yj,{"data-loading":!0,started:Boolean(x&&S),matchingPasswords:x===S}),Object(dr.jsx)(ni.a,{"data-loading":!0,variant:"contained",color:"primary",className:r.button,type:"submit",onClick:N,children:"Save"}),Object(dr.jsx)(ni.a,{"data-loading":!0,className:r.button,type:"submit",onClick:function(){return t(!1)},children:"Cancel"})]})]})},Wp=n(187),qp=n.n(Wp),Zp=function(e){var t=e.showProfile,n=e.profile,r=e.possibleLocales,i=e.updateSettingLocation,c=e.imageUrl,o=e.currentLocale,s=e.setCurrentLocale,l=e.logoutUser,u=Gi(),d=Object(a.useState)(!1),j=Object(Sr.a)(d,2),h=j[0],b=j[1],p=Object(a.useState)(!1),f=Object(Sr.a)(p,2),m=f[0],g=f[1],O=zp(),x=fr()(O.avatar,Object(Ai.a)({},O.editingAvatar,m)),v=fr()(O.profileEmail,Object(Ai.a)({},O.editingEmail,m));return Object(dr.jsx)(br,{condition:t,show:Object(dr.jsxs)(Yc.a,{className:fr()(O.profile,u.flexColumn,u.itemsCenter,u.contentSpacingY),children:[Object(dr.jsx)(Xc.a,{alt:"user image",src:c,className:x}),Object(dr.jsx)(Rr.a,{variant:"body1",className:v,children:null===n||void 0===n?void 0:n.email}),Object(dr.jsx)(br,{condition:h,show:Object(dr.jsx)(ai.a,{onClose:function(){return b(!1)},children:"Successfully updated password."})}),Object(dr.jsx)(br,{condition:!m,show:Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(ni.a,{variant:"contained",onClick:function(){return g(!0)},children:"Update password"}),Object(dr.jsx)("div",{className:u.divider}),Object(dr.jsx)("div",{className:qp.a.showUserSettings,children:Object(dr.jsxs)(Hr.a,{variant:"outlined",size:"small",style:{width:"100%",minWidth:"120px"},children:[Object(dr.jsx)(zr.a,{htmlFor:"locale-select",style:{backgroundColor:"#fff"},children:"Date/Time formatting"}),Object(dr.jsx)(Jr.a,{id:"locale-select",value:o||"",native:!0,onChange:function(e){var t=e.target.value;s(t),function(e){i("locale",e)}(t)},MenuProps:{style:{zIndex:9999}},children:r.map((function(e){return Object(dr.jsx)("option",{value:e,children:e},e)}))})]})}),Object(dr.jsx)("div",{className:u.divider}),Object(dr.jsx)(ni.a,{variant:"contained",color:"primary",onClick:l,children:"Logout"})]}),elseShow:Object(dr.jsx)(Yp,{setEditingProfile:g,setUpdatedPassword:b})})]})})},Kp=function(e){var t=e.profile,n=e.location,r=e.fetchUser,i=e.updateSettingLocation,c=e.logoutUser,o=Object(a.useState)(!1),s=Object(Sr.a)(o,2),l=s[0],u=s[1],d=Object(a.useState)([]),j=Object(Sr.a)(d,2),h=j[0],b=j[1],p=Hp(),f=Gi(),m=Object(a.useState)(["en-US","en-GB","nb-NO","sv-SE","da-DK","en-IN","de","cs","pt-BR","fr-FR"]),g=Object(Sr.a)(m,2),O=g[0],x=g[1];Object(a.useEffect)((function(){r();var e=navigator.language||navigator.userLanguage,t=O.find((function(t){return t.toLowerCase().includes(e.toLowerCase())}));b(t),t||x((function(t){return[].concat(Object(Xr.a)(t),[e])}))}),[]);var v=(t?t.email:"")?t.imageUrl:"unknown-user.png";return Object(dr.jsx)(Gp.a,{onOutsideClick:function(){return u(!1)},children:Object(dr.jsxs)("div",{className:p.profileContainer,children:[Object(dr.jsxs)(ni.a,{className:fr()(f.flexRow,f.itemsCenter,p.button),onClick:function(){return u((function(e){return!e}))},tabIndex:"1",role:"button",disableRipple:!0,children:[Object(dr.jsx)(Xc.a,{alt:"user image",src:v}),Object(dr.jsx)(Mp.a,{})]}),Object(dr.jsx)(Zp,{showProfile:l,imageUrl:v,profile:t,updateSettingLocation:i,possibleLocales:O,logoutUser:c,location:n,setCurrentLocale:b,currentLocale:h})]})})},Xp={fetchUser:_e,logoutUser:we,updateSettingLocation:ra("location")},Qp=Object(l.b)((function(e){return{profile:e.user.get("profile"),location:e.settings?e.settings.toJS().location:{}}}),Xp)(Kp),$p=n(190),ef=n.n($p),tf=Object(mr.a)((function(e){return{header:Object(Ai.a)({padding:"1rem",boxShadow:"none"},e.breakpoints.down("sm"),{padding:"1rem 0.5rem"}),container:Object(Ai.a)({display:"flex",alignItems:"center"},e.breakpoints.down("sm"),{padding:"0"}),drawerButton:{color:e.palette.iconButtons.main},headerTitle:{fontSize:"1.4rem"},userContainer:{marginLeft:"auto",display:"flex",alignItems:"center"},docsLink:{color:"#fff",textDecoration:"none",padding:"0.25rem 0.8rem",display:"flex",alignItems:"center"},docsIcon:{height:"25px",width:"25px"}}})),nf=function(e){var t=e.uiConfig,n=Object(kr.a)(),i=Object(Er.a)(n.breakpoints.down("sm")),c=tf(),o=Object(a.useState)(!1),l=Object(Sr.a)(o,2),u=l[0],d=l[1],j=function(){return d((function(e){return!e}))},h=t.links,b=t.name,p=t.flags;return Object(dr.jsx)(r.a.Fragment,{children:Object(dr.jsx)(Nr.a,{className:c.header,position:"static",children:Object(dr.jsxs)(Ar.a,{className:c.container,children:[Object(dr.jsx)(yr.a,{className:c.drawerButton,onClick:j,children:Object(dr.jsx)(Lp.a,{})}),Object(dr.jsx)(hr,{condition:!i,show:Object(dr.jsx)(Rr.a,{variant:"h1",className:c.headerTitle,children:Object(dr.jsx)(s.b,{path:"/:path",component:Up})})}),Object(dr.jsxs)("div",{className:c.userContainer,children:[Object(dr.jsx)(Ir.a,{title:"Go to the documentation",children:Object(dr.jsx)("a",{href:"https://docs.getunleash.io/",target:"_blank",rel:"noopener noreferrer",className:c.docsLink,children:Object(dr.jsx)(ef.a,{className:c.docsIcon})})}),Object(dr.jsx)(Qp,{})]}),Object(dr.jsx)(Ip,{links:h,title:b,flags:p,open:u,toggleDrawer:j})]})})})},af=Object(l.b)((function(e){return{uiConfig:e.uiConfig.toJS()}}))(nf),rf=function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(sr.a)(n,[{key:"render",value:function(){var e,t,n,a=this.props.uiConfig,r=a.slogan,i=a.environment,c=a.version,o=a.versionInfo,s=a.name;return o?(o.current.enterprise?(e="".concat(s," ").concat(o.current.enterprise),Object.keys(o.latest).includes("enterprise")&&!o.isLatest&&(t="Upgrade available - Latest Enterprise release: ".concat(o.latest.enterprise))):(e="".concat(s," ").concat(o.current.oss),Object.keys(o.latest).includes("oss")&&!o.isLatest&&(t="Upgrade available - Latest OSS release: ".concat(o.latest.oss))),n=o.instanceId):e="".concat(s," ").concat(c),Object(dr.jsxs)("section",{title:"API details",children:[Object(dr.jsxs)("h4",{children:["".concat(e)," ",Object(dr.jsx)(hr,{condition:i,show:Object(dr.jsxs)("small",{children:["(",i,")"]})})]}),Object(dr.jsx)(hr,{condition:t,show:Object(dr.jsxs)("small",{children:[t,Object(dr.jsx)("br",{})]})}),Object(dr.jsx)("br",{}),Object(dr.jsx)("small",{children:r}),Object(dr.jsx)("br",{}),Object(dr.jsx)(hr,{condition:n,show:Object(dr.jsx)("small",{children:"".concat(n)})})]})}}]),n}(a.Component),cf=Object(l.b)((function(e){return{uiConfig:e.uiConfig.toJS()}}),{})(rf),of=Object(mr.a)((function(e){return{footer:{background:e.palette.footer.background,padding:"2rem 4rem",width:"100%"},list:{padding:0,margin:0},listItem:{padding:0,margin:0,"& a":{textDecoration:"none",color:e.palette.footer.main}}}})),sf=function(){var e=of();return Object(dr.jsx)("footer",{className:e.footer,children:Object(dr.jsxs)(gr.a,{container:!0,children:[Object(dr.jsx)(gr.a,{item:!0,xs:3,children:Object(dr.jsxs)("section",{title:"Client SDKs",children:[Object(dr.jsx)("h4",{children:"Client SDKs"}),Object(dr.jsxs)(Pr.a,{className:e.list,children:[Object(dr.jsx)(Zc.a,{className:e.listItem,children:Object(dr.jsx)(Qc.a,{primary:Object(dr.jsx)("a",{href:"https://github.com/Unleash/unleash-client-node",className:e.link,children:"Node.js"})})}),Object(dr.jsx)(Zc.a,{className:e.listItem,children:Object(dr.jsx)(Qc.a,{primary:Object(dr.jsx)("a",{href:"https://github.com/Unleash/unleash-client-java",className:e.link,children:"Java"})})}),Object(dr.jsx)(Zc.a,{className:e.listItem,children:Object(dr.jsx)(Qc.a,{primary:Object(dr.jsx)("a",{href:"https://github.com/Unleash/unleash-client-go",className:e.link,children:"Go"})})})," ",Object(dr.jsx)(Zc.a,{className:e.listItem,children:Object(dr.jsx)(Qc.a,{primary:Object(dr.jsx)("a",{href:"https://github.com/Unleash/unleash-client-ruby",className:e.link,children:"Ruby"})})})," ",Object(dr.jsx)(Zc.a,{className:e.listItem,children:Object(dr.jsx)(Qc.a,{primary:Object(dr.jsx)("a",{href:"https://github.com/Unleash/unleash-client-python",className:e.link,children:"Python"})})}),Object(dr.jsx)(Zc.a,{className:e.listItem,children:Object(dr.jsx)(Qc.a,{primary:Object(dr.jsx)("a",{href:"https://github.com/Unleash/unleash-client-core",className:e.link,children:".Net Core"})})}),Object(dr.jsx)(Zc.a,{className:e.listItem,children:Object(dr.jsx)(Qc.a,{primary:Object(dr.jsx)("a",{href:"https://unleash.github.io/docs/client_sdk",className:e.link,children:"All client SDKs"})})})]})]})}),Object(dr.jsx)(gr.a,{item:!0,xs:12,children:Object(dr.jsx)(cf,{})})]})})},lf=Object(bc.a)({proclamation:{marginBottom:"1rem"},content:{maxWidth:"800px"},link:{display:"block",marginTop:"0.5rem",width:"100px"}}),uf=function(e){var t=e.toast,n=Object(a.useState)(!1),r=Object(Sr.a)(n,2),i=r[0],c=r[1],o=lf();Object(a.useEffect)((function(){var e;c(!!(e=(null===t||void 0===t?void 0:t.id)||"")&&(!localStorage||!localStorage.getItem(e))&&(console.log("RETURNING TRUE"),!0))}),[null===t||void 0===t?void 0:t.id]);return t?Object(dr.jsx)(br,{condition:i,show:Object(dr.jsxs)(ai.a,{className:o.proclamation,severity:t.severity,onClose:function(){localStorage&&localStorage.setItem((null===t||void 0===t?void 0:t.id)||"","seen"),c(!1)},children:[Object(dr.jsx)(Rr.a,{className:o.content,variant:"body2",children:t.message}),Object(dr.jsx)("a",{href:t.link,className:o.link,target:"_blank",rel:"noopener noreferrer",children:"View more"})]})}):null},df=Object(mr.a)((function(e){return{container:{height:"100%",justifyContent:"space-between"}}})),jf=function(e){var t=e.children,n=e.location,a=e.uiConfig,r=df();return Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(af,{location:n}),Object(dr.jsxs)(gr.a,{container:!0,className:r.container,children:[Object(dr.jsx)("div",{className:fr()(xr.a.contentWrapper),children:Object(dr.jsxs)(gr.a,{item:!0,className:xr.a.content,xs:12,sm:12,children:[Object(dr.jsxs)("div",{className:xr.a.contentContainer,children:[Object(dr.jsx)(uf,{toast:a.toast}),t]}),Object(dr.jsx)(Tr,{})]})}),Object(dr.jsx)(sf,{})]})]})},hf=Object(l.b)((function(e,t){return{uiConfig:e.uiConfig.toJS(),location:t.location,children:t.children}}))(jf),bf=function(e){var t=e.children,n=e.location;return Object(dr.jsx)(br,{condition:function(){var e=n.pathname,t=Object(s.f)(e,{path:"/login"}),a=Object(s.f)(e,{path:"/new-user"}),r=Object(s.f)(e,{path:"/reset-password"}),i=Object(s.f)(e,{path:"/reset-password-success"}),c=Object(s.f)(e,{path:"/forgotten-password"}),o=Object(s.f)(e,{path:"/404"});return t||a||r||i||c||o}(),show:t,elseShow:Object(dr.jsx)(hf,{location:n,children:t})})},pf=Object(bc.a)({container:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",padding:"2rem",position:"fixed",backgroundColor:"#fff",width:"100%"},logo:{height:"80px"},content:{display:"flex",position:"relative"},buttonContainer:{marginTop:"2rem"},homeButton:{marginLeft:"1rem"},icon:{height:"150px",width:"150px",position:"absolute",right:100,top:45}}),ff=function(){var e=Object(s.g)(),t=pf();return Object(dr.jsx)("div",{className:t.container,children:Object(dr.jsxs)("div",{children:[Object(dr.jsx)(Tp,{className:t.logo}),Object(dr.jsx)("div",{className:t.content,children:Object(dr.jsx)(Rr.a,{variant:"h1",style:{fontSize:"2rem"},children:"Ooops. That's a page we haven't toggled on yet."})}),Object(dr.jsxs)("div",{className:t.buttonContainer,children:[Object(dr.jsx)(ni.a,{variant:"contained",color:"primary",onClick:function(){e.goBack()},children:"Go back"}),Object(dr.jsx)(ni.a,{onClick:function(){e.push("/")},className:t.homeButton,children:"Go home"})]})]})})},mf=n(191),gf=n.n(mf);function Of(){return(Of=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function xf(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function vf(e,t){var n=e.title,r=e.titleId,i=xf(e,["title","titleId"]);return a.createElement("svg",Of({width:23,height:23,viewBox:"0 0 23 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,kp||(kp=a.createElement("rect",{x:.288513,y:.288574,width:7.13461,height:22.4231,fill:"#1A4049"})),Np||(Np=a.createElement("rect",{x:15.5769,y:.288574,width:7.13461,height:22.4231,fill:"#1A4049"})),Ap||(Ap=a.createElement("path",{d:"M22.7115 15.5771L22.7115 22.7118L0.28841 22.7118L0.28841 15.5771L22.7115 15.5771Z",fill:"#1A4049"})),Rp||(Rp=a.createElement("rect",{x:15.5769,y:15.5771,width:7.13461,height:7.13461,fill:"#817AFE"})))}var yf=a.forwardRef(vf),_f=(n.p,Object(bc.a)((function(e){return{feedback:{borderRadius:"3px",backgroundColor:"#fff",zIndex:"9999",boxShadow:"2px 2px 4px 4px rgba(143,143,143, 0.25)",padding:"1.5rem",maxWidth:"400px",width:"400px",height:"200px"},animateContainer:{zIndex:"9999"},feedbackStart:{opacity:"0",position:"fixed",right:"40px",bottom:"40px",transform:"translateY(400px)"},feedbackEnter:{transform:"translateY(0)",opacity:"1",transition:"transform 0.6s ease, opacity 1s ease"},feedbackLeave:{transform:"translateY(400px)",opacity:"0",transition:"transform 1.25s ease, opacity 1s ease"},container:{display:"flex",flexDirection:"column",position:"relative"},close:Object(Ai.a)({position:"absolute",right:"-38px",top:"-47px",backgroundColor:"#fff",boxShadow:"2px 2px 4px 4px rgba(143,143,143, 0.25)"},"&:hover",{backgroundColor:"#fff"}),logo:{width:"25px",height:"25px"},cancel:{marginLeft:"1rem"}}}))),wf=function(e){var t=e.mounted,n=e.enter,r=e.start,i=e.leave,c=e.container,o=e.children,s=Object(a.useState)(t),l=Object(Sr.a)(s,2),u=l[0],d=l[1],j=Object(a.useState)(""),h=Object(Sr.a)(j,2),b=h[0],p=h[1],f=Object(a.useRef)(null);Object(a.useEffect)((function(){f.current===t&&null!==f||(t?(d(!0),setTimeout((function(){p(n)}),50)):p(i))}),[t,n,i]);return Object(dr.jsx)(br,{condition:u,show:Object(dr.jsx)("div",{className:"".concat(r," ").concat(b," ").concat(c||""),onTransitionEnd:function(){t||d(!1)},children:o})})},Cf=function(e){var t=e.show,n=e.hideFeedback,r=e.fetchUser,i=e.feedbackId,c=e.openUrl,o=Object(a.useState)(!1),s=Object(Sr.a)(o,2),l=s[0],u=s[1],d=_f(),j=Gi(),h=function(){var e=Object(_.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C("api/admin/feedback"),e.prev=1,e.next=4,fetch(t,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedbackId:i})});case 4:return e.next=6,r();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n();case 11:window.open(c,"_blank"),setTimeout((function(){n()}),200);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(_.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="pnps",a=C("api/admin/feedback/".concat(encodeURIComponent(t))),e.prev=2,e.next=5,fetch(a,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedbackId:t,neverShow:!0})});case 5:return e.next=7,r();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),n();case 12:setTimeout((function(){n()}),100);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return Object(dr.jsx)(wf,{mounted:t,enter:d.feedbackEnter,start:d.feedbackStart,leave:d.feedbackLeave,container:d.animateContainer,children:Object(dr.jsx)("div",{className:d.feedback,children:Object(dr.jsxs)("div",{className:fr()(d.container,j.contentSpacingY),children:[Object(dr.jsx)(yr.a,{className:d.close,onClick:function(){return n()},children:Object(dr.jsx)(gf.a,{})}),Object(dr.jsx)(yf,{className:d.logo}),Object(dr.jsx)(br,{condition:l,show:Object(dr.jsx)("p",{children:"Alright, apologies for the disruption. Have a nice day!"}),elseShow:Object(dr.jsxs)("p",{children:["Hi. Do you have 2 minutes to help us improve Unleash?"," "]})}),Object(dr.jsx)("div",{children:Object(dr.jsx)(br,{condition:l,show:Object(dr.jsx)(ni.a,{variant:"outlined",onClick:b,children:"Don't show again"}),elseShow:Object(dr.jsxs)(dr.Fragment,{children:[Object(dr.jsx)(ni.a,{variant:"contained",color:"primary",onClick:h,children:"Yes, no problem"}),Object(dr.jsx)(ni.a,{className:d.cancel,onClick:function(){return u(!0)},children:"Not now"})]})})})]})})})},Tf=Object(l.b)((function(e){return{show:e.feedback.show}}),(function(e){return{hideFeedback:function(){!function(e){return function(){e({type:rr})}}(e)()},fetchUser:function(){return _e()(e)}}}))(Cf),Sf=Object(l.b)((function(e){return{user:e.user.toJS(),feedback:e.feedback}}))((function(e){var t,n=e.location,r=e.user,i=e.fetchUiBootstrap;e.feedback;Object(a.useEffect)((function(){i()}),[null===(t=r.authDetails)||void 0===t?void 0:t.type]);var c=function(){return void 0!==(null===r||void 0===r?void 0:r.authDetails)},o=function(e){if("protected"===e.type){var t=c();return Object(dr.jsx)(jr,{path:e.path,component:e.component,unauthorized:t},e.path)}return Object(dr.jsx)(s.b,{path:e.path,render:function(t){return Object(dr.jsx)(e.component,Object(x.a)(Object(x.a)({},t),{},{isUnauthorized:c,authDetails:r.authDetails}))}},e.path)};return Object(dr.jsx)("div",{className:xr.a.container,children:Object(dr.jsxs)(bf,{location:n,children:[Object(dr.jsxs)(s.d,{children:[Object(dr.jsx)(jr,{exact:!0,path:"/",unauthorized:c(),component:s.a,renderProps:{to:"/features"}}),vp.filter((function(e){return"main"===e.layout})).map(o),vp.filter((function(e){return"standalone"===e.layout})).map(o),Object(dr.jsx)(s.b,{path:"/404",component:ff}),Object(dr.jsx)(s.a,{to:"/404"})]}),Object(dr.jsx)(Tf,{feedbackId:"pnps",openUrl:"http://feedback.unleash.run"})]})})})),Ef=C("api/admin/ui-bootstrap");var kf={fetchUIBootstrap:function(){return fetch(Ef,{credentials:"include"}).then(P).then((function(e){return e.json()}))}};var Nf,Af={fetchUiBootstrap:function(){return function(e){return kf.fetchUIBootstrap().then((function(t){e(En(t.projects)),e(fa(t.uiConfig)),e(bn(t.context)),e(it(t)),e(Ne(t.featureTypes)),e(Rt(t.strategies))})).catch(z(e,"ERROR_RECEIVE_CONFIG"))}}},Rf=Object(l.b)((function(e){return{user:e.user.toJS()}}),Af)(Sf),If=function(e){Object(E.a)(n,e);var t=Object(k.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(sr.a)(n,[{key:"componentDidUpdate",value:function(e){if(this.props.location!==e.location){if(this.props.location.pathname.includes("/features/metrics")||this.props.location.pathname.includes("/features/variants")||this.props.location.pathname.includes("/features/strategies")||this.props.location.pathname.includes("/features/logs")||this.props.location.pathname.includes("/admin/api")||this.props.location.pathname.includes("/admin/users")||this.props.location.pathname.includes("/admin/auth"))return;window.scrollTo(0,0)}}},{key:"render",value:function(){return this.props.children}}]),n}(a.Component),Df=Object(s.i)(If),Lf=function(e){var t=e.store,n=e.children,a={hasAccess:function(e,n){return(t.getState().user.get("permissions")||[]).some((function(t){return t.permission===uo||(t.permission===e&&t.project===n||t.permission===e&&void 0===n)}))}};return Object(dr.jsx)(el.Provider,{value:a,children:n})};Nf=h.d,console.log("%cThis is a warning!\nPlease do not use any JavaScript using copy/paste\nfrom elsewhere on the web or any person.","color:white;font-size: 1.8em;background:red");var Pf=Object(h.e)(or,Nf(Object(h.a)(j.a)));new lr(Pf).start(),c.a.render(Object(dr.jsx)(l.a,{store:Pf,children:Object(dr.jsx)(b.a,{backend:p.a,children:Object(dr.jsx)(Lf,{store:Pf,children:Object(dr.jsx)(o.a,{basename:"".concat(w()),children:Object(dr.jsx)(u.a,{theme:g,children:Object(dr.jsxs)(f.b,{injectFirst:!0,children:[Object(dr.jsx)(d.a,{}),Object(dr.jsx)(Df,{children:Object(dr.jsx)(s.b,{path:"/",component:Rf})})]})})})})})}),document.getElementById("app"))},35:function(e,t,n){e.exports={reportToggleList:"ReportToggleList_reportToggleList__1BbG3",bulkAction:"ReportToggleList_bulkAction__2OD3e",sortIcon:"ReportToggleList_sortIcon__asP3i",reportToggleListHeader:"ReportToggleList_reportToggleListHeader__2-xAX",reportToggleListInnerContainer:"ReportToggleList_reportToggleListInnerContainer__1IB18",reportToggleListHeading:"ReportToggleList_reportToggleListHeading__2PQnI",reportingToggleTable:"ReportToggleList_reportingToggleTable__YmRCu",expired:"ReportToggleList_expired__1tl_E",active:"ReportToggleList_active__3WeMO",stale:"ReportToggleList_stale__-D_EN",reportStatus:"ReportToggleList_reportStatus__3yybZ",reportIcon:"ReportToggleList_reportIcon__1S-B0",tableRow:"ReportToggleList_tableRow__lzc0g",checkbox:"ReportToggleList_checkbox__1TlJF"}},43:function(e,t,n){e.exports={card:"ReportCard_card__28lps",header:"ReportCard_header__wdyW7",reportCardContainer:"ReportCard_reportCardContainer__3rgu3",reportCardHealthInnerContainer:"ReportCard_reportCardHealthInnerContainer__19AMh",reportCardHealthRating:"ReportCard_reportCardHealthRating__1wsDX",reportCardList:"ReportCard_reportCardList__2SvqO",check:"ReportCard_check__2ka_4",danger:"ReportCard_danger__1Xjiz",reportCardActionContainer:"ReportCard_reportCardActionContainer__3PKNR",reportCardActionText:"ReportCard_reportCardActionText__Um7IJ",reportCardBtn:"ReportCard_reportCardBtn__2GJQW",healthDanger:"ReportCard_healthDanger__3qvM6",healthWarning:"ReportCard_healthWarning__2RDhE"}},45:function(e,t,n){e.exports={truncate:"common_truncate__1qO3U",fullwidth:"common_fullwidth__2WESM",sectionPadding:"common_sectionPadding__-8ozJ",horisontalScroll:"common_horisontalScroll__1ZtPH",listLink:"common_listLink__n6g5E",hideLt920:"common_hideLt920__1NKO9",dataTableHeader:"common_dataTableHeader__zipW4",titleText:"common_titleText__1sfvV",actions:"common_actions__2XGyB",switchWithLabel:"common_switchWithLabel__3srPH",label:"common_label__10Wvp",switch:"common_switch__3m1Un",emptyState:"common_emptyState__1uIZY",dropdownButton:"common_dropdownButton__3YO7i",toggleName:"common_toggleName__1_X_q",toolbar:"common_toolbar__28-tQ",toolbarButton:"common_toolbarButton__1oX7F",error:"common_error__WYVnk",headerTitle:"common_headerTitle__2ueFi",listItem:"common_listItem__w7Oi1",section:"common_section__1-Y3A",contentPadding:"common_contentPadding__1RvAm",contentSpacing:"common_contentSpacing__1nt8k",searchField:"common_searchField__3iSZ5"}},47:function(e,t,n){e.exports={drawer:"drawer_drawer__2KYty",drawerTitle:"drawer_drawerTitle__vkGM7",drawerContainer:"drawer_drawerContainer__drsRz",drawerTitleLogo:"drawer_drawerTitleLogo__2Irlw",drawerTitleText:"drawer_drawerTitleText__3589H",drawerList:"drawer_drawerList__nj6BP",navigationLink:"drawer_navigationLink__XEtMo",navigationLinkActive:"drawer_navigationLinkActive__1mVtG",navigationIcon:"drawer_navigationIcon__1hqO5",iconGitHub:"drawer_iconGitHub__1cU0W"}},61:function(e,t,n){e.exports={variantTable:"variant_variantTable__3Lhzp",labels:"variant_labels__xvsd8",actions:"variant_actions__3z3Ah",actionsContainer:"variant_actionsContainer__14UDQ",modal:"variant_modal__1Ezwj",tooltip:"variant_tooltip__1_2Tk",inputWeight:"variant_inputWeight__1ZezT",flexCenter:"variant_flexCenter__EN4JL",flex:"variant_flex__3oIkL",marginL10:"variant_marginL10__3hFWW",addVariantButton:"variant_addVariantButton__Jd_9J",paragraph:"variant_paragraph__13MA3",helperText:"variant_helperText__4vqCy"}},63:function(e,t,n){e.exports={header:"Context_header__ATppJ",formButtons:"Context_formButtons__F8ujA",supporting:"Context_supporting__2iztK",container:"Context_container__3sn6v",h6:"Context_h6__13aNX",alpha:"Context_alpha__24fBp",inset:"Context_inset__3UBP5",chip:"Context_chip__2fx0h",valueField:"Context_valueField__1LQVW",legalValueButton:"Context_legalValueButton__1jBbn",formContainer:"Context_formContainer__2zHqd"}},68:function(e,t,n){e.exports={container:"styles_container__19787",primaryBreadbrumb:"styles_primaryBreadbrumb__nrP18",headerTitleLink:"styles_headerTitleLink__YsPX2",contentWrapper:"styles_contentWrapper__2cMz2",content:"styles_content__WoK-q",contentContainer:"styles_contentContainer__Gkj4S",drawerTitle:"styles_drawerTitle__2XwBb",drawerTitleLogo:"styles_drawerTitleLogo__3Y70Y",drawerTitleText:"styles_drawerTitleText__D8-y5",navigation:"styles_navigation__12o8W",navigationLink:"styles_navigationLink__33tMK",navigationIcon:"styles_navigationIcon__3w4yw",iconGitHub:"styles_iconGitHub__1ihew"}},70:function(e,t,n){e.exports={item:"strategy_item__3pQfZ",card:"strategy_card__36tq1",paragraph:"strategy_paragraph__3fjTR",cardText:"strategy_cardText__1EODu",isDragging:"strategy_isDragging__3Dfyb",isDroptarget:"strategy_isDroptarget__2Z-Do",actionButton:"strategy_actionButton__1BinC",cardTitle:"strategy_cardTitle__19wJD",helpText:"strategy_helpText__11xtB",editLink:"strategy_editLink__zRMW6",reorderIcon:"strategy_reorderIcon__340Y7",disabled:"strategy_disabled__36zyt",strategyListAdd:"strategy_strategyListAdd__3GZMI",strategyList:"strategy_strategyList__1EDFh",strategyListCards:"strategy_strategyListCards__354os",infoCard:"strategy_infoCard__2yqpu",generalSection:"strategy_generalSection__3kU_j",addStrategyButton:"strategy_addStrategyButton__3vwpP",subheader:"strategy_subheader__4xZGH",isDirty:"strategy_isDirty__2UGE-"}},77:function(e,t,n){e.exports={header:"add-feature-component_header__3isqe",container:"add-feature-component_container__1w-0_",nameInput:"add-feature-component_nameInput__Ys1bw",formContainer:"add-feature-component_formContainer__3aCx7",legalValueFormContainer:"add-feature-component_legalValueFormContainer__V0iEI",toggleContainer:"add-feature-component_toggleContainer__1KXM3",strategiesContainer:"add-feature-component_strategiesContainer__1TWg8"}},82:function(e,t,n){e.exports={nameInput:"form-addon-component_nameInput__37h_j",formContainer:"form-addon-component_formContainer__2mzxf",formSection:"form-addon-component_formSection__2423x",header:"form-addon-component_header__2ze2G"}},88:function(e,t,n){e.exports={header:"FeatureView_header__3n-V2",heading:"FeatureView_heading__23G9x",featureInfoContainer:"FeatureView_featureInfoContainer__3QHXd",selectContainer:"FeatureView_selectContainer__H0SsA",actions:"FeatureView_actions__WY_gN",tabContentContainer:"FeatureView_tabContentContainer__I6Qwu"}},97:function(e,t,n){e.exports={select:"TagType_select__wUWEg",textfield:"TagType_textfield__1zq0D",header:"TagType_header__1cOah",container:"TagType_container__1uAn-",formButtons:"TagType_formButtons__1hEOd",tagListItem:"TagType_tagListItem__3w513",tagTypeContainer:"TagType_tagTypeContainer__2Z15m",addTagTypeForm:"TagType_addTagTypeForm__51jlR"}},98:function(e,t,n){e.exports={container:"DemoAuth_container__1zMRd",emailField:"DemoAuth_emailField__2xaAV",form:"DemoAuth_form__3Gt5j",logo:"DemoAuth_logo__1l8yy",button:"DemoAuth_button__ZucgK"}}},[[257,1,2]]]);
//# sourceMappingURL=main.685b86fa.chunk.js.map